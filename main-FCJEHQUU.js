var y0=Object.defineProperty,v0=Object.defineProperties;var _0=Object.getOwnPropertyDescriptors;var du=Object.getOwnPropertySymbols,I0=Object.getPrototypeOf,DE=Object.prototype.hasOwnProperty,AE=Object.prototype.propertyIsEnumerable,E0=Reflect.get;var CE=(n,e,t)=>e in n?y0(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,F=(n,e)=>{for(var t in e||={})DE.call(e,t)&&CE(n,t,e[t]);if(du)for(var t of du(e))AE.call(e,t)&&CE(n,t,e[t]);return n},_e=(n,e)=>v0(n,_0(e));var RE=(n,e)=>{var t={};for(var r in n)DE.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&du)for(var r of du(n))e.indexOf(r)<0&&AE.call(n,r)&&(t[r]=n[r]);return t};var mr=(n,e,t)=>E0(I0(n),t,e);var E=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{c(t.next(u))}catch(l){i(l)}},s=u=>{try{c(t.throw(u))}catch(l){i(l)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);c((t=t.apply(n,e)).next())});var If;function hu(){return If}function gn(n){let e=If;return If=n,e}var NE=Symbol("NotFound");function ho(n){return n===NE||n?.name==="\u0275NotFound"}var ft=null,fu=!1,Ef=1,w0=null,Tt=Symbol("SIGNAL");function z(n){let e=ft;return ft=n,e}function gu(){return ft}var ia={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function oa(n){if(fu)throw new Error("");if(ft===null)return;ft.consumerOnSignalRead(n);let e=ft.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=ft.recomputing;if(r&&(t=e!==void 0?e.nextProducer:ft.producers,t!==void 0&&t.producer===n)){ft.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===ft&&(!r||b0(i,ft)))return;let o=fo(ft),s={producer:n,consumer:ft,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};ft.producersTail=s,e!==void 0?e.nextProducer=s:ft.producers=s,o&&kE(n,s)}function PE(){Ef++}function wf(n){if(!(fo(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Ef)){if(!n.producerMustRecompute(n)&&!aa(n)){pu(n);return}n.producerRecomputeValue(n),pu(n)}}function Tf(n){if(n.consumers===void 0)return;let e=fu;fu=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||T0(r)}}finally{fu=e}}function bf(){return ft?.consumerAllowSignalWrites!==!1}function T0(n){n.dirty=!0,Tf(n),n.consumerMarkedDirty?.(n)}function pu(n){n.dirty=!1,n.lastCleanEpoch=Ef}function sa(n){return n&&ME(n),z(n)}function ME(n){n.producersTail=void 0,n.recomputing=!0}function mu(n,e){z(e),n&&xE(n)}function xE(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(fo(n))do t=Sf(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function aa(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(wf(t),r!==t.version))return!0}return!1}function ca(n){if(fo(n)){let e=n.producers;for(;e!==void 0;)e=Sf(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function kE(n,e){let t=n.consumersTail,r=fo(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)kE(i.producer,i)}function Sf(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!fo(e)){let o=e.producers;for(;o!==void 0;)o=Sf(o)}return t}function fo(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Cf(n){w0?.(n)}function b0(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Df(n,e){return Object.is(n,e)}function S0(){throw new Error}var OE=S0;function LE(n){OE(n)}function Af(n){OE=n}var C0=null;function Rf(n,e){let t=Object.create(yu);t.value=n,e!==void 0&&(t.equal=e);let r=()=>FE(t);return r[Tt]=t,Cf(t),[r,s=>po(t,s),s=>Nf(t,s)]}function FE(n){return oa(n),n.value}function po(n,e){bf()||LE(n),n.equal(n.value,e)||(n.value=e,D0(n))}function Nf(n,e){bf()||LE(n),po(n,e(n.value))}var yu=_e(F({},ia),{equal:Df,value:void 0,kind:"signal"});function D0(n){n.version++,PE(),Tf(n),C0?.(n)}function Z(n){return typeof n=="function"}function go(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var vu=go(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ui(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ne=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Z(r))try{r()}catch(o){e=o instanceof vu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{VE(o)}catch(s){e=e??[],s instanceof vu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new vu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)VE(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ui(t,e)}remove(e){let{_finalizers:t}=this;t&&ui(t,e),e instanceof n&&e._removeParent(this)}};Ne.EMPTY=(()=>{let n=new Ne;return n.closed=!0,n})();var Pf=Ne.EMPTY;function _u(n){return n instanceof Ne||n&&"closed"in n&&Z(n.remove)&&Z(n.add)&&Z(n.unsubscribe)}function VE(n){Z(n)?n():n.unsubscribe()}var nn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var mo={setTimeout(n,e,...t){let{delegate:r}=mo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=mo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Iu(n){mo.setTimeout(()=>{let{onUnhandledError:e}=nn;if(e)e(n);else throw n})}function ua(){}var jE=Mf("C",void 0,void 0);function UE(n){return Mf("E",void 0,n)}function $E(n){return Mf("N",n,void 0)}function Mf(n,e,t){return{kind:n,value:e,error:t}}var li=null;function yo(n){if(nn.useDeprecatedSynchronousErrorHandling){let e=!li;if(e&&(li={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=li;if(li=null,t)throw r}}else n()}function BE(n){nn.useDeprecatedSynchronousErrorHandling&&li&&(li.errorThrown=!0,li.error=n)}var di=class extends Ne{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,_u(e)&&e.add(this)):this.destination=N0}static create(e,t,r){return new vo(e,t,r)}next(e){this.isStopped?kf($E(e),this):this._next(e)}error(e){this.isStopped?kf(UE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?kf(jE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},A0=Function.prototype.bind;function xf(n,e){return A0.call(n,e)}var Of=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Eu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Eu(r)}else Eu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Eu(t)}}},vo=class extends di{constructor(e,t,r){super();let i;if(Z(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&nn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&xf(e.next,o),error:e.error&&xf(e.error,o),complete:e.complete&&xf(e.complete,o)}):i=e}this.destination=new Of(i)}};function Eu(n){nn.useDeprecatedSynchronousErrorHandling?BE(n):Iu(n)}function R0(n){throw n}function kf(n,e){let{onStoppedNotification:t}=nn;t&&mo.setTimeout(()=>t(n,e))}var N0={closed:!0,next:ua,error:R0,complete:ua};var _o=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Pt(n){return n}function wu(...n){return Lf(n)}function Lf(n){return n.length===0?Pt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ne=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=M0(t)?t:new vo(t,r,i);return yo(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=HE(r),new r((i,o)=>{let s=new vo({next:c=>{try{t(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[_o](){return this}pipe(...t){return Lf(t)(this)}toPromise(t){return t=HE(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function HE(n){var e;return(e=n??nn.Promise)!==null&&e!==void 0?e:Promise}function P0(n){return n&&Z(n.next)&&Z(n.error)&&Z(n.complete)}function M0(n){return n&&n instanceof di||P0(n)&&_u(n)}function Ff(n){return Z(n?.lift)}function ce(n){return e=>{if(Ff(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(n,e,t,r,i){return new Vf(n,e,t,r,i)}var Vf=class extends di{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(c){try{t(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Io(){return ce((n,e)=>{let t=null;n._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Eo=class extends ne{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ff(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ne;let t=this.getSubject();e.add(this.source.subscribe(ue(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ne.EMPTY)}return e}refCount(){return Io()(this)}};var qE=go(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var st=(()=>{class n extends ne{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Tu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new qE}next(t){yo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){yo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){yo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Pf:(this.currentObservers=null,o.push(t),new Ne(()=>{this.currentObservers=null,ui(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ne;return t.source=this,t}}return n.create=(e,t)=>new Tu(e,t),n})(),Tu=class extends st{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Pf}};var ze=class extends st{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var jf={now(){return(jf.delegate||Date).now()},delegate:void 0};var bu=class extends Ne{constructor(e,t){super()}schedule(e,t=0){return this}};var la={setInterval(n,e,...t){let{delegate:r}=la;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=la;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var wo=class extends bu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return la.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&la.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ui(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var To=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};To.now=jf.now;var bo=class extends To{constructor(e,t=To.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Uf=new bo(wo);var Su=class extends wo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Cu=class extends bo{};var $f=new Cu(Su);var bt=new ne(n=>n.complete());function zE(n){return n&&Z(n.schedule)}function WE(n){return n[n.length-1]}function GE(n){return Z(WE(n))?n.pop():void 0}function yr(n){return zE(WE(n))?n.pop():void 0}function Bf(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function QE(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(c,u)}l((r=r.apply(n,e||[])).next())})}function KE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hi(n){return this instanceof hi?(this.v=n,this):new hi(n)}function YE(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(D){return Promise.resolve(D).then(y,p)}}function c(y,D){r[y]&&(i[y]=function(N){return new Promise(function(R,O){o.push([y,N,R,O])>1||u(y,N)})},D&&(i[y]=D(i[y])))}function u(y,D){try{l(r[y](D))}catch(N){m(o[0][3],N)}}function l(y){y.value instanceof hi?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,D){y(D),o.shift(),o.length&&u(o[0][0],o[0][1])}}function JE(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof KE=="function"?KE(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(c,u){s=n[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(l){o({value:l,done:c})},s)}}var Du=n=>n&&typeof n.length=="number"&&typeof n!="function";function Au(n){return Z(n?.then)}function Ru(n){return Z(n[_o])}function Nu(n){return Symbol.asyncIterator&&Z(n?.[Symbol.asyncIterator])}function Pu(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function x0(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Mu=x0();function xu(n){return Z(n?.[Mu])}function ku(n){return YE(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield hi(t.read());if(i)return yield hi(void 0);yield yield hi(r)}}finally{t.releaseLock()}})}function Ou(n){return Z(n?.getReader)}function Je(n){if(n instanceof ne)return n;if(n!=null){if(Ru(n))return k0(n);if(Du(n))return O0(n);if(Au(n))return L0(n);if(Nu(n))return ZE(n);if(xu(n))return F0(n);if(Ou(n))return V0(n)}throw Pu(n)}function k0(n){return new ne(e=>{let t=n[_o]();if(Z(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function O0(n){return new ne(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function L0(n){return new ne(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Iu)})}function F0(n){return new ne(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function ZE(n){return new ne(e=>{j0(n,e).catch(t=>e.error(t))})}function V0(n){return ZE(ku(n))}function j0(n,e){var t,r,i,o;return QE(this,void 0,void 0,function*(){try{for(t=JE(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function St(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function vr(n,e=0){return ce((t,r)=>{t.subscribe(ue(r,i=>St(r,n,()=>r.next(i),e),()=>St(r,n,()=>r.complete(),e),i=>St(r,n,()=>r.error(i),e)))})}function _r(n,e=0){return ce((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function XE(n,e){return Je(n).pipe(_r(e),vr(e))}function ew(n,e){return Je(n).pipe(_r(e),vr(e))}function tw(n,e){return new ne(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function nw(n,e){return new ne(t=>{let r;return St(t,e,()=>{r=n[Mu](),St(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>Z(r?.return)&&r.return()})}function Lu(n,e){if(!n)throw new Error("Iterable cannot be null");return new ne(t=>{St(t,e,()=>{let r=n[Symbol.asyncIterator]();St(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function rw(n,e){return Lu(ku(n),e)}function iw(n,e){if(n!=null){if(Ru(n))return XE(n,e);if(Du(n))return tw(n,e);if(Au(n))return ew(n,e);if(Nu(n))return Lu(n,e);if(xu(n))return nw(n,e);if(Ou(n))return rw(n,e)}throw Pu(n)}function Oe(n,e){return e?iw(n,e):Je(n)}function K(...n){let e=yr(n);return Oe(n,e)}function So(n,e){let t=Z(n)?n:()=>n,r=i=>i.error(t());return new ne(e?i=>e.schedule(r,0,i):r)}function Hf(n){return!!n&&(n instanceof ne||Z(n.lift)&&Z(n.subscribe))}var On=go(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ie(n,e){return ce((t,r)=>{let i=0;t.subscribe(ue(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:U0}=Array;function $0(n,e){return U0(e)?n(...e):n(e)}function ow(n){return ie(e=>$0(n,e))}var{isArray:B0}=Array,{getPrototypeOf:H0,prototype:q0,keys:z0}=Object;function sw(n){if(n.length===1){let e=n[0];if(B0(e))return{args:e,keys:null};if(W0(e)){let t=z0(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function W0(n){return n&&typeof n=="object"&&H0(n)===q0}function aw(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Fu(...n){let e=yr(n),t=GE(n),{args:r,keys:i}=sw(n);if(r.length===0)return Oe([],e);let o=new ne(G0(r,e,i?s=>aw(i,s):Pt));return t?o.pipe(ow(t)):o}function G0(n,e,t=Pt){return r=>{cw(e,()=>{let{length:i}=n,o=new Array(i),s=i,c=i;for(let u=0;u<i;u++)cw(e,()=>{let l=Oe(n[u],e),h=!1;l.subscribe(ue(r,p=>{o[u]=p,h||(h=!0,c--),c||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function cw(n,e,t){n?St(t,n,e):e()}function uw(n,e,t,r,i,o,s,c){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?D(N):u.push(N),D=N=>{o&&e.next(N),l++;let R=!1;Je(t(N,h++)).subscribe(ue(e,O=>{i?.(O),o?y(O):e.next(O)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let O=u.shift();s?St(e,s,()=>D(O)):D(O)}m()}catch(O){e.error(O)}}))};return n.subscribe(ue(e,y,()=>{p=!0,m()})),()=>{c?.()}}function We(n,e,t=1/0){return Z(e)?We((r,i)=>ie((o,s)=>e(r,o,i,s))(Je(n(r,i))),t):(typeof e=="number"&&(t=e),ce((r,i)=>uw(r,i,n,t)))}function lw(n=1/0){return We(Pt,n)}function dw(){return lw(1)}function Co(...n){return dw()(Oe(n,yr(n)))}function da(n){return new ne(e=>{Je(n()).subscribe(e)})}function pt(n,e){return ce((t,r)=>{let i=0;t.subscribe(ue(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Ir(n){return ce((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ue(t,void 0,void 0,s=>{o=Je(n(s,Ir(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function hw(n,e,t,r,i){return(o,s)=>{let c=t,u=e,l=0;o.subscribe(ue(s,h=>{let p=l++;u=c?n(u,h,p):(c=!0,h),r&&s.next(u)},i&&(()=>{c&&s.next(u),s.complete()})))}}function Do(n,e){return Z(e)?We(n,e,1):We(n,1)}function Er(n){return ce((e,t)=>{let r=!1;e.subscribe(ue(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ln(n){return n<=0?()=>bt:ce((e,t)=>{let r=0;e.subscribe(ue(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Vu(n=K0){return ce((e,t)=>{let r=!1;e.subscribe(ue(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function K0(){return new On}function ha(n){return ce((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Fn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?pt((i,o)=>n(i,o,r)):Pt,Ln(1),t?Er(e):Vu(()=>new On))}function Ao(n){return n<=0?()=>bt:ce((e,t)=>{let r=[];e.subscribe(ue(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function qf(n,e){let t=arguments.length>=2;return r=>r.pipe(n?pt((i,o)=>n(i,o,r)):Pt,Ao(1),t?Er(e):Vu(()=>new On))}function ju(n,e){return ce(hw(n,e,arguments.length>=2,!0))}function Uu(...n){let e=yr(n);return ce((t,r)=>{(e?Co(n,t,e):Co(n,t)).subscribe(r)})}function Ct(n,e){return ce((t,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();t.subscribe(ue(r,u=>{i?.unsubscribe();let l=0,h=o++;Je(n(u,h)).subscribe(i=ue(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,c()}))},()=>{s=!0,c()}))})}function $u(n){return ce((e,t)=>{Je(n).subscribe(ue(t,()=>t.complete(),ua)),!t.closed&&e.subscribe(t)})}function Ze(n,e,t){let r=Z(n)||e||t?{next:n,error:e,complete:t}:n;return r?ce((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(ue(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Pt}function fw(n){let e=z(null);try{return n()}finally{z(e)}}var No=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},np=new No("20.3.15");var j=class extends Error{code;constructor(e,t){super(vi(e,t)),this.code=e}};function Q0(n){return`NG0${Math.abs(n)}`}function vi(n,e){return`${Q0(n)}${e?": "+e:""}`}function pe(n){for(let e in n)if(n[e]===pe)return e;throw Error("")}function wr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(wr).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function rp(n,e){return n?e?`${n} ${e}`:n:e||""}var Y0=pe({__forward_ref__:pe});function Gu(n){return n.__forward_ref__=Gu,n.toString=function(){return wr(this())},n}function Dt(n){return ip(n)?n():n}function ip(n){return typeof n=="function"&&n.hasOwnProperty(Y0)&&n.__forward_ref__===Gu}function B(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ma(n){return J0(n,Ku)}function op(n){return ma(n)!==null}function J0(n,e){return n.hasOwnProperty(e)&&n[e]||null}function Z0(n){let e=n?.[Ku]??null;return e||null}function Wf(n){return n&&n.hasOwnProperty(Hu)?n[Hu]:null}var Ku=pe({\u0275prov:pe}),Hu=pe({\u0275inj:pe}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=B({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function sp(n){return n&&!!n.\u0275providers}var ap=pe({\u0275cmp:pe}),cp=pe({\u0275dir:pe}),up=pe({\u0275pipe:pe}),lp=pe({\u0275mod:pe}),pa=pe({\u0275fac:pe}),_i=pe({__NG_ELEMENT_ID__:pe}),gw=pe({__NG_ENV_ID__:pe});function Qu(n){return typeof n=="string"?n:n==null?"":String(n)}function yw(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Qu(n)}var vw=pe({ngErrorCode:pe}),X0=pe({ngErrorMessage:pe}),eP=pe({ngTokenPath:pe});function dp(n,e){return _w("",-200,e)}function Yu(n,e){throw new j(-201,!1)}function _w(n,e,t){let r=new j(e,n);return r[vw]=e,r[X0]=n,t&&(r[eP]=t),r}function tP(n){return n[vw]}var Gf;function Iw(){return Gf}function Mt(n){let e=Gf;return Gf=n,e}function hp(n,e,t){let r=ma(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Yu(n,"Injector")}var nP={},fi=nP,Kf="__NG_DI_FLAG__",Qf=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=pi(t)||0;try{return this.injector.get(e,r&8?null:fi,r)}catch(i){if(ho(i))return i;throw i}}};function rP(n,e=0){let t=hu();if(t===void 0)throw new j(-203,!1);if(t===null)return hp(n,void 0,e);{let r=iP(e),i=t.retrieve(n,r);if(ho(i)){if(r.optional)return null;throw i}return i}}function te(n,e=0){return(Iw()||rP)(Dt(n),e)}function x(n,e){return te(n,pi(e))}function pi(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function iP(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Yf(n){let e=[];for(let t=0;t<n.length;t++){let r=Dt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let c=r[s],u=oP(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(te(i,o))}else e.push(te(r))}return e}function Ew(n,e){return n[Kf]=e,n.prototype[Kf]=e,n}function oP(n){return n[Kf]}function gi(n,e){let t=n.hasOwnProperty(pa);return t?n[pa]:null}function Ju(n,e){n.forEach(t=>Array.isArray(t)?Ju(t,e):e(t))}function fp(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ya(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var Ii={},mi=[],br=new U(""),pp=new U("",-1),gp=new U(""),ga=class{get(e,t=fi){if(t===fi){let i=_w("",-201);throw i.name="\u0275NotFound",i}return t}};function mp(n){return n[lp]||null}function Sr(n){return n[ap]||null}function yp(n){return n[cp]||null}function ww(n){return n[up]||null}function rn(n){return{\u0275providers:n}}function Tw(...n){return{\u0275providers:vp(!0,n),\u0275fromNgModule:!0}}function vp(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Ju(e,s=>{let c=s;qu(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&bw(i,o),t}function bw(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];_p(i,o=>{e(o,r)})}}function qu(n,e,t,r){if(n=Dt(n),!n)return!1;let i=null,o=Wf(n),s=!o&&Sr(n);if(!o&&!s){let u=n.ngModule;if(o=Wf(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)qu(l,e,t,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let l;try{Ju(o.imports,h=>{qu(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&bw(l,e)}if(!c){let l=gi(i)||(()=>new i);e({provide:i,useFactory:l,deps:mi},i),e({provide:gp,useValue:i,multi:!0},i),e({provide:br,useValue:()=>te(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let l=n;_p(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function _p(n,e){for(let t of n)sp(t)&&(t=t.\u0275providers),Array.isArray(t)?_p(t,e):e(t)}var sP=pe({provide:String,useValue:pe});function Sw(n){return n!==null&&typeof n=="object"&&sP in n}function aP(n){return!!(n&&n.useExisting)}function cP(n){return!!(n&&n.useFactory)}function zu(n){return typeof n=="function"}var va=new U(""),Bu={},mw={},zf;function _a(){return zf===void 0&&(zf=new ga),zf}var Ge=class{},yi=class extends Ge{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Zf(e,s=>this.processProvider(s)),this.records.set(pp,Ro(void 0,this)),i.has("environment")&&this.records.set(Ge,Ro(void 0,this));let o=this.records.get(va);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(gp,mi,{self:!0}))}retrieve(e,t){let r=pi(t)||0;try{return this.get(e,fi,r)}catch(i){if(ho(i))return i;throw i}}destroy(){fa(this),this._destroyed=!0;let e=z(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),z(e)}}onDestroy(e){return fa(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){fa(this);let t=gn(this),r=Mt(void 0),i;try{return e()}finally{gn(t),Mt(r)}}get(e,t=fi,r){if(fa(this),e.hasOwnProperty(gw))return e[gw](this);let i=pi(r),o,s=gn(this),c=Mt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=fP(e)&&ma(e);h&&this.injectableDefInScope(h)?l=Ro(Jf(e),Bu):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?_a():this.parent;return t=i&8&&t===fi?null:t,u.get(e,t)}catch(u){let l=tP(u);throw l===-200||l===-201?new j(l,null):u}finally{Mt(c),gn(s)}}resolveInjectorInitializers(){let e=z(null),t=gn(this),r=Mt(void 0),i;try{let o=this.get(br,mi,{self:!0});for(let s of o)s()}finally{gn(t),Mt(r),z(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(wr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Dt(e);let t=zu(e)?e:Dt(e&&e.provide),r=lP(e);if(!zu(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ro(void 0,Bu,!0),i.factory=()=>Yf(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=z(null);try{if(t.value===mw)throw dp(wr(e));return t.value===Bu&&(t.value=mw,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&hP(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{z(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Dt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Jf(n){let e=ma(n),t=e!==null?e.factory:gi(n);if(t!==null)return t;if(n instanceof U)throw new j(204,!1);if(n instanceof Function)return uP(n);throw new j(204,!1)}function uP(n){if(n.length>0)throw new j(204,!1);let t=Z0(n);return t!==null?()=>t.factory(n):()=>new n}function lP(n){if(Sw(n))return Ro(void 0,n.useValue);{let e=Cw(n);return Ro(e,Bu)}}function Cw(n,e,t){let r;if(zu(n)){let i=Dt(n);return gi(i)||Jf(i)}else if(Sw(n))r=()=>Dt(n.useValue);else if(cP(n))r=()=>n.useFactory(...Yf(n.deps||[]));else if(aP(n))r=(i,o)=>te(Dt(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Dt(n&&(n.useClass||n.provide));if(dP(n))r=()=>new i(...Yf(n.deps));else return gi(i)||Jf(i)}return r}function fa(n){if(n.destroyed)throw new j(205,!1)}function Ro(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function dP(n){return!!n.deps}function hP(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function fP(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Zf(n,e){for(let t of n)Array.isArray(t)?Zf(t,e):t&&sp(t)?Zf(t.\u0275providers,e):e(t)}function Qe(n,e){let t;n instanceof yi?(fa(n),t=n):t=new Qf(n);let r,i=gn(t),o=Mt(void 0);try{return e()}finally{gn(i),Mt(o)}}function Dw(){return Iw()!==void 0||hu()!=null}var on=0,Q=1,Y=2,Xe=3,qt=4,zt=5,Po=6,Mo=7,Le=8,Un=9,$n=10,je=11,xo=12,Ip=13,Ei=14,xt=15,wi=16,Ti=17,bi=18,Ia=19,Ep=20,Vn=21,Zu=22,ko=23,kt=24,Xu=25,Si=26,et=27,Aw=1,wp=6,Cr=7,Ea=8,wa=9,Fe=10;function Bn(n){return Array.isArray(n)&&typeof n[Aw]=="object"}function sn(n){return Array.isArray(n)&&n[Aw]===!0}function Tp(n){return(n.flags&4)!==0}function Dr(n){return n.componentOffset>-1}function el(n){return(n.flags&1)===1}function Ci(n){return!!n.template}function Oo(n){return(n[Y]&512)!==0}function Di(n){return(n[Y]&256)===256}var Rw="svg",Nw="math";function Wt(n){for(;Array.isArray(n);)n=n[on];return n}function Pw(n,e){return Wt(e[n])}function mn(n,e){return Wt(e[n.index])}function Ta(n,e){return n.data[e]}function Mw(n,e){return n[e]}function an(n,e){let t=e[n];return Bn(t)?t:t[on]}function tl(n){return(n[Y]&128)===128}function xw(n){return sn(n[Xe])}function yn(n,e){return e==null?null:n[e]}function bp(n){n[Ti]=0}function Sp(n){n[Y]&1024||(n[Y]|=1024,tl(n)&&Lo(n))}function kw(n,e){for(;n>0;)e=e[Ei],n--;return e}function ba(n){return!!(n[Y]&9216||n[kt]?.dirty)}function nl(n){n[$n].changeDetectionScheduler?.notify(8),n[Y]&64&&(n[Y]|=1024),ba(n)&&Lo(n)}function Lo(n){n[$n].changeDetectionScheduler?.notify(0);let e=Tr(n);for(;e!==null&&!(e[Y]&8192||(e[Y]|=8192,!tl(e)));)e=Tr(e)}function Cp(n,e){if(Di(n))throw new j(911,!1);n[Vn]===null&&(n[Vn]=[]),n[Vn].push(e)}function Ow(n,e){if(n[Vn]===null)return;let t=n[Vn].indexOf(e);t!==-1&&n[Vn].splice(t,1)}function Tr(n){let e=n[Xe];return sn(e)?e[Xe]:e}function Lw(n){return n[Mo]??=[]}function Fw(n){return n.cleanup??=[]}var ae={lFrame:Yw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Xf=!1;function Vw(){return ae.lFrame.elementDepthCount}function jw(){ae.lFrame.elementDepthCount++}function Dp(){ae.lFrame.elementDepthCount--}function Uw(){return ae.bindingsEnabled}function $w(){return ae.skipHydrationRootTNode!==null}function Ap(n){return ae.skipHydrationRootTNode===n}function Rp(){ae.skipHydrationRootTNode=null}function we(){return ae.lFrame.lView}function cn(){return ae.lFrame.tView}function Pe(n){return ae.lFrame.contextLView=n,n[Le]}function Me(n){return ae.lFrame.contextLView=null,n}function Gt(){let n=Np();for(;n!==null&&n.type===64;)n=n.parent;return n}function Np(){return ae.lFrame.currentTNode}function Bw(){let n=ae.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Fo(n,e){let t=ae.lFrame;t.currentTNode=n,t.isParent=e}function Pp(){return ae.lFrame.isParent}function Hw(){ae.lFrame.isParent=!1}function qw(){return ae.lFrame.contextLView}function Mp(){return Xf}function rl(n){let e=Xf;return Xf=n,e}function zw(n){return ae.lFrame.bindingIndex=n}function Ai(){return ae.lFrame.bindingIndex++}function Ww(){return ae.lFrame.inI18n}function Gw(n,e){let t=ae.lFrame;t.bindingIndex=t.bindingRootIndex=n,il(e)}function Kw(){return ae.lFrame.currentDirectiveIndex}function il(n){ae.lFrame.currentDirectiveIndex=n}function xp(n){ae.lFrame.currentQueryIndex=n}function pP(n){let e=n[Q];return e.type===2?e.declTNode:e.type===1?n[zt]:null}function kp(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=pP(o),i===null||(o=o[Ei],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ae.lFrame=Qw();return r.currentTNode=e,r.lView=n,!0}function ol(n){let e=Qw(),t=n[Q];ae.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Qw(){let n=ae.lFrame,e=n===null?null:n.child;return e===null?Yw(n):e}function Yw(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Jw(){let n=ae.lFrame;return ae.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Op=Jw;function sl(){let n=Jw();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Zw(n){return(ae.lFrame.contextLView=kw(n,ae.lFrame.contextLView))[Le]}function Sa(){return ae.lFrame.selectedIndex}function Ar(n){ae.lFrame.selectedIndex=n}function Lp(){let n=ae.lFrame;return Ta(n.tView,n.selectedIndex)}function Xw(){return ae.lFrame.currentNamespace}var eT=!0;function al(){return eT}function cl(n){eT=n}function ep(n,e=null,t=null,r){let i=Fp(n,e,t,r);return i.resolveInjectorInitializers(),i}function Fp(n,e=null,t=null,r,i=new Set){let o=[t||mi,Tw(n)];return r=r||(typeof n=="object"?void 0:wr(n)),new yi(o,e||_a(),r||null,i)}var Ke=class n{static THROW_IF_NOT_FOUND=fi;static NULL=new ga;static create(e,t){if(Array.isArray(e))return ep({name:""},t,e,"");{let r=e.name??"";return ep({name:r},e.parent,e.providers,r)}}static \u0275prov=B({token:n,providedIn:"any",factory:()=>te(pp)});static __NG_ELEMENT_ID__=-1},at=new U(""),Hn=(()=>{class n{static __NG_ELEMENT_ID__=gP;static __NG_ENV_ID__=t=>t}return n})(),Wu=class extends Hn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Di(this._lView)}onDestroy(e){let t=this._lView;return Cp(t,e),()=>Ow(t,e)}};function gP(){return new Wu(we())}var Ht=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Kt=new U("",{providedIn:"root",factory:()=>{let n=x(Ge),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Ht),e.handleError(t))}}}),tT={provide:br,useValue:()=>void x(Ht),multi:!0};function Se(n,e){let[t,r,i]=Rf(n,e?.equal),o=t,s=o[Tt];return o.set=r,o.update=i,o.asReadonly=Vp.bind(o),o}function Vp(){let n=this[Tt];if(n.readonlyFn===void 0){let e=()=>this();e[Tt]=n,n.readonlyFn=e}return n.readonlyFn}var jn=class{},Ca=new U("",{providedIn:"root",factory:()=>!1});var jp=new U(""),Up=new U(""),vn=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ze(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ne(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}return n})(),Ri=(()=>{class n{internalPendingTasks=x(vn);scheduler=x(jn);errorHandler=x(Kt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}return n})();function Vo(...n){}var ul=(()=>{class n{static \u0275prov=B({token:n,providedIn:"root",factory:()=>new tp})}return n})(),tp=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function ka(n){return{toString:n}.toString()}var ll="__parameters__";function CP(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function DP(n,e,t){return ka(()=>{let r=CP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return c.annotation=s,c;function c(u,l,h){let p=u.hasOwnProperty(ll)?u[ll]:Object.defineProperty(u,ll,{value:[]})[ll];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Ot=Ew(DP("Optional"),8);function AP(n){return typeof n=="function"}var gl=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function MT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var pg=(()=>{let n=()=>xT;return n.ngInherit=!0,n})();function xT(n){return n.type.prototype.ngOnChanges&&(n.setInput=NP),RP}function RP(){let n=OT(this),e=n?.current;if(e){let t=n.previous;if(t===Ii)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function NP(n,e,t,r,i){let o=this.declaredInputs[r],s=OT(n)||PP(n,{previous:Ii,current:null}),c=s.current||(s.current={}),u=s.previous,l=u[o];c[o]=new gl(l&&l.currentValue,t,u===Ii),MT(n,e,i,t)}var kT="__ngSimpleChanges__";function OT(n){return n[kT]||null}function PP(n,e){return n[kT]=e}var nT=[];var Te=function(n,e=null,t){for(let r=0;r<nT.length;r++){let i=nT[r];i(n,e,t)}};function MP(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=xT(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function xP(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function dl(n,e,t){LT(n,e,3,t)}function hl(n,e,t,r){(n[Y]&3)===t&&LT(n,e,t,r)}function $p(n,e){let t=n[Y];(t&3)===e&&(t&=16383,t+=1,n[Y]=t)}function LT(n,e,t,r){let i=r!==void 0?n[Ti]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(n[Ti]+=65536),(c<o||o==-1)&&(kP(n,t,e,u),n[Ti]=(n[Ti]&4294901760)+u+2),u++}function rT(n,e){Te(4,n,e);let t=z(null);try{e.call(n)}finally{z(t),Te(5,n,e)}}function kP(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],c=n[s];i?n[Y]>>14<n[Ti]>>16&&(n[Y]&3)===e&&(n[Y]+=16384,rT(c,o)):rT(c,o)}var Uo=-1,Ra=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function OP(n){return(n.flags&8)!==0}function LP(n){return(n.flags&16)!==0}function FP(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],c=t[r++];n.setAttribute(e,s,c,o)}else{let o=i,s=t[++r];jP(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function VP(n){return n===3||n===4||n===6}function jP(n){return n.charCodeAt(0)===64}function Nl(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?iT(n,t,i,null,e[++r]):iT(n,t,i,null,null))}}return n}function iT(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let c=n[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<n.length;){let c=n[o];if(typeof c=="number")break;if(c===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function FT(n){return n!==Uo}function ml(n){return n&32767}function UP(n){return n>>16}function yl(n,e){let t=UP(n),r=e;for(;t>0;)r=r[Ei],t--;return r}var Wp=!0;function oT(n){let e=Wp;return Wp=n,e}var $P=256,VT=$P-1,jT=5,BP=0,_n={};function HP(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(_i)&&(r=t[_i]),r==null&&(r=t[_i]=BP++);let i=r&VT,o=1<<i;e.data[n+(i>>jT)]|=o}function UT(n,e){let t=$T(n,e);if(t!==-1)return t;let r=e[Q];r.firstCreatePass&&(n.injectorIndex=e.length,Bp(r.data,n),Bp(e,null),Bp(r.blueprint,null));let i=gg(n,e),o=n.injectorIndex;if(FT(i)){let s=ml(i),c=yl(i,e),u=c[Q].data;for(let l=0;l<8;l++)e[o+l]=c[s+l]|u[s+l]}return e[o+8]=i,o}function Bp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function $T(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function gg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=WT(i),r===null)return Uo;if(t++,i=i[Ei],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Uo}function qP(n,e,t){HP(n,e,t)}function BT(n,e,t){if(t&8||n!==void 0)return n;Yu(e,"NodeInjector")}function HT(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Un],o=Mt(void 0);try{return i?i.get(e,r,t&8):hp(e,r,t&8)}finally{Mt(o)}}return BT(r,e,t)}function qT(n,e,t,r=0,i){if(n!==null){if(e[Y]&2048&&!(r&2)){let s=QP(n,e,t,r,_n);if(s!==_n)return s}let o=zT(n,e,t,r,_n);if(o!==_n)return o}return HT(e,t,r,i)}function zT(n,e,t,r,i){let o=GP(t);if(typeof o=="function"){if(!kp(e,n,r))return r&1?BT(i,t,r):HT(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Yu(t);else return s}finally{Op()}}else if(typeof o=="number"){let s=null,c=$T(n,e),u=Uo,l=r&1?e[xt][zt]:null;for((c===-1||r&4)&&(u=c===-1?gg(n,e):e[c+8],u===Uo||!aT(r,!1)?c=-1:(s=e[Q],c=ml(u),e=yl(u,e)));c!==-1;){let h=e[Q];if(sT(o,c,h.data)){let p=zP(c,e,t,s,r,l);if(p!==_n)return p}u=e[c+8],u!==Uo&&aT(r,e[Q].data[c+8]===l)&&sT(o,c,e)?(s=h,c=ml(u),e=yl(u,e)):c=-1}}return i}function zP(n,e,t,r,i,o){let s=e[Q],c=s.data[n+8],u=r==null?Dr(c)&&Wp:r!=s&&(c.type&3)!==0,l=i&1&&o===c,h=WP(c,s,t,u,l);return h!==null?Gp(e,s,h,c,i):_n}function WP(n,e,t,r,i){let o=n.providerIndexes,s=e.data,c=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?c:c+h,m=i?c+h:l;for(let y=p;y<m;y++){let D=s[y];if(y<u&&t===D||y>=u&&D.type===t)return y}if(i){let y=s[u];if(y&&Ci(y)&&y.type===t)return u}return null}function Gp(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Ra){let c=o;if(c.resolving){let y=yw(s[t]);throw dp(y)}let u=oT(c.canSeeViewProviders);c.resolving=!0;let l=s[t].type||s[t],h,p=c.injectImpl?Mt(c.injectImpl):null,m=kp(n,r,0);try{o=n[t]=c.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&MP(t,s[t],e)}finally{p!==null&&Mt(p),oT(u),c.resolving=!1,Op()}}return o}function GP(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(_i)?n[_i]:void 0;return typeof e=="number"?e>=0?e&VT:KP:e}function sT(n,e,t){let r=1<<n;return!!(t[e+(n>>jT)]&r)}function aT(n,e){return!(n&2)&&!(n&1&&e)}var Ni=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return qT(this._tNode,this._lView,e,pi(r),t)}};function KP(){return new Ni(Gt(),we())}function Pl(n){return ka(()=>{let e=n.prototype.constructor,t=e[pa]||Kp(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[pa]||Kp(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Kp(n){return ip(n)?()=>{let e=Kp(Dt(n));return e&&e()}:gi(n)}function QP(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Y]&2048&&!Oo(s);){let c=zT(o,s,t,r|2,_n);if(c!==_n)return c;let u=o.parent;if(!u){let l=s[Ep];if(l){let h=l.get(t,_n,r);if(h!==_n)return h}u=WT(s),s=s[Ei]}o=u}return i}function WT(n){let e=n[Q],t=e.type;return t===2?e.declTNode:t===1?n[zt]:null}function YP(){return mg(Gt(),we())}function mg(n,e){return new GT(mn(n,e))}var GT=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=YP}return n})();function KT(n){return(n.flags&128)===128}var yg=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(yg||{}),QT=new Map,JP=0;function ZP(){return JP++}function XP(n){QT.set(n[Ia],n)}function Qp(n){QT.delete(n[Ia])}var cT="__ngContext__";function $o(n,e){Bn(e)?(n[cT]=e[Ia],XP(e)):n[cT]=e}function YT(n){return ZT(n[xo])}function JT(n){return ZT(n[qt])}function ZT(n){for(;n!==null&&!sn(n);)n=n[qt];return n}var Yp;function vg(n){Yp=n}function XT(){if(Yp!==void 0)return Yp;if(typeof document<"u")return document;throw new j(210,!1)}var Ml=new U("",{providedIn:"root",factory:()=>eM}),eM="ng",xl=new U(""),ki=new U("",{providedIn:"platform",factory:()=>"unknown"});var kl=new U("",{providedIn:"root",factory:()=>XT().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var tM="h",nM="b";var eb="r";var tb="di";var nb=!1,rb=new U("",{providedIn:"root",factory:()=>nb});var rM=(n,e,t,r)=>{};function iM(n,e,t,r){rM(n,e,t,r)}function _g(n){return(n.flags&32)===32}var oM=()=>null;function ib(n,e,t=!1){return oM(n,e,t)}function ob(n,e){let t=n.contentQueries;if(t!==null){let r=z(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let c=n.data[s];xp(o),c.contentQueries(2,e[s],s)}}}finally{z(r)}}}function Jp(n,e,t){xp(0);let r=z(null);try{e(n,t)}finally{z(r)}}function sb(n,e,t){if(Tp(e)){let r=z(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=n.data[s];if(c.contentQueries){let u=t[s];c.contentQueries(1,u,s)}}}finally{z(r)}}}var qn=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(qn||{});function sM(n,e){return n.createText(e)}function aM(n,e,t){n.setValue(e,t)}function ab(n,e,t){return n.createElement(e,t)}function vl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function cb(n,e,t){n.appendChild(e,t)}function uT(n,e,t,r,i){r!==null?vl(n,e,t,r,i):cb(n,e,t)}function ub(n,e,t,r){n.removeChild(null,e,t,r)}function cM(n,e,t){n.setAttribute(e,"style",t)}function uM(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function lb(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&FP(n,e,r),i!==null&&uM(n,e,i),o!==null&&cM(n,e,o)}function db(n){return n instanceof Function?n():n}function lM(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var hb="ng-template";function dM(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&lM(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Ig(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Ig(n){return n.type===4&&n.value!==hb}function hM(n,e,t){let r=n.type===4&&!t?hb:n.value;return e===r}function fM(n,e,t){let r=4,i=n.attrs,o=i!==null?mM(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!un(r)&&!un(u))return!1;if(s&&un(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!hM(n,u,t)||u===""&&e.length===1){if(un(r))return!1;s=!0}}else if(r&8){if(i===null||!dM(n,i,u,t)){if(un(r))return!1;s=!0}}else{let l=e[++c],h=pM(u,i,Ig(n),t);if(h===-1){if(un(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(un(r))return!1;s=!0}}}}return un(r)||s}function un(n){return(n&1)===0}function pM(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return yM(e,n)}function gM(n,e,t=!1){for(let r=0;r<e.length;r++)if(fM(n,e[r],t))return!0;return!1}function mM(n){for(let e=0;e<n.length;e++){let t=n[e];if(VP(t))return e}return n.length}function yM(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function lT(n,e){return n?":not("+e.trim()+")":e}function vM(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let c=n[++t];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!un(s)&&(e+=lT(o,i),i=""),r=s,o=o||!un(r);t++}return i!==""&&(e+=lT(o,i)),e}function _M(n){return n.map(vM).join(",")}function IM(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!un(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Rr={};function Eg(n,e,t,r,i,o,s,c,u,l,h){let p=et+r,m=p+i,y=EM(p,m),D=typeof l=="function"?l():l;return y[Q]={type:n,blueprint:y,template:t,queries:null,viewQuery:c,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:D,incompleteFirstPass:!1,ssrId:h}}function EM(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Rr);return t}function wM(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Eg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function wg(n,e,t,r,i,o,s,c,u,l,h){let p=e.blueprint.slice();return p[on]=i,p[Y]=r|4|128|8|64|1024,(l!==null||n&&n[Y]&2048)&&(p[Y]|=2048),bp(p),p[Xe]=p[Ei]=n,p[Le]=t,p[$n]=s||n&&n[$n],p[je]=c||n&&n[je],p[Un]=u||n&&n[Un]||null,p[zt]=o,p[Ia]=ZP(),p[Po]=h,p[Ep]=l,p[xt]=e.type==2?n[xt]:p,p}function TM(n,e,t){let r=mn(e,n),i=wM(t),o=n[$n].rendererFactory,s=Tg(n,wg(n,i,null,fb(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function fb(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function pb(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Tg(n,e){return n[xo]?n[Ip][qt]=e:n[xo]=e,n[Ip]=e,e}function De(n=1){gb(cn(),we(),Sa()+n,!1)}function gb(n,e,t,r){if(!r)if((e[Y]&3)===3){let o=n.preOrderCheckHooks;o!==null&&dl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&hl(e,o,0,t)}Ar(t)}var Ol=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Ol||{});function Zp(n,e,t,r){let i=z(null);try{let[o,s,c]=n.inputs[t],u=null;(s&Ol.SignalBased)!==0&&(u=e[o][Tt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):MT(e,u,o,r)}finally{z(i)}}var Oi=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Oi||{}),bM;function bg(n,e){return bM(n,e)}var Pi=new Set,Sg=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Sg||{}),Oa=new U(""),dT=new Set;function Nr(n){dT.has(n)||(dT.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var mb=!1,Xp=class extends st{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Dw()&&(this.destroyRef=x(Hn,{optional:!0})??void 0,this.pendingTasks=x(vn,{optional:!0})??void 0)}emit(e){let t=z(null);try{super.next(e)}finally{z(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof Ne&&e.add(c),c}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Et=Xp;function yb(n){let e,t;function r(){n=Vo;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function hT(n){return queueMicrotask(()=>n()),()=>{n=Vo}}var Cg="isAngularZone",_l=Cg+"_ID",SM=0,ve=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Et(!1);onMicrotaskEmpty=new Et(!1);onStable=new Et(!1);onError=new Et(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=mb}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,AM(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Cg)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new j(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,CM,Vo,Vo);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},CM={};function Dg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function DM(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){yb(()=>{n.callbackScheduled=!1,eg(n),n.isCheckStableRunning=!0,Dg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),eg(n)}function AM(n){let e=()=>{DM(n)},t=SM++;n._inner=n._inner.fork({name:"angular",properties:{[Cg]:!0,[_l]:t,[_l+t]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(RM(u))return r.invokeTask(o,s,c,u);try{return fT(n),r.invokeTask(o,s,c,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),pT(n)}},onInvoke:(r,i,o,s,c,u,l)=>{try{return fT(n),r.invoke(o,s,c,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!NM(u)&&e(),pT(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,eg(n),Dg(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function eg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function fT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function pT(n){n._nesting--,Dg(n)}var Il=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Et;onMicrotaskEmpty=new Et;onStable=new Et;onError=new Et;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function RM(n){return vb(n,"__ignore_ng_zone__")}function NM(n){return vb(n,"__scheduler_tick__")}function vb(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var _b=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}return n})();var Ib=new U("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function Eb(n,e,t){let r=n.get(Ib);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function PM(n,e){let t=n.get(Ib);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)t.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function MM(n,e){for(let[t,r]of e)Eb(n,r.animateFns)}function gT(n,e,t,r){let i=n?.[Si]?.enter;e!==null&&i&&i.has(t.index)&&MM(r,i)}function jo(n,e,t,r,i,o,s,c){if(i!=null){let u,l=!1;sn(i)?u=i:Bn(i)&&(l=!0,i=i[on]);let h=Wt(i);n===0&&r!==null?(gT(c,r,o,t),s==null?cb(e,r,h):vl(e,r,h,s||null,!0)):n===1&&r!==null?(gT(c,r,o,t),vl(e,r,h,s||null,!0)):n===2?mT(c,o,t,p=>{ub(e,h,l,p)}):n===3&&mT(c,o,t,()=>{e.destroyNode(h)}),u!=null&&zM(e,n,t,u,o,r,s)}}function xM(n,e){wb(n,e),e[on]=null,e[zt]=null}function kM(n,e,t,r,i,o){r[on]=i,r[zt]=e,Fl(n,r,t,1,i,o)}function wb(n,e){e[$n].changeDetectionScheduler?.notify(9),Fl(n,e,e[je],2,null,null)}function OM(n){let e=n[xo];if(!e)return Hp(n[Q],n);for(;e;){let t=null;if(Bn(e))t=e[xo];else{let r=e[Fe];r&&(t=r)}if(!t){for(;e&&!e[qt]&&e!==n;)Bn(e)&&Hp(e[Q],e),e=e[Xe];e===null&&(e=n),Bn(e)&&Hp(e[Q],e),t=e&&e[qt]}e=t}}function Ag(n,e){let t=n[wa],r=t.indexOf(e);t.splice(r,1)}function Ll(n,e){if(Di(e))return;let t=e[je];t.destroyNode&&Fl(n,e,t,3,null,null),OM(e)}function Hp(n,e){if(Di(e))return;let t=z(null);try{e[Y]&=-129,e[Y]|=256,e[kt]&&ca(e[kt]),VM(n,e),FM(n,e),e[Q].type===1&&e[je].destroy();let r=e[wi];if(r!==null&&sn(e[Xe])){r!==e[Xe]&&Ag(r,e);let i=e[bi];i!==null&&i.detachView(n)}Qp(e)}finally{z(t)}}function mT(n,e,t,r){let i=n?.[Si];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Pi.add(n),Eb(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),c=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();c.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(c),LM(n,r)}else n&&Pi.delete(n),r(!1)},i)}function LM(n,e){let t=n[Si]?.running;if(t){t.then(()=>{n[Si].running=void 0,Pi.delete(n),e(!0)});return}e(!1)}function FM(n,e){let t=n.cleanup,r=e[Mo];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let c=t[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[t[s+1]];t[s].call(c)}r!==null&&(e[Mo]=null);let i=e[Vn];if(i!==null){e[Vn]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[ko];if(o!==null){e[ko]=null;for(let s of o)s.destroy()}}function VM(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ra)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];Te(4,c,u);try{u.call(c)}finally{Te(5,c,u)}}else{Te(4,i,o);try{o.call(i)}finally{Te(5,i,o)}}}}}function jM(n,e,t){return UM(n,e.parent,t)}function UM(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[on];if(Dr(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===qn.None||i===qn.Emulated)return null}return mn(r,t)}function $M(n,e,t){return HM(n,e,t)}function BM(n,e,t){return n.type&40?mn(n,t):null}var HM=BM,yT;function Rg(n,e,t,r){let i=jM(n,r,e),o=e[je],s=r.parent||e[zt],c=$M(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)uT(o,i,t[u],c,!1);else uT(o,i,t,c,!1);yT!==void 0&&yT(o,r,e,t,i)}function Da(n,e){if(e!==null){let t=e.type;if(t&3)return mn(e,n);if(t&4)return tg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Da(n,r);{let i=n[e.index];return sn(i)?tg(-1,i):Wt(i)}}else{if(t&128)return Da(n,e.next);if(t&32)return bg(e,n)()||Wt(n[e.index]);{let r=Tb(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Tr(n[xt]);return Da(i,r)}else return Da(n,e.next)}}}return null}function Tb(n,e){if(e!==null){let r=n[xt][zt],i=e.projection;return r.projection[i]}return null}function tg(n,e){let t=Fe+n+1;if(t<e.length){let r=e[t],i=r[Q].firstChild;if(i!==null)return Da(r,i)}return e[Cr]}function Ng(n,e,t,r,i,o,s){for(;t!=null;){let c=r[Un];if(t.type===128){t=t.next;continue}let u=r[t.index],l=t.type;if(s&&e===0&&(u&&$o(Wt(u),r),t.flags|=2),!_g(t))if(l&8)Ng(n,e,t.child,r,i,o,!1),jo(e,n,c,i,u,t,o,r);else if(l&32){let h=bg(t,r),p;for(;p=h();)jo(e,n,c,i,p,t,o,r);jo(e,n,c,i,u,t,o,r)}else l&16?qM(n,e,r,t,i,o):jo(e,n,c,i,u,t,o,r);t=s?t.projectionNext:t.next}}function Fl(n,e,t,r,i,o){Ng(t,r,n.firstChild,e,i,o,!1)}function qM(n,e,t,r,i,o){let s=t[xt],u=s[zt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];jo(e,n,t[Un],i,h,r,o,t)}else{let l=u,h=s[Xe];KT(r)&&(l.flags|=128),Ng(n,e,l,h,i,o,!0)}}function zM(n,e,t,r,i,o,s){let c=r[Cr],u=Wt(r);c!==u&&jo(e,n,t,o,c,i,s);for(let l=Fe;l<r.length;l++){let h=r[l];Fl(h[Q],h,n,e,o,c)}}function bb(n,e,t,r,i){let o=Sa(),s=r&2;try{Ar(-1),s&&e.length>et&&gb(n,e,et,!1),Te(s?2:0,i,t),t(r,i)}finally{Ar(o),Te(s?3:1,i,t)}}function Sb(n,e,t){ZM(n,e,t),(t.flags&64)===64&&XM(n,e,t)}function Pg(n,e,t=mn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?t(e,n):n[s];n[i++]=c}}}function WM(n,e,t,r){let o=r.get(rb,nb)||t===qn.ShadowDom,s=n.selectRootElement(e,o);return GM(s),s}function GM(n){KM(n)}var KM=()=>null;function QM(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function YM(n,e,t,r,i,o){let s=e[Q];if(Mg(n,s,e,t,r)){Dr(n)&&JM(e,n.index);return}n.type&3&&(t=QM(t)),Cb(n,e,t,r,i,o)}function Cb(n,e,t,r,i,o){if(n.type&3){let s=mn(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function JM(n,e){let t=an(e,n);t[Y]&16||(t[Y]|=64)}function ZM(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Dr(t)&&TM(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||UT(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let c=n.data[s],u=Gp(e,n,s,t);if($o(u,e),o!==null&&nx(e,s-r,u,c,t,o),Ci(c)){let l=an(t.index,e);l[Le]=Gp(e,n,s,t)}}}function XM(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=Kw();try{Ar(o);for(let c=r;c<i;c++){let u=n.data[c],l=e[c];il(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&ex(u,l)}}finally{Ar(-1),il(s)}}function ex(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function tx(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];gM(e,o.selectors,!1)&&(r??=[],Ci(o)?r.unshift(o):r.push(o))}return r}function nx(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1];Zp(r,t,u,l)}}function Db(n,e,t,r,i){let o=et+t,s=e[Q],c=i(s,e,n,r,t);e[o]=c,Fo(n,!0);let u=n.type===2;return u?(lb(e[je],c,n),(Vw()===0||el(n))&&$o(c,e),jw()):$o(c,e),al()&&(!u||!_g(n))&&Rg(s,e,c,n),n}function Ab(n){let e=n;return Pp()?Hw():(e=e.parent,Fo(e,!1)),e}function rx(n,e){let t=n[Un];if(!t)return;let r;try{r=t.get(Kt,null)}catch{r=null}r?.(e)}function Mg(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Zp(p,t[l],h,i),c=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];Zp(h,l,r,i),c=!0}return c}function ix(n,e){let t=an(e,n),r=t[Q];ox(r,t);let i=t[on];i!==null&&t[Po]===null&&(t[Po]=ib(i,t[Un])),Te(18),xg(r,t,t[Le]),Te(19,t[Le])}function ox(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function xg(n,e,t){ol(e);try{let r=n.viewQuery;r!==null&&Jp(1,r,t);let i=n.template;i!==null&&bb(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[bi]?.finishViewCreation(n),n.staticContentQueries&&ob(n,e),n.staticViewQueries&&Jp(2,n.viewQuery,t);let o=n.components;o!==null&&sx(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Y]&=-5,sl()}}function sx(n,e){for(let t=0;t<e.length;t++)ix(n,e[t])}function kg(n,e,t,r){let i=z(null);try{let o=e.tView,c=n[Y]&4096?4096:16,u=wg(n,o,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[wi]=l;let h=n[bi];return h!==null&&(u[bi]=h.createEmbeddedView(o)),xg(o,u,t),u}finally{z(i)}}function Na(n,e){return!e||e.firstChild===null||KT(n)}function Pa(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Wt(o)),sn(o)&&Rb(o,r);let s=t.type;if(s&8)Pa(n,e,t.child,r);else if(s&32){let c=bg(t,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=Tb(e,t);if(Array.isArray(c))r.push(...c);else{let u=Tr(e[xt]);Pa(u[Q],u,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function Rb(n,e){for(let t=Fe;t<n.length;t++){let r=n[t],i=r[Q].firstChild;i!==null&&Pa(r[Q],r,i,e)}n[Cr]!==n[on]&&e.push(n[Cr])}function Nb(n){if(n[Xu]!==null){for(let e of n[Xu])e.impl.addSequence(e);n[Xu].length=0}}var Pb=[];function ax(n){return n[kt]??cx(n)}function cx(n){let e=Pb.pop()??Object.create(lx);return e.lView=n,e}function ux(n){n.lView[kt]!==n&&(n.lView=null,Pb.push(n))}var lx=_e(F({},ia),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Lo(n.lView)},consumerOnSignalRead(){this.lView[kt]=this}});function dx(n){let e=n[kt]??Object.create(hx);return e.lView=n,e}var hx=_e(F({},ia),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Tr(n.lView);for(;e&&!Mb(e[Q]);)e=Tr(e);e&&Sp(e)},consumerOnSignalRead(){this.lView[kt]=this}});function Mb(n){return n.type!==2}function xb(n){if(n[ko]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[ko])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Y]&8192)}}var fx=100;function kb(n,e=0){let r=n[$n].rendererFactory,i=!1;i||r.begin?.();try{px(n,e)}finally{i||r.end?.()}}function px(n,e){let t=Mp();try{rl(!0),ng(n,e);let r=0;for(;ba(n);){if(r===fx)throw new j(103,!1);r++,ng(n,1)}}finally{rl(t)}}function gx(n,e,t,r){if(Di(e))return;let i=e[Y],o=!1,s=!1;ol(e);let c=!0,u=null,l=null;o||(Mb(n)?(l=ax(e),u=sa(l)):gu()===null?(c=!1,l=dx(e),u=sa(l)):e[kt]&&(ca(e[kt]),e[kt]=null));try{bp(e),zw(n.bindingStartIndex),t!==null&&bb(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&dl(e,y,null)}else{let y=n.preOrderHooks;y!==null&&hl(e,y,0,null),$p(e,0)}if(s||mx(e),xb(e),Ob(e,0),n.contentQueries!==null&&ob(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&dl(e,y)}else{let y=n.contentHooks;y!==null&&hl(e,y,1),$p(e,1)}vx(n,e);let p=n.components;p!==null&&Fb(e,p,0);let m=n.viewQuery;if(m!==null&&Jp(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&dl(e,y)}else{let y=n.viewHooks;y!==null&&hl(e,y,2),$p(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Zu]){for(let y of e[Zu])y();e[Zu]=null}o||(Nb(e),e[Y]&=-73)}catch(h){throw o||Lo(e),h}finally{l!==null&&(mu(l,u),c&&ux(l)),sl()}}function Ob(n,e){for(let t=YT(n);t!==null;t=JT(t))for(let r=Fe;r<t.length;r++){let i=t[r];Lb(i,e)}}function mx(n){for(let e=YT(n);e!==null;e=JT(e)){if(!(e[Y]&2))continue;let t=e[wa];for(let r=0;r<t.length;r++){let i=t[r];Sp(i)}}}function yx(n,e,t){Te(18);let r=an(e,n);Lb(r,t),Te(19,r[Le])}function Lb(n,e){tl(n)&&ng(n,e)}function ng(n,e){let r=n[Q],i=n[Y],o=n[kt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&aa(o)),s||=!1,o&&(o.dirty=!1),n[Y]&=-9217,s)gx(r,n,r.template,n[Le]);else if(i&8192){let c=z(null);try{xb(n),Ob(n,1);let u=r.components;u!==null&&Fb(n,u,1),Nb(n)}finally{z(c)}}}function Fb(n,e,t){for(let r=0;r<e.length;r++)yx(n,e[r],t)}function vx(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ar(~i);else{let o=i,s=t[++r],c=t[++r];Gw(s,o);let u=e[o];Te(24,u),c(2,u),Te(25,u)}}}finally{Ar(-1)}}function Og(n,e){let t=Mp()?64:1088;for(n[$n].changeDetectionScheduler?.notify(e);n;){n[Y]|=t;let r=Tr(n);if(Oo(n)&&!r)return n;n=r}return null}function Vb(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function jb(n,e){let t=Fe+e;if(t<n.length)return n[t]}function Vl(n,e,t,r=!0){let i=e[Q];if(_x(i,e,n,t),r){let s=tg(t,n),c=e[je],u=c.parentNode(n[Cr]);u!==null&&kM(i,n[zt],c,e,u,s)}let o=e[Po];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Ub(n,e){let t=Ma(n,e);return t!==void 0&&Ll(t[Q],t),t}function Ma(n,e){if(n.length<=Fe)return;let t=Fe+e,r=n[t];if(r){let i=r[wi];i!==null&&i!==n&&Ag(i,r),e>0&&(n[t-1][qt]=r[qt]);let o=ya(n,Fe+e);xM(r[Q],r);let s=o[bi];s!==null&&s.detachView(o[Q]),r[Xe]=null,r[qt]=null,r[Y]&=-129}return r}function _x(n,e,t,r){let i=Fe+r,o=t.length;r>0&&(t[i-1][qt]=e),r<o-Fe?(e[qt]=t[i],fp(t,Fe+r,e)):(t.push(e),e[qt]=null),e[Xe]=t;let s=e[wi];s!==null&&t!==s&&$b(s,e);let c=e[bi];c!==null&&c.insertView(n),nl(e),e[Y]|=128}function $b(n,e){let t=n[wa],r=e[Xe];if(Bn(r))n[Y]|=2;else{let i=r[Xe][xt];e[xt]!==i&&(n[Y]|=2)}t===null?n[wa]=[e]:t.push(e)}var Mi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Q];return Pa(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Le]}set context(e){this._lView[Le]=e}get destroyed(){return Di(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Xe];if(sn(e)){let t=e[Ea],r=t?t.indexOf(this):-1;r>-1&&(Ma(e,r),ya(t,r))}this._attachedToViewContainer=!1}Ll(this._lView[Q],this._lView)}onDestroy(e){Cp(this._lView,e)}markForCheck(){Og(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Y]&=-129}reattach(){nl(this._lView),this._lView[Y]|=128}detectChanges(){this._lView[Y]|=1024,kb(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Oo(this._lView),t=this._lView[wi];t!==null&&!e&&Ag(t,this._lView),wb(this._lView[Q],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let t=Oo(this._lView),r=this._lView[wi];r!==null&&!t&&$b(r,this._lView),nl(this._lView)}};function jl(n,e,t,r,i){let o=n.data[e];if(o===null)o=Ix(n,e,t,r,i),Ww()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=Bw();o.injectorIndex=s===null?-1:s.injectorIndex}return Fo(o,!0),o}function Ix(n,e,t,r,i){let o=Np(),s=Pp(),c=s?o:o&&o.parent,u=n.data[e]=wx(n,c,t,e,r,i);return Ex(n,u,o,s),u}function Ex(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function wx(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,c=0;return $w()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var V6=new RegExp(`^(\\d+)*(${nM}|${tM})*(.*)`);function Tx(n){let e=n[wp]??[],r=n[Xe][je],i=[];for(let o of e)o.data[tb]!==void 0?i.push(o):bx(o,r);n[wp]=i}function bx(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[eb];for(;t<i;){let o=r.nextSibling;ub(e,r,!1),r=o,t++}}}var Sx=()=>null,Cx=()=>null;function rg(n,e){return Sx(n,e)}function Bb(n,e,t){return Cx(n,e,t)}var Hb=class{},Ul=class{},ig=class{resolveComponentFactory(e){throw new j(917,!1)}},La=class{static NULL=new ig},xi=class{};var qb=(()=>{class n{static \u0275prov=B({token:n,providedIn:"root",factory:()=>null})}return n})();var fl={},og=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,fl,r);return i!==fl||t===fl?i:this.parentInjector.get(e,t,r)}};function El(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=rp(i,c);else if(o==2){let u=c,l=e[++s];r=rp(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Pr(n,e=0){let t=we();if(t===null)return te(n,e);let r=Gt();return qT(r,t,Dt(n),e)}function Dx(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let c=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[c,u,l]=h.resolveHostDirectives(s);break}Nx(n,e,t,c,o,u,l)}o!==null&&r!==null&&Ax(t,r,o)}function Ax(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new j(-301,!1);r.push(e[i],o)}}function Rx(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Nx(n,e,t,r,i,o,s){let c=r.length,u=!1;for(let m=0;m<c;m++){let y=r[m];!u&&Ci(y)&&(u=!0,Rx(n,t,m)),qP(UT(t,e),n,y.type)}Lx(t,n.data.length,c);for(let m=0;m<c;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=pb(n,e,c,null);c>0&&(t.directiveToIndex=new Map);for(let m=0;m<c;m++){let y=r[m];if(t.mergedAttrs=Nl(t.mergedAttrs,y.hostAttrs),Mx(n,t,e,p,y),Ox(p,y,i),s!==null&&s.has(y)){let[N,R]=s.get(y);t.directiveToIndex.set(y.type,[p,N+t.directiveStart,R+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let D=y.type.prototype;!l&&(D.ngOnChanges||D.ngOnInit||D.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(D.ngOnChanges||D.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}Px(n,t,o)}function Px(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))vT(0,e,i,r),vT(1,e,i,r),IT(e,r,!1);else{let o=t.get(i);_T(0,e,o,r),_T(1,e,o,r),IT(e,r,!0)}}}function vT(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),zb(e,o)}}function _T(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;n===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),zb(e,s)}}function zb(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function IT(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Ig(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[c+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[c+1]);break}}c+=2}n.initialInputs??=[],n.initialInputs.push(s)}function Mx(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=gi(i.type,!0)),s=new Ra(o,Ci(i),Pr,null);n.blueprint[r]=s,t[r]=s,xx(n,e,r,pb(n,t,i.hostVars,Rr),i)}function xx(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let c=~e.index;kx(s)!=c&&s.push(c),s.push(t,r,o)}}function kx(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Ox(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ci(e)&&(t[""]=n)}}function Lx(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Wb(n,e,t,r,i,o,s,c){let u=e[Q],l=u.consts,h=yn(l,s),p=jl(u,n,t,r,h);return o&&Dx(u,e,p,yn(l,c),i),p.mergedAttrs=Nl(p.mergedAttrs,p.attrs),p.attrs!==null&&El(p,p.attrs,!1),p.mergedAttrs!==null&&El(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function Gb(n,e){xP(n,e),Tp(e)&&n.queries.elementEnd(e)}function Fx(n,e,t,r,i,o){let s=e.consts,c=yn(s,i),u=jl(e,n,t,r,c);if(u.mergedAttrs=Nl(u.mergedAttrs,u.attrs),o!=null){let l=yn(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&El(u,u.attrs,!1),u.mergedAttrs!==null&&El(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function qo(n,e,t){if(t===Rr)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function pl(n,e,t){return function r(i){let o=Dr(n)?an(n.index,e):e;Og(o,5);let s=e[Le],c=ET(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)c=ET(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function ET(n,e,t,r){let i=z(null);try{return Te(6,e,t),t(r)!==!1}catch(o){return rx(n,o),!1}finally{Te(7,e,t),z(i)}}function Kb(n,e,t,r,i,o,s,c){let u=el(n),l=!1,h=null;if(!r&&u&&(h=jx(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=mn(n,t),m=r?r(p):p;iM(t,m,o,c);let y=i.listen(m,o,c);if(!Vx(o)){let D=r?N=>r(Wt(N[n.index])):n.index;Qb(D,e,t,o,c,y,!1)}}return l}function Vx(n){return n.startsWith("animation")||n.startsWith("transition")}function jx(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let c=e[Mo],u=i[o+2];return c&&c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function Qb(n,e,t,r,i,o,s){let c=e.firstCreatePass?Fw(e):null,u=Lw(t),l=u.length;u.push(i,o),c&&c.push(r,n,l,(l+1)*(s?-1:1))}function wT(n,e,t,r,i,o){let s=e[t],c=e[Q],l=c.data[t].outputs[r],p=s[l].subscribe(o);Qb(n.index,c,e,i,o,p,!0)}var sg=Symbol("BINDING");var wl=class extends La{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Sr(e);return new Bo(t,this.ngModule)}};function Ux(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Ol.SignalBased)!==0};return i&&(o.transform=i),o})}function $x(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function Bx(n,e,t){let r=e instanceof Ge?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new og(t,r):t}function Hx(n){let e=n.get(xi,null);if(e===null)throw new j(407,!1);let t=n.get(qb,null),r=n.get(jn,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function qx(n,e){let t=Yb(n);return ab(e,t,t==="svg"?Rw:t==="math"?Nw:null)}function Yb(n){return(n.selectors[0][0]||"div").toLowerCase()}var Bo=class extends Ul{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Ux(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=$x(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=_M(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Te(22);let c=z(null);try{let u=this.componentDef,l=zx(r,u,s,o),h=Bx(u,i||this.ngModule,e),p=Hx(h),m=p.rendererFactory.createRenderer(null,u),y=r?WM(m,r,u.encapsulation,h):qx(u,m),D=s?.some(TT)||o?.some(O=>typeof O!="function"&&O.bindings.some(TT)),N=wg(null,l,null,512|fb(u),null,null,p,m,h,null,ib(y,h,!0));N[et]=y,ol(N);let R=null;try{let O=Wb(et,N,2,"#host",()=>l.directiveRegistry,!0,0);lb(m,y,O),$o(y,N),Sb(l,N,O),sb(l,O,N),Gb(l,O),t!==void 0&&Gx(O,this.ngContentSelectors,t),R=an(O.index,N),N[Le]=R[Le],xg(l,N,null)}catch(O){throw R!==null&&Qp(R),Qp(N),O}finally{Te(23),sl()}return new Tl(this.componentType,N,!!D)}finally{z(c)}}};function zx(n,e,t,r){let i=n?["ng-version","20.3.15"]:IM(e.selectors[0]),o=null,s=null,c=0;if(t)for(let h of t)c+=h[sg].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){c+=m[sg].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=yp(p);u.push(m)}return Eg(0,null,Wx(o,s),1,c,u,null,null,null,[i],null)}function Wx(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function TT(n){let e=n[sg].kind;return e==="input"||e==="twoWay"}var Tl=class extends Hb{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Ta(t[Q],et),this.location=mg(this._tNode,t),this.instance=an(this._tNode.index,t)[Le],this.hostView=this.changeDetectorRef=new Mi(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Mg(r,i[Q],i,e,t);this.previousInputValues.set(e,t);let s=an(r.index,i);Og(s,1)}get injector(){return new Ni(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Gx(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var $l=(()=>{class n{static __NG_ELEMENT_ID__=Kx}return n})();function Kx(){let n=Gt();return Yx(n,we())}var Qx=$l,Jb=class extends Qx{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return mg(this._hostTNode,this._hostLView)}get injector(){return new Ni(this._hostTNode,this._hostLView)}get parentInjector(){let e=gg(this._hostTNode,this._hostLView);if(FT(e)){let t=yl(e,this._hostLView),r=ml(e),i=t[Q].data[r+8];return new Ni(i,t)}else return new Ni(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=bT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Fe}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=rg(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(c,i,Na(this._hostTNode,s)),c}createComponent(e,t,r,i,o,s,c){let u=e&&!AP(e),l;if(u)l=t;else{let R=t||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,c=R.bindings}let h=u?e:new Bo(Sr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let O=(u?p:this.parentInjector).get(Ge,null);O&&(o=O)}let m=Sr(h.componentType??{}),y=rg(this._lContainer,m?.id??null),D=y?.firstChild??null,N=h.create(p,i,D,o,s,c);return this.insertImpl(N.hostView,l,Na(this._hostTNode,y)),N}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(xw(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[Xe],l=new Jb(u,u[zt],u[Xe]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Vl(s,i,o,r),e.attachToViewContainerRef(),fp(qp(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=bT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Ma(this._lContainer,t);r&&(ya(qp(this._lContainer),t),Ll(r[Q],r))}detach(e){let t=this._adjustIndex(e,-1),r=Ma(this._lContainer,t);return r&&ya(qp(this._lContainer),t)!=null?new Mi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function bT(n){return n[Ea]}function qp(n){return n[Ea]||(n[Ea]=[])}function Yx(n,e){let t,r=e[n.index];return sn(r)?t=r:(t=Vb(r,e,null,n),e[n.index]=t,Tg(e,t)),Zx(t,e,n,r),new Jb(t,n,e)}function Jx(n,e){let t=n[je],r=t.createComment(""),i=mn(e,n),o=t.parentNode(i);return vl(t,o,r,t.nextSibling(i),!1),r}var Zx=tk,Xx=()=>!1;function ek(n,e,t){return Xx(n,e,t)}function tk(n,e,t,r){if(n[Cr])return;let i;t.type&8?i=Wt(r):i=Jx(e,t),n[Cr]=i}var Ho=class{},Bl=class{};var bl=class extends Ho{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new wl(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=mp(e);this._bootstrapComponents=db(o.bootstrap),this._r3Injector=Fp(e,t,[{provide:Ho,useValue:this},{provide:La,useValue:this.componentFactoryResolver},...r],wr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Sl=class extends Bl{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new bl(this.moduleType,e,[])}};var xa=class extends Ho{injector;componentFactoryResolver=new wl(this);instance=null;constructor(e){super();let t=new yi([...e.providers,{provide:Ho,useValue:this},{provide:La,useValue:this.componentFactoryResolver}],e.parent||_a(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Fa(n,e,t=null){return new xa({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var nk=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=vp(!1,t.type),i=r.length>0?Fa([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=B({token:n,providedIn:"environment",factory:()=>new n(te(Ge))})}return n})();function Lt(n){return ka(()=>{let e=Zb(n),t=_e(F({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===yg.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(nk).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||qn.Emulated,styles:n.styles||mi,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Nr("NgStandalone"),Xb(t);let r=n.dependencies;return t.directiveDefs=ST(r,rk),t.pipeDefs=ST(r,ww),t.id=sk(t),t})}function rk(n){return Sr(n)||yp(n)}function ik(n,e){if(n==null)return Ii;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=Ol.None,u=null),t[o]=[r,c,u],e[o]=s}return t}function ok(n){if(n==null)return Ii;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Lg(n){return ka(()=>{let e=Zb(n);return Xb(e),e})}function Zb(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Ii,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||mi,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:ik(n.inputs,e),outputs:ok(n.outputs),debugInfo:null}}function Xb(n){n.features?.forEach(e=>e(n))}function ST(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function sk(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ak(n,e,t,r,i,o,s,c){if(t.firstCreatePass){n.mergedAttrs=Nl(n.mergedAttrs,n.attrs);let h=n.tView=Eg(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}c&&(n.flags|=c),Fo(n,!1);let u=ck(t,e,n,r);al()&&Rg(t,e,u,n),$o(u,e);let l=Vb(u,e,u,n);e[r+et]=l,Tg(e,l),ek(l,n,e)}function Cl(n,e,t,r,i,o,s,c,u,l,h){let p=t+et,m;if(e.firstCreatePass){if(m=jl(e,p,4,s||null,c||null),l!=null){let y=yn(e.consts,l);m.localNames=[];for(let D=0;D<y.length;D+=2)m.localNames.push(y[D],-1)}}else m=e.data[p];return ak(m,n,e,t,r,i,o,u),l!=null&&Pg(n,m,h),m}var ck=uk;function uk(n,e,t,r){return cl(!0),e[je].createComment("")}var Fg=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Vg=new U("");function Va(n){return!!n&&typeof n.then=="function"}function eS(n){return!!n&&typeof n.subscribe=="function"}var tS=new U("");var jg=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=x(tS,{optional:!0})??[];injector=x(Ke);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Qe(this.injector,i);if(Va(o))t.push(o);else if(eS(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Hl=new U("");function nS(){Af(()=>{let n="";throw new j(600,n)})}function rS(n){return n.isBoundToModule}var lk=10;var Li=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=x(Kt);afterRenderManager=x(_b);zonelessEnabled=x(Ca);rootEffectScheduler=x(ul);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new st;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=x(vn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ie(t=>!t))}constructor(){x(Oa,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=x(Ge);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Ke.NULL){return this._injector.get(ve).run(()=>{Te(10);let s=t instanceof Ul;if(!this._injector.get(jg).done){let D="";throw new j(405,D)}let u;s?u=t:u=this._injector.get(La).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=rS(u)?void 0:this._injector.get(Ho),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(Vg,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),Aa(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),Te(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Te(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Sg.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);let t=z(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,z(t),this.afterTick.next(),Te(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(xi,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<lk;)Te(14),this.synchronizeOnce(),Te(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ba(i))continue;let o=r&&!this.zonelessEnabled?0:1;kb(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>ba(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Aa(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Hl,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Aa(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new j(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Aa(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var z6=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var ag=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function zp(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function dk(n,e,t){let r,i,o=0,s=n.length-1,c=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=n.at(o),h=e[o],p=zp(o,l,o,h,t);if(p!==0){p<0&&n.updateValue(o,h),o++;continue}let m=n.at(s),y=e[u],D=zp(s,m,u,y,t);if(D!==0){D<0&&n.updateValue(s,y),s--,u--;continue}let N=t(o,l),R=t(s,m),O=t(o,h);if(Object.is(O,R)){let $=t(u,y);Object.is($,N)?(n.swap(o,s),n.updateValue(s,y),u--,s--):n.move(s,o),n.updateValue(o,h),o++;continue}if(r??=new Dl,i??=DT(n,o,s,t),cg(n,r,o,O))n.updateValue(o,h),o++,s++;else if(i.has(O))r.set(N,n.detach(o)),s--;else{let $=n.create(o,e[o]);n.attach(o,$),o++,s++}}for(;o<=u;)CT(n,r,t,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=n.at(o),p=l.value,m=zp(o,h,o,p,t);if(m!==0)m<0&&n.updateValue(o,p),o++,l=u.next();else{r??=new Dl,i??=DT(n,o,s,t);let y=t(o,p);if(cg(n,r,o,y))n.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))n.attach(o,n.create(o,p)),o++,s++,l=u.next();else{let D=t(o,h);r.set(D,n.detach(o)),s--}}}for(;!l.done;)CT(n,r,t,n.length,l.value),l=u.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(u=>{n.destroy(u)})}function cg(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function CT(n,e,t,r,i){if(cg(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function DT(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var Dl=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function ja(n,e,t,r,i,o,s,c){Nr("NgControlFlow");let u=we(),l=cn(),h=yn(l.consts,o);return Cl(u,l,n,e,t,r,i,h,256,s,c),Ug}function Ug(n,e,t,r,i,o,s,c){Nr("NgControlFlow");let u=we(),l=cn(),h=yn(l.consts,o);return Cl(u,l,n,e,t,r,i,h,512,s,c),Ug}function Ua(n,e){Nr("NgControlFlow");let t=we(),r=Ai(),i=t[r]!==Rr?t[r]:-1,o=i!==-1?Al(t,et+i):void 0,s=0;if(qo(t,r,n)){let c=z(null);try{if(o!==void 0&&Ub(o,s),n!==-1){let u=et+n,l=Al(t,u),h=hg(t[Q],u),p=Bb(l,h,t),m=kg(t,h,e,{dehydratedView:p});Vl(l,m,s,Na(h,p))}}finally{z(c)}}else if(o!==void 0){let c=jb(o,s);c!==void 0&&(c[Le]=e)}}var ug=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Fe}};function $g(n){return n}var lg=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Bg(n,e,t,r,i,o,s,c,u,l,h,p,m){Nr("NgControlFlow");let y=we(),D=cn(),N=u!==void 0,R=we(),O=c?s.bind(R[xt][Le]):s,$=new lg(N,O);R[et+n]=$,Cl(y,D,n+1,e,t,r,i,yn(D.consts,o),256),N&&Cl(y,D,n+2,u,l,h,p,yn(D.consts,m),512)}var dg=class extends ag{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-Fe}at(e){return this.getLView(e)[Le].$implicit}attach(e,t){let r=t[Po];this.needsIndexUpdate||=e!==this.length,Vl(this.lContainer,t,e,Na(this.templateTNode,r)),hk(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,fk(this.lContainer,e),pk(this.lContainer,e)}create(e,t){let r=rg(this.lContainer,this.templateTNode.tView.ssrId),i=kg(this.hostLView,this.templateTNode,new ug(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Ll(e[Q],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[Le].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Le].$index=e}getLView(e){return gk(this.lContainer,e)}};function Hg(n){let e=z(null),t=Sa();try{let r=we(),i=r[Q],o=r[t],s=t+1,c=Al(r,s);if(o.liveCollection===void 0){let l=hg(i,s);o.liveCollection=new dg(c,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(dk(u,n,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=Ai(),h=u.length===0;if(qo(r,l,h)){let p=t+2,m=Al(r,p);if(h){let y=hg(i,p),D=Bb(m,y,r),N=kg(r,y,void 0,{dehydratedView:D});Vl(m,N,0,Na(y,D))}else i.firstUpdatePass&&Tx(m),Ub(m,0)}}}finally{z(e)}}function Al(n,e){return n[e]}function hk(n,e){if(n.length<=Fe)return;let t=Fe+e,r=n[t],i=r?r[Si]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[Un];PM(o,i),Pi.delete(r),i.detachedLeaveAnimationFns=void 0}}function fk(n,e){if(n.length<=Fe)return;let t=Fe+e,r=n[t],i=r?r[Si]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function pk(n,e){return Ma(n,e)}function gk(n,e){return jb(n,e)}function hg(n,e){return Ta(n,e)}function ql(n,e,t){let r=we(),i=Ai();if(qo(r,i,e)){let o=cn(),s=Lp();YM(s,r,n,e,r[je],t)}return ql}function AT(n,e,t,r,i){Mg(e,n,t,i?"class":"style",r)}function Mr(n,e,t,r){let i=we(),o=i[Q],s=n+et,c=o.firstCreatePass?Wb(s,i,2,e,tx,Uw(),t,r):o.data[s];if(Db(c,i,n,e,iS),el(c)){let u=i[Q];Sb(u,i,c),sb(u,c,i)}return r!=null&&Pg(i,c),Mr}function zn(){let n=cn(),e=Gt(),t=Ab(e);return n.firstCreatePass&&Gb(n,t),Ap(t)&&Rp(),Dp(),t.classesWithoutHost!=null&&OP(t)&&AT(n,t,we(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&LP(t)&&AT(n,t,we(),t.stylesWithoutHost,!1),zn}function zo(n,e,t,r){return Mr(n,e,t,r),zn(),zo}function le(n,e,t,r){let i=we(),o=i[Q],s=n+et,c=o.firstCreatePass?Fx(s,o,2,e,t,r):o.data[s];return Db(c,i,n,e,iS),r!=null&&Pg(i,c),le}function de(){let n=Gt(),e=Ab(n);return Ap(e)&&Rp(),Dp(),de}function zl(n,e,t,r){return le(n,e,t,r),de(),zl}var iS=(n,e,t,r,i)=>(cl(!0),ab(e[je],r,Xw()));function Wn(){return we()}function At(n,e,t){let r=we(),i=Ai();if(qo(r,i,e)){let o=cn(),s=Lp();Cb(s,r,n,e,r[je],t)}return At}var $a="en-US";var mk=$a;function oS(n){typeof n=="string"&&(mk=n.toLowerCase().replace(/_/g,"-"))}function Wo(n,e,t){let r=we(),i=cn(),o=Gt();return yk(i,r,r[je],o,n,e,t),Wo}function Ue(n,e,t){let r=we(),i=cn(),o=Gt();return(o.type&3||t)&&Kb(o,i,r,t,r[je],n,e,pl(o,r,e)),Ue}function yk(n,e,t,r,i,o,s){let c=!0,u=null;if((r.type&3||s)&&(u??=pl(r,e,o),Kb(r,n,e,s,t,i,o,u)&&(c=!1)),c){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=pl(r,e,o),wT(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=pl(r,e,o),wT(r,e,p,i,i,u)}}function xr(n=1){return Zw(n)}function Ft(n){let e=qw();return Mw(e,et+n)}function Ve(n,e=""){let t=we(),r=cn(),i=n+et,o=r.firstCreatePass?jl(r,i,1,e,null):r.data[i],s=vk(r,t,o,e,n);t[i]=s,al()&&Rg(r,t,s,o),Fo(o,!1)}var vk=(n,e,t,r,i)=>(cl(!0),sM(e[je],r));function _k(n,e,t,r=""){return qo(n,Ai(),t)?e+Qu(t)+r:Rr}function Gn(n,e,t){let r=we(),i=_k(r,n,e,t);return i!==Rr&&Ik(r,Sa(),i),Gn}function Ik(n,e,t){let r=Pw(e,n);aM(n[je],r,t)}function qg(n){return qo(we(),Ai(),n)?Qu(n):Rr}var Rl=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},zg=(()=>{class n{compileModuleSync(t){return new Sl(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=mp(t),o=db(i.declarations).reduce((s,c)=>{let u=Sr(c);return u&&s.push(new Bo(u)),s},[]);return new Rl(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ek=(()=>{class n{zone=x(ve);changeDetectionScheduler=x(jn);applicationRef=x(Li);applicationErrorHandler=x(Kt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sS=new U("",{factory:()=>!1});function Wg({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ve(_e(F({},Kg()),{scheduleInRootZone:t})),[{provide:ve,useFactory:n},{provide:br,multi:!0,useFactory:()=>{let r=x(Ek,{optional:!0});return()=>r.initialize()}},{provide:br,multi:!0,useFactory:()=>{let r=x(wk);return()=>{r.initialize()}}},e===!0?{provide:jp,useValue:!0}:[],{provide:Up,useValue:t??mb},{provide:Kt,useFactory:()=>{let r=x(ve),i=x(Ge),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Ht),o.handleError(s))})}}}]}function Gg(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=Wg({ngZoneFactory:()=>{let i=Kg(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Nr("NgZone_CoalesceEvent"),new ve(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return rn([{provide:sS,useValue:!0},{provide:Ca,useValue:!1},r])}function Kg(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var wk=(()=>{class n{subscription=new Ne;initialized=!1;zone=x(ve);pendingTasks=x(vn);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ve.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ve.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var aS=(()=>{class n{applicationErrorHandler=x(Kt);appRef=x(Li);taskService=x(vn);ngZone=x(ve);zonelessEnabled=x(Ca);tracing=x(Oa,{optional:!0});disableScheduling=x(jp,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ne;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(_l):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(x(Up,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Il||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?hT:yb;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(_l+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,hT(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Tk(){return typeof $localize<"u"&&$localize.locale||$a}var Qg=new U("",{providedIn:"root",factory:()=>x(Qg,{optional:!0,skipSelf:!0})||Tk()});var Wl=class{destroyed=!1;listeners=null;errorHandler=x(Ht,{optional:!0});destroyRef=x(Hn);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new j(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let t=this.listeners?.indexOf(e);t!==void 0&&t!==-1&&this.listeners?.splice(t,1)}}}emit(e){if(this.destroyed){console.warn(vi(953,!1));return}if(this.listeners===null)return;let t=z(null);try{for(let r of this.listeners)try{r(e)}catch(i){this.errorHandler?.handleError(i)}}finally{z(t)}}};function kr(n){return fw(n)}var cS=class{[Tt];constructor(e){this[Tt]=e}destroy(){this[Tt].destroy()}};var dS=Symbol("InputSignalNode#UNSET"),xk=_e(F({},yu),{transformFn:void 0,applyValueToInputSignal(n,e){po(n,e)}});function hS(n,e){let t=Object.create(xk);t.value=n,t.transformFn=e?.transform;function r(){if(oa(t),t.value===dS){let i=null;throw new j(-950,i)}return t.value}return r[Tt]=t,r}var kk=new U("");kk.__NG_ELEMENT_ID__=n=>{let e=Gt();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new j(204,!1)};function Kn(n){return new Wl}function uS(n,e){return hS(n,e)}function Ok(n){return hS(dS,n)}var Qt=(uS.required=Ok,uS);var Yg=new U(""),Lk=new U("");function Ba(n){return!n.moduleRef}function Fk(n){let e=Ba(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ve);return t.run(()=>{Ba(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Kt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Ba(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Yg);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Yg);s.add(o),n.moduleRef.onDestroy(()=>{Aa(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return jk(r,t,()=>{let o=e.get(vn),s=o.add(),c=e.get(jg);return c.runInitializers(),c.donePromise.then(()=>{let u=e.get(Qg,$a);if(oS(u||$a),!e.get(Lk,!0))return Ba(n)?e.get(Li):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Ba(n)){let h=e.get(Li);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return Vk?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var Vk;function jk(n,e,t){try{let r=t();return Va(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Gl=null;function Uk(n=[],e){return Ke.create({name:e,providers:[{provide:va,useValue:"platform"},{provide:Yg,useValue:new Set([()=>Gl=null])},...n]})}function $k(n=[]){if(Gl)return Gl;let e=Uk(n);return Gl=e,nS(),Bk(e),e}function Bk(n){let e=n.get(xl,null);Qe(n,()=>{e?.forEach(t=>t())})}function Jg(){return!1}var fS=(()=>{class n{static __NG_ELEMENT_ID__=Hk}return n})();function Hk(n){return qk(Gt(),we(),(n&16)===16)}function qk(n,e,t){if(Dr(n)&&!t){let r=an(n.index,e);return new Mi(r,r)}else if(n.type&175){let r=e[xt];return new Mi(r,e)}return null}function pS(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Te(8);try{let o=i?.injector??$k(r),s=[Wg({}),{provide:jn,useExisting:aS},tT,...t||[]],c=new xa({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return Fk({r3Injector:c.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Te(9)}}var yS=null;function Qn(){return yS}function Zg(n){yS??=n}var qa=class{},Xg=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>x(vS),providedIn:"platform"})}return n})();var vS=(()=>{class n extends Xg{_location;_history;_doc=x(at);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Qn().getBaseHref(this._doc)}onPopState(t){let r=Qn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Qn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function _S(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function gS(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Or(n){return n&&n[0]!=="?"?`?${n}`:n}var Kl=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>x(ES),providedIn:"root"})}return n})(),IS=new U(""),ES=(()=>{class n extends Kl{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??x(at).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return _S(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Or(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Or(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Or(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(te(Xg),te(IS,8))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Go=(()=>{class n{_subject=new st;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Gk(gS(mS(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Or(r))}normalize(t){return n.stripTrailingSlash(Wk(this._basePath,mS(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Or(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Or(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Or;static joinWithSlash=_S;static stripTrailingSlash=gS;static \u0275fac=function(r){return new(r||n)(te(Kl))};static \u0275prov=B({token:n,factory:()=>zk(),providedIn:"root"})}return n})();function zk(){return new Go(te(Kl))}function Wk(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function mS(n){return n.replace(/\/index.html$/,"")}function Gk(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function em(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var za=class{};var wS="browser";var Wa=class{_doc;constructor(e){this._doc=e}manager},Ql=(()=>{class n extends Wa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(te(at))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),Jl=new U(""),om=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof Ql));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof Ql);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(te(Jl),te(ve))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),tm="ng-app-id";function TS(n){for(let e of n)e.remove()}function bS(n,e){let t=e.createElement("style");return t.textContent=n,t}function Kk(n,e,t,r){let i=n.head?.querySelectorAll(`style[${tm}="${e}"],link[${tm}="${e}"]`);if(i)for(let o of i)o.removeAttribute(tm),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function rm(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var sm=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,Kk(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,bS);r?.forEach(i=>this.addUsage(i,this.external,rm))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(TS(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])TS(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,bS(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,rm(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(te(at),te(Ml),te(kl,8),te(ki))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),nm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},am=/%COMP%/g;var CS="%COMP%",Qk=`_nghost-${CS}`,Yk=`_ngcontent-${CS}`,Jk=!0,Zk=new U("",{providedIn:"root",factory:()=>Jk});function Xk(n){return Yk.replace(am,n)}function eO(n){return Qk.replace(am,n)}function DS(n,e){return e.map(t=>t.replace(am,n))}var cm=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,c,u=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=c,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new Ga(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Yl?i.applyToHost(t):i instanceof Ka&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case qn.Emulated:o=new Yl(u,l,r,this.appId,h,s,c,p,m);break;case qn.ShadowDom:return new im(u,l,t,r,s,c,this.nonce,p,m);default:o=new Ka(u,l,r,h,s,c,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(te(om),te(sm),te(Ml),te(Zk),te(at),te(ve),te(kl),te(Oa,8))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),Ga=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(nm[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(SS(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(SS(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=nm[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=nm[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Oi.DashCase|Oi.Important)?e.style.setProperty(t,r,i&Oi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Oi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Qn().getGlobalEventTarget(this.doc,e),!e))throw new j(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function SS(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var im=class extends Ga{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,c,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=DS(i.id,h);for(let m of h){let y=document.createElement("style");c&&y.setAttribute("nonce",c),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=rm(m,o);c&&y.setAttribute("nonce",c),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ka=class extends Ga{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,c,u,l){super(e,o,s,c,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?DS(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Pi.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Yl=class extends Ka{contentAttr;hostAttr;constructor(e,t,r,i,o,s,c,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,c,u,l,h),this.contentAttr=Xk(h),this.hostAttr=eO(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Zl=class n extends qa{supportsDOMEvents=!0;static makeCurrent(){Zg(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=tO();return t==null?null:nO(t)}resetBaseElement(){Qa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return em(document.cookie,e)}},Qa=null;function tO(){return Qa=Qa||document.head.querySelector("base"),Qa?Qa.getAttribute("href"):null}function nO(n){return new URL(n,document.baseURI).pathname}var rO=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),AS=["alt","control","meta","shift"],iO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},oO={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},RS=(()=>{class n extends Wa{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),c=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Qn().onAndCancel(t,s.domEventName,c,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),AS.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=iO[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),AS.forEach(s=>{if(s!==i){let c=oO[s];c(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(te(at))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})();function um(n,e,t){let r=F({rootComponent:n,platformRef:t?.platformRef},sO(e));return pS(r)}function sO(n){return{appProviders:[...dO,...n?.providers??[]],platformProviders:lO}}function aO(){Zl.makeCurrent()}function cO(){return new Ht}function uO(){return vg(document),document}var lO=[{provide:ki,useValue:wS},{provide:xl,useValue:aO,multi:!0},{provide:at,useFactory:uO}];var dO=[{provide:va,useValue:"root"},{provide:Ht,useFactory:cO},{provide:Jl,useClass:Ql,multi:!0,deps:[at]},{provide:Jl,useClass:RS,multi:!0,deps:[at]},cm,sm,om,{provide:xi,useExisting:cm},{provide:za,useClass:rO},[]];var NS=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(te(at))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var X="primary",cc=Symbol("RouteTitle"),pm=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Xo(n){return new pm(n)}function fO(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],c=n[o];if(s[0]===":")i[s.substring(1)]=c;else if(s!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function pO(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!In(n[t],e[t]))return!1;return!0}function In(n,e){let t=n?gm(n):void 0,r=e?gm(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!VS(n[i],e[i]))return!1;return!0}function gm(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function VS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function jS(n){return n.length>0?n[n.length-1]:null}function Zn(n){return Hf(n)?n:Va(n)?Oe(Promise.resolve(n)):K(n)}var gO={exact:$S,subset:BS},US={exact:mO,subset:yO,ignored:()=>!0};function PS(n,e,t){return gO[t.paths](n.root,e.root,t.matrixParams)&&US[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function mO(n,e){return In(n,e)}function $S(n,e,t){if(!Vi(n.segments,e.segments)||!td(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!$S(n.children[r],e.children[r],t))return!1;return!0}function yO(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>VS(n[t],e[t]))}function BS(n,e,t){return HS(n,e,e.segments,t)}function HS(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Vi(i,t)||e.hasChildren()||!td(i,t,r))}else if(n.segments.length===t.length){if(!Vi(n.segments,t)||!td(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!BS(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Vi(n.segments,i)||!td(n.segments,i,r)||!n.children[X]?!1:HS(n.children[X],e,o,r)}}function td(n,e,t){return e.every((r,i)=>US[t](n[i].parameters,r.parameters))}var Jn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ge([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Xo(this.queryParams),this._queryParamMap}toString(){return IO.serialize(this)}},ge=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nd(this)}},Fi=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Xo(this.parameters),this._parameterMap}toString(){return zS(this)}};function vO(n,e){return Vi(n,e)&&n.every((t,r)=>In(t.parameters,e[r].parameters))}function Vi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function _O(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===X&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==X&&(t=t.concat(e(i,r)))}),t}var pd=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>new es,providedIn:"root"})}return n})(),es=class{parse(e){let t=new ym(e);return new Jn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ya(e.root,!0)}`,r=TO(e.queryParams),i=typeof e.fragment=="string"?`#${EO(e.fragment)}`:"";return`${t}${r}${i}`}},IO=new es;function nd(n){return n.segments.map(e=>zS(e)).join("/")}function Ya(n,e){if(!n.hasChildren())return nd(n);if(e){let t=n.children[X]?Ya(n.children[X],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==X&&r.push(`${i}:${Ya(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=_O(n,(r,i)=>i===X?[Ya(n.children[X],!1)]:[`${i}:${Ya(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[X]!=null?`${nd(n)}/${t[0]}`:`${nd(n)}/(${t.join("//")})`}}function qS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xl(n){return qS(n).replace(/%3B/gi,";")}function EO(n){return encodeURI(n)}function mm(n){return qS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rd(n){return decodeURIComponent(n)}function MS(n){return rd(n.replace(/\+/g,"%20"))}function zS(n){return`${mm(n.path)}${wO(n.parameters)}`}function wO(n){return Object.entries(n).map(([e,t])=>`;${mm(e)}=${mm(t)}`).join("")}function TO(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Xl(t)}=${Xl(i)}`).join("&"):`${Xl(t)}=${Xl(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var bO=/^[^\/()?;#]+/;function lm(n){let e=n.match(bO);return e?e[0]:""}var SO=/^[^\/()?;=#]+/;function CO(n){let e=n.match(SO);return e?e[0]:""}var DO=/^[^=?&#]+/;function AO(n){let e=n.match(DO);return e?e[0]:""}var RO=/^[^&#]+/;function NO(n){let e=n.match(RO);return e?e[0]:""}var ym=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ge([],{}):new ge([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[X]=new ge(e,t)),r}parseSegment(){let e=lm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new Fi(rd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=CO(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=lm(this.remaining);i&&(r=i,this.capture(r))}e[rd(t)]=rd(r)}parseQueryParam(e){let t=AO(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=NO(this.remaining);s&&(r=s,this.capture(r))}let i=MS(t),o=MS(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=lm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=X);let s=this.parseChildren();t[o??X]=Object.keys(s).length===1&&s[X]?s[X]:new ge([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function WS(n){return n.segments.length>0?new ge([],{[X]:n}):n}function GS(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=GS(i);if(r===X&&o.segments.length===0&&o.hasChildren())for(let[s,c]of Object.entries(o.children))e[s]=c;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new ge(n.segments,e);return PO(t)}function PO(n){if(n.numberOfChildren===1&&n.children[X]){let e=n.children[X];return new ge(n.segments.concat(e.segments),e.children)}return n}function ts(n){return n instanceof Jn}function MO(n,e,t=null,r=null){let i=KS(n);return QS(i,e,t,r)}function KS(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let c=new ge(o.url,s);return o===n&&(e=c),c}let r=t(n.root),i=WS(r);return e??i}function QS(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return dm(i,i,i,t,r);let o=xO(e);if(o.toRoot())return dm(i,i,new ge([],{}),t,r);let s=kO(o,i,n),c=s.processChildren?Za(s.segmentGroup,s.index,o.commands):JS(s.segmentGroup,s.index,o.commands);return dm(i,s.segmentGroup,c,t,r)}function id(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function tc(n){return typeof n=="object"&&n!=null&&n.outlets}function dm(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=YS(n,e,t);let c=WS(GS(s));return new Jn(c,o,i)}function YS(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=YS(o,e,t)}),new ge(n.segments,r)}var od=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&id(r[0]))throw new j(4003,!1);let i=r.find(tc);if(i&&i!==jS(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function xO(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new od(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([u,l])=>{c[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,o]},[]);return new od(t,e,r)}var Yo=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function kO(n,e,t){if(n.isAbsolute)return new Yo(e,!0,0);if(!t)return new Yo(e,!1,NaN);if(t.parent===null)return new Yo(t,!0,0);let r=id(n.commands[0])?0:1,i=t.segments.length-1+r;return OO(t,i,n.numberOfDoubleDots)}function OO(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new Yo(r,!1,i-o)}function LO(n){return tc(n[0])?n[0].outlets:{[X]:n}}function JS(n,e,t){if(n??=new ge([],{}),n.segments.length===0&&n.hasChildren())return Za(n,e,t);let r=FO(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new ge(n.segments.slice(0,r.pathIndex),{});return o.children[X]=new ge(n.segments.slice(r.pathIndex),n.children),Za(o,0,i)}else return r.match&&i.length===0?new ge(n.segments,{}):r.match&&!n.hasChildren()?vm(n,e,t):r.match?Za(n,0,i):vm(n,e,t)}function Za(n,e,t){if(t.length===0)return new ge(n.segments,{});{let r=LO(t),i={};if(Object.keys(r).some(o=>o!==X)&&n.children[X]&&n.numberOfChildren===1&&n.children[X].segments.length===0){let o=Za(n.children[X],e,t);return new ge(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=JS(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ge(n.segments,i)}}function FO(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],c=t[r];if(tc(c))break;let u=`${c}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!kS(u,l,s))return o;r+=2}else{if(!kS(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function vm(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(tc(o)){let u=VO(o.outlets);return new ge(r,u)}if(i===0&&id(t[0])){let u=n.segments[e];r.push(new Fi(u.path,xS(t[0]))),i++;continue}let s=tc(o)?o.outlets[X]:`${o}`,c=i<t.length-1?t[i+1]:null;s&&c&&id(c)?(r.push(new Fi(s,xS(c))),i+=2):(r.push(new Fi(s,{})),i++)}return new ge(r,{})}function VO(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=vm(new ge([],{}),0,r))}),e}function xS(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function kS(n,e,t){return n==t.path&&In(e,t.parameters)}var Xa="imperative",ct=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(ct||{}),Jt=class{id;url;constructor(e,t){this.id=e,this.url=t}},ns=class extends Jt{type=ct.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Lr=class extends Jt{urlAfterRedirects;type=ct.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Rt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Rt||{}),sd=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(sd||{}),Yn=class extends Jt{reason;code;type=ct.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Fr=class extends Jt{reason;code;type=ct.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},nc=class extends Jt{error;target;type=ct.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ad=class extends Jt{urlAfterRedirects;state;type=ct.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_m=class extends Jt{urlAfterRedirects;state;type=ct.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Im=class extends Jt{urlAfterRedirects;state;shouldActivate;type=ct.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Em=class extends Jt{urlAfterRedirects;state;type=ct.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wm=class extends Jt{urlAfterRedirects;state;type=ct.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tm=class{route;type=ct.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},bm=class{route;type=ct.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Sm=class{snapshot;type=ct.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cm=class{snapshot;type=ct.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dm=class{snapshot;type=ct.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Am=class{snapshot;type=ct.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var rc=class{},rs=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function jO(n){return!(n instanceof rc)&&!(n instanceof rs)}function UO(n,e){return n.providers&&!n._injector&&(n._injector=Fa(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ln(n){return n.outlet||X}function $O(n,e){let t=n.filter(r=>ln(r)===e);return t.push(...n.filter(r=>ln(r)!==e)),t}function os(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Rm=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return os(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new uc(this.rootInjector)}},uc=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Rm(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(te(Ge))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cd=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Nm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Nm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Pm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Pm(e,this._root).map(t=>t.value)}};function Nm(n,e){if(n===e.value)return e;for(let t of e.children){let r=Nm(n,t);if(r)return r}return null}function Pm(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Pm(n,t);if(r.length)return r.unshift(e),r}return[]}var Vt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Qo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var ud=class extends cd{snapshot;constructor(e,t){super(e),this.snapshot=t,Um(this,e)}toString(){return this.snapshot.toString()}};function ZS(n){let e=BO(n),t=new ze([new Fi("",{})]),r=new ze({}),i=new ze({}),o=new ze({}),s=new ze(""),c=new ji(t,r,o,s,i,X,n,e.root);return c.snapshot=e.root,new ud(new Vt(c,[]),e)}function BO(n){let e={},t={},r={},o=new Jo([],e,r,"",t,X,n,null,{});return new dd("",new Vt(o,[]))}var ji=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,c,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ie(l=>l[cc]))??K(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ie(e=>Xo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ie(e=>Xo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ld(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),n.params),data:F(F({},e.data),n.data),resolve:F(F(F(F({},n.data),e.data),i?.data),n._resolvedData)}:r={params:F({},n.params),data:F({},n.data),resolve:F(F({},n.data),n._resolvedData??{})},i&&eC(i)&&(r.resolve[cc]=i.title),r}var Jo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[cc]}constructor(e,t,r,i,o,s,c,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=c,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Xo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Xo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},dd=class extends cd{url;constructor(e,t){super(t),this.url=e,Um(this,t)}toString(){return XS(this._root)}};function Um(n,e){e.value._routerState=n,e.children.forEach(t=>Um(n,t))}function XS(n){let e=n.children.length>0?` { ${n.children.map(XS).join(", ")} } `:"";return`${n.value}${e}`}function hm(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,In(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),In(e.params,t.params)||n.paramsSubject.next(t.params),pO(e.url,t.url)||n.urlSubject.next(t.url),In(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Mm(n,e){let t=In(n.params,e.params)&&vO(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Mm(n.parent,e.parent))}function eC(n){return typeof n.title=="string"||n.title===null}var HO=new U(""),tC=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=X;activateEvents=new Et;deactivateEvents=new Et;attachEvents=new Et;detachEvents=new Et;routerOutletData=Qt();parentContexts=x(uc);location=x($l);changeDetector=x(fS);inputBinder=x(gd,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new xm(t,c,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Lg({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[pg]})}return n})(),xm=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===ji?this.route:e===uc?this.childContexts:e===HO?this.outletData:this.parent.get(e,t)}},gd=new U("");var nC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Lt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&zo(0,"router-outlet")},dependencies:[tC],encapsulation:2})}return n})();function $m(n){let e=n.children&&n.children.map($m),t=e?_e(F({},n),{children:e}):F({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==X&&(t.component=nC),t}function qO(n,e,t){let r=ic(n,e._root,t?t._root:void 0);return new ud(r,e)}function ic(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=zO(n,e,t);return new Vt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(c=>ic(n,c)),s}}let r=WO(e.value),i=e.children.map(o=>ic(n,o));return new Vt(r,i)}}function zO(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ic(n,r,i);return ic(n,r)})}function WO(n){return new ji(new ze(n.url),new ze(n.params),new ze(n.queryParams),new ze(n.fragment),new ze(n.data),n.outlet,n.component,n)}var oc=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},rC="ngNavigationCancelingError";function hd(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ts(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=iC(!1,Rt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function iC(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[rC]=!0,t.cancellationCode=e,t}function GO(n){return oC(n)&&ts(n.url)}function oC(n){return!!n&&n[rC]}var KO=(n,e,t,r)=>ie(i=>(new km(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),km=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),hm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Qo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Qo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Qo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Qo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Am(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Cm(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(hm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(c.contexts),s.attachRef=c.componentRef,s.route=c.route.value,s.outlet&&s.outlet.attach(c.componentRef,c.route.value),hm(c.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},fd=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Zo=class{component;route;constructor(e,t){this.component=e,this.route=t}};function QO(n,e,t){let r=n._root,i=e?e._root:null;return Ja(r,i,t,[r.value])}function YO(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ss(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!op(n)?n:e.get(n):r}function Ja(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Qo(e);return n.children.forEach(s=>{JO(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,c])=>ec(c,t.getContext(s),i)),i}function JO(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=ZO(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new fd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ja(n,e,c?c.children:null,r,i):Ja(n,e,t,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Zo(c.outlet.component,s))}else s&&ec(e,c,i),i.canActivateChecks.push(new fd(r)),o.component?Ja(n,null,c?c.children:null,r,i):Ja(n,null,t,r,i);return i}function ZO(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Vi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Vi(n.url,e.url)||!In(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Mm(n,e)||!In(n.queryParams,e.queryParams);case"paramsChange":default:return!Mm(n,e)}}function ec(n,e,t){let r=Qo(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ec(s,e.children.getContext(o),t):ec(s,null,t):ec(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Zo(e.outlet.component,i)):t.canDeactivateChecks.push(new Zo(null,i)):t.canDeactivateChecks.push(new Zo(null,i))}function lc(n){return typeof n=="function"}function XO(n){return typeof n=="boolean"}function e1(n){return n&&lc(n.canLoad)}function t1(n){return n&&lc(n.canActivate)}function n1(n){return n&&lc(n.canActivateChild)}function r1(n){return n&&lc(n.canDeactivate)}function i1(n){return n&&lc(n.canMatch)}function sC(n){return n instanceof On||n?.name==="EmptyError"}var ed=Symbol("INITIAL_VALUE");function is(){return Ct(n=>Fu(n.map(e=>e.pipe(Ln(1),Uu(ed)))).pipe(ie(e=>{for(let t of e)if(t!==!0){if(t===ed)return ed;if(t===!1||o1(t))return t}return!0}),pt(e=>e!==ed),Ln(1)))}function o1(n){return ts(n)||n instanceof oc}function s1(n,e){return We(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?K(_e(F({},t),{guardsResult:!0})):a1(s,r,i,n).pipe(We(c=>c&&XO(c)?c1(r,o,n,e):K(c)),ie(c=>_e(F({},t),{guardsResult:c})))})}function a1(n,e,t,r){return Oe(n).pipe(We(i=>f1(i.component,i.route,t,e,r)),Fn(i=>i!==!0,!0))}function c1(n,e,t,r){return Oe(e).pipe(Do(i=>Co(l1(i.route.parent,r),u1(i.route,r),h1(n,i.path,t),d1(n,i.route,t))),Fn(i=>i!==!0,!0))}function u1(n,e){return n!==null&&e&&e(new Dm(n)),K(!0)}function l1(n,e){return n!==null&&e&&e(new Sm(n)),K(!0)}function d1(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return K(!0);let i=r.map(o=>da(()=>{let s=os(e)??t,c=ss(o,s),u=t1(c)?c.canActivate(e,n):Qe(s,()=>c(e,n));return Zn(u).pipe(Fn())}));return K(i).pipe(is())}function h1(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>YO(s)).filter(s=>s!==null).map(s=>da(()=>{let c=s.guards.map(u=>{let l=os(s.node)??t,h=ss(u,l),p=n1(h)?h.canActivateChild(r,n):Qe(l,()=>h(r,n));return Zn(p).pipe(Fn())});return K(c).pipe(is())}));return K(o).pipe(is())}function f1(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return K(!0);let s=o.map(c=>{let u=os(e)??i,l=ss(c,u),h=r1(l)?l.canDeactivate(n,e,t,r):Qe(u,()=>l(n,e,t,r));return Zn(h).pipe(Fn())});return K(s).pipe(is())}function p1(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return K(!0);let o=i.map(s=>{let c=ss(s,n),u=e1(c)?c.canLoad(e,t):Qe(n,()=>c(e,t));return Zn(u)});return K(o).pipe(is(),aC(r))}function aC(n){return wu(Ze(e=>{if(typeof e!="boolean")throw hd(n,e)}),ie(e=>e===!0))}function g1(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return K(!0);let o=i.map(s=>{let c=ss(s,n),u=i1(c)?c.canMatch(e,t):Qe(n,()=>c(e,t));return Zn(u)});return K(o).pipe(is(),aC(r))}var sc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},ac=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Ko(n){return So(new sc(n))}function m1(n){return So(new j(4e3,!1))}function y1(n){return So(iC(!1,Rt.GuardRejected))}var Om=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return K(r);if(i.numberOfChildren>1||!i.children[X])return m1(`${e.redirectTo}`);i=i.children[X]}}applyRedirectCommands(e,t,r,i,o){return v1(t,i,o).pipe(ie(s=>{if(s instanceof Jn)throw new ac(s);let c=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new ac(c);return c}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Jn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let c=o.substring(1);r[i]=t[c]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([c,u])=>{s[c]=this.createSegmentGroup(e,u,r,i)}),new ge(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function v1(n,e,t){if(typeof n=="string")return K(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,params:l,data:h,title:p}=e;return Zn(Qe(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,title:p})))}var Lm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _1(n,e,t,r,i){let o=cC(n,e,t);return o.matched?(r=UO(e,r),g1(r,e,t,i).pipe(ie(s=>s===!0?o:F({},Lm)))):K(o)}function cC(n,e,t){if(e.path==="**")return I1(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?F({},Lm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||fO)(t,n,e);if(!i)return F({},Lm);let o={};Object.entries(i.posParams??{}).forEach(([c,u])=>{o[c]=u.path});let s=i.consumed.length>0?F(F({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function I1(n){return{matched:!0,parameters:n.length>0?jS(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function OS(n,e,t,r){return t.length>0&&T1(n,t,r)?{segmentGroup:new ge(e,w1(r,new ge(t,n.children))),slicedSegments:[]}:t.length===0&&b1(n,t,r)?{segmentGroup:new ge(n.segments,E1(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ge(n.segments,n.children),slicedSegments:t}}function E1(n,e,t,r){let i={};for(let o of t)if(md(n,e,o)&&!r[ln(o)]){let s=new ge([],{});i[ln(o)]=s}return F(F({},r),i)}function w1(n,e){let t={};t[X]=e;for(let r of n)if(r.path===""&&ln(r)!==X){let i=new ge([],{});t[ln(r)]=i}return t}function T1(n,e,t){return t.some(r=>md(n,e,r)&&ln(r)!==X)}function b1(n,e,t){return t.some(r=>md(n,e,r))}function md(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function S1(n,e,t){return e.length===0&&!n.children[t]}var Fm=class{};function C1(n,e,t,r,i,o,s="emptyOnly"){return new Vm(n,e,t,r,i,s,o).recognize()}var D1=31,Vm=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=c,this.applyRedirects=new Om(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=OS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ie(({children:t,rootSnapshot:r})=>{let i=new Vt(r,t),o=new dd("",i),s=MO(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Jo([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),X,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,X,t).pipe(ie(r=>({children:r,rootSnapshot:t})),Ir(r=>{if(r instanceof ac)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof sc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ie(s=>s instanceof Vt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Oe(o).pipe(Do(s=>{let c=r.children[s],u=$O(t,s);return this.processSegmentGroup(e,u,c,s,i)}),ju((s,c)=>(s.push(...c),s)),Er(null),qf(),We(s=>{if(s===null)return Ko(r);let c=uC(s);return A1(c),K(c)}))}processSegment(e,t,r,i,o,s,c){return Oe(t).pipe(Do(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,c).pipe(Ir(l=>{if(l instanceof sc)return K(null);throw l}))),Fn(u=>!!u),Ir(u=>{if(sC(u))return S1(r,i,o)?K(new Fm):Ko(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,c,u){return ln(r)!==s&&(s===X||!md(i,o,r))?Ko(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Ko(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,c){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=cC(t,i,o);if(!u)return Ko(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>D1&&(this.allowRedirects=!1));let y=new Jo(o,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,LS(i),ln(i),i.component??i._loadedComponent??null,i,FS(i)),D=ld(y,c,this.paramsInheritanceStrategy);return y.params=Object.freeze(D.params),y.data=Object.freeze(D.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(Ct(R=>this.applyRedirects.lineralizeSegments(i,R)),We(R=>this.processSegment(e,r,t,R.concat(m),s,!1,c)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let c=_1(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),c.pipe(Ct(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ct(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,D=new Jo(m,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,LS(r),ln(r),r.component??r._loadedComponent??null,r,FS(r)),N=ld(D,s,this.paramsInheritanceStrategy);D.params=Object.freeze(N.params),D.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:O}=OS(t,m,y,l);if(O.length===0&&R.hasChildren())return this.processChildren(h,l,R,D).pipe(ie(G=>new Vt(D,G)));if(l.length===0&&O.length===0)return K(new Vt(D,[]));let $=ln(r)===o;return this.processSegment(h,l,R,O,$?X:o,!0,D).pipe(ie(G=>new Vt(D,G instanceof Vt?[G]:[])))}))):Ko(t)))}getChildConfig(e,t,r){return t.children?K({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?K({routes:t._loadedRoutes,injector:t._loadedInjector}):p1(e,t,r,this.urlSerializer).pipe(We(i=>i?this.configLoader.loadChildren(e,t).pipe(Ze(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):y1(t))):K({routes:[],injector:e})}};function A1(n){n.sort((e,t)=>e.value.outlet===X?-1:t.value.outlet===X?1:e.value.outlet.localeCompare(t.value.outlet))}function R1(n){let e=n.value.routeConfig;return e&&e.path===""}function uC(n){let e=[],t=new Set;for(let r of n){if(!R1(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=uC(r.children);e.push(new Vt(r.value,i))}return e.filter(r=>!t.has(r))}function LS(n){return n.data||{}}function FS(n){return n.resolve||{}}function N1(n,e,t,r,i,o){return We(s=>C1(n,e,t,r,s.extractedUrl,i,o).pipe(ie(({state:c,tree:u})=>_e(F({},s),{targetSnapshot:c,urlAfterRedirects:u}))))}function P1(n,e){return We(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return K(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of lC(u))s.add(l);let c=0;return Oe(s).pipe(Do(u=>o.has(u)?M1(u,r,n,e):(u.data=ld(u,u.parent,n).resolve,K(void 0))),Ze(()=>c++),Ao(1),We(u=>c===s.size?K(t):bt))})}function lC(n){let e=n.children.map(t=>lC(t)).flat();return[n,...e]}function M1(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!eC(i)&&(o[cc]=i.title),da(()=>(n.data=ld(n,n.parent,t).resolve,x1(o,n,e,r).pipe(ie(s=>(n._resolvedData=s,n.data=F(F({},n.data),s),null)))))}function x1(n,e,t,r){let i=gm(n);if(i.length===0)return K({});let o={};return Oe(i).pipe(We(s=>k1(n[s],e,t,r).pipe(Fn(),Ze(c=>{if(c instanceof oc)throw hd(new es,c);o[s]=c}))),Ao(1),ie(()=>o),Ir(s=>sC(s)?bt:So(s)))}function k1(n,e,t,r){let i=os(e)??r,o=ss(n,i),s=o.resolve?o.resolve(e,t):Qe(i,()=>o(e,t));return Zn(s)}function fm(n){return Ct(e=>{let t=n(e);return t?Oe(t).pipe(ie(()=>e)):K(e)})}var dC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===X);return r}getResolvedTitleForRoute(t){return t.data[cc]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>x(O1),providedIn:"root"})}return n})(),O1=(()=>{class n extends dC{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(te(NS))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yd=new U("",{providedIn:"root",factory:()=>({})}),vd=new U(""),hC=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=x(zg);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return K(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Zn(Qe(t,()=>r.loadComponent())).pipe(ie(fC),Ct(pC),Ze(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),ha(()=>{this.componentLoaders.delete(r)})),o=new Eo(i,()=>new st).pipe(Io());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return K({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=L1(r,this.compiler,t,this.onLoadEndListener).pipe(ha(()=>{this.childrenLoaders.delete(r)})),s=new Eo(o,()=>new st).pipe(Io());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function L1(n,e,t,r){return Zn(Qe(t,()=>n.loadChildren())).pipe(ie(fC),Ct(pC),We(i=>i instanceof Bl||Array.isArray(i)?K(i):Oe(e.compileModuleAsync(i))),ie(i=>{r&&r(n);let o,s,c=!1;return Array.isArray(i)?(s=i,c=!0):(o=i.create(t).injector,s=o.get(vd,[],{optional:!0,self:!0}).flat()),{routes:s.map($m),injector:o}}))}function F1(n){return n&&typeof n=="object"&&"default"in n}function fC(n){return F1(n)?n.default:n}function pC(n){return K(n)}var Bm=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>x(V1),providedIn:"root"})}return n})(),V1=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gC=new U("");var mC=new U(""),yC=(()=>{class n{currentNavigation=Se(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new st;transitionAbortWithErrorSubject=new st;configLoader=x(hC);environmentInjector=x(Ge);destroyRef=x(Hn);urlSerializer=x(pd);rootContexts=x(uc);location=x(Go);inputBindingEnabled=x(gd,{optional:!0})!==null;titleStrategy=x(dC);options=x(yd,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=x(Bm);createViewTransition=x(gC,{optional:!0});navigationErrorHandler=x(mC,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>K(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Tm(i)),r=i=>this.events.next(new bm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;kr(()=>{this.transitions?.next(_e(F({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new ze(null),this.transitions.pipe(pt(r=>r!==null),Ct(r=>{let i=!1;return K(r).pipe(Ct(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Rt.SupersededByNewNavigation),bt;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?_e(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&c!=="reload")return this.events.next(new Fr(o.id,this.urlSerializer.serialize(o.rawUrl),"",sd.IgnoredSameUrlNavigation)),o.resolve(!1),bt;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return K(o).pipe(Ct(u=>(this.events.next(new ns(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?bt:Promise.resolve(u))),N1(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ze(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let l=new ad(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:m}=o,y=new ns(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let D=ZS(this.rootComponentType).snapshot;return this.currentTransition=r=_e(F({},o),{targetSnapshot:D,urlAfterRedirects:l,extras:_e(F({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(N=>(N.finalUrl=l,N)),K(r)}else return this.events.next(new Fr(o.id,this.urlSerializer.serialize(o.extractedUrl),"",sd.IgnoredByUrlHandlingStrategy)),o.resolve(!1),bt}),Ze(o=>{let s=new _m(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ie(o=>(this.currentTransition=r=_e(F({},o),{guards:QO(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),s1(this.environmentInjector,o=>this.events.next(o)),Ze(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw hd(this.urlSerializer,o.guardsResult);let s=new Im(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),pt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Rt.GuardRejected),!1)),fm(o=>{if(o.guards.canActivateChecks.length!==0)return K(o).pipe(Ze(s=>{let c=new Em(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(c)}),Ct(s=>{let c=!1;return K(s).pipe(P1(this.paramsInheritanceStrategy,this.environmentInjector),Ze({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(s,"",Rt.NoDataFromResolver)}}))}),Ze(s=>{let c=new wm(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(c)}))}),fm(o=>{let s=c=>{let u=[];if(c.routeConfig?.loadComponent){let l=os(c)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,c.routeConfig).pipe(Ze(h=>{c.component=h}),ie(()=>{})))}for(let l of c.children)u.push(...s(l));return u};return Fu(s(o.targetSnapshot.root)).pipe(Er(null),Ln(1))}),fm(()=>this.afterPreactivation()),Ct(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return c?Oe(c).pipe(ie(()=>r)):K(r)}),ie(o=>{let s=qO(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=_e(F({},o),{targetRouterState:s}),this.currentNavigation.update(c=>(c.targetRouterState=s,c)),r}),Ze(()=>{this.events.next(new rc)}),KO(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Ln(1),$u(new ne(o=>{let s=r.abortController.signal,c=()=>o.next();return s.addEventListener("abort",c),()=>s.removeEventListener("abort",c)}).pipe(pt(()=>!i&&!r.targetRouterState),Ze(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Rt.Aborted)}))),Ze({next:o=>{i=!0,this.lastSuccessfulNavigation=kr(this.currentNavigation),this.events.next(new Lr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),$u(this.transitionAbortWithErrorSubject.pipe(Ze(o=>{throw o}))),ha(()=>{i||this.cancelNavigationTransition(r,"",Rt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ir(o=>{if(this.destroyed)return r.resolve(!1),bt;if(i=!0,oC(o))this.events.next(new Yn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),GO(o)?this.events.next(new rs(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new nc(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=Qe(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(c instanceof oc){let{message:u,cancellationCode:l}=hd(this.urlSerializer,c);this.events.next(new Yn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new rs(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return bt}))}))}cancelNavigationTransition(t,r,i){let o=new Yn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=kr(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function j1(n){return n!==Xa}var U1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>x($1),providedIn:"root"})}return n})(),jm=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},$1=(()=>{class n extends jm{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Pl(n)))(i||n)}})();static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vC=(()=>{class n{urlSerializer=x(pd);options=x(yd,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=x(Go);urlHandlingStrategy=x(Bm);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Jn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Jn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=ZS(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>x(B1),providedIn:"root"})}return n})(),B1=(()=>{class n extends vC{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof ns?this.updateStateMemento():t instanceof Fr?this.commitTransition(r):t instanceof ad?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof rc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Yn&&t.code!==Rt.SupersededByNewNavigation&&t.code!==Rt.Redirect?this.restoreHistory(r):t instanceof nc?this.restoreHistory(r,!0):t instanceof Lr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let c=this.browserPageId,u=F(F({},s),this.generateNgRouterState(i,c));this.location.replaceState(t,"",u)}else{let c=F(F({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",c)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Pl(n)))(i||n)}})();static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _C(n,e){n.events.pipe(pt(t=>t instanceof Lr||t instanceof Yn||t instanceof nc||t instanceof Fr),ie(t=>t instanceof Lr||t instanceof Fr?0:(t instanceof Yn?t.code===Rt.Redirect||t.code===Rt.SupersededByNewNavigation:!1)?2:1),pt(t=>t!==2),Ln(1)).subscribe(()=>{e()})}var H1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},q1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Hm=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=x(Fg);stateManager=x(vC);options=x(yd,{optional:!0})||{};pendingTasks=x(vn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=x(yC);urlSerializer=x(pd);location=x(Go);urlHandlingStrategy=x(Bm);injector=x(Ge);_events=new st;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=x(U1);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=x(vd,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!x(gd,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ne;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=kr(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Yn&&r.code!==Rt.Redirect&&r.code!==Rt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Lr)this.navigated=!0;else if(r instanceof rs){let s=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||j1(i.source)},s);this.scheduleNavigation(c,Xa,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}jO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Xa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=F({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,s,o).catch(u=>{this.disposed||this.injector.get(Kt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return kr(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map($m),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:c,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":h=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=KS(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return QS(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ts(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Xa,null,r)}navigate(t,r={skipLocationChange:!1}){return z1(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(vi(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=F({},H1):r===!1?i=F({},q1):i=r,ts(t))return PS(this.currentUrlTree,t,i);let o=this.parseUrl(t);return PS(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let c,u,l;s?(c=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{c=p,u=m});let h=this.pendingTasks.add();return _C(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function z1(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new j(4008,!1)}var W1=new U("");function qm(n,...e){return rn([{provide:vd,multi:!0,useValue:n},[],{provide:ji,useFactory:G1,deps:[Hm]},{provide:Hl,multi:!0,useFactory:K1},e.map(t=>t.\u0275providers)])}function G1(n){return n.routerState.root}function K1(){let n=x(Ke);return e=>{let t=n.get(Li);if(e!==t.components[0])return;let r=n.get(Hm),i=n.get(Q1);n.get(Y1)===1&&r.initialNavigation(),n.get(J1,null,{optional:!0})?.setUpPreloading(),n.get(W1,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Q1=new U("",{factory:()=>new st}),Y1=new U("",{providedIn:"root",factory:()=>1});var J1=new U("");var IC=[];var EC=()=>{};var bC=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},X1=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],c=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},_d={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,c=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|c>>4,m=(c&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(t[h],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(bC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):X1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||l==null||p==null)throw new Wm;let m=o<<2|c>>4;if(r.push(m),l!==64){let y=c<<4&240|l>>2;if(r.push(y),p!==64){let D=l<<6&192|p;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Wm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},eL=function(n){let e=bC(n);return _d.encodeByteArray(e,!0)},hc=function(n){return eL(n).replace(/\./g,"")},Id=function(n){try{return _d.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Km(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var tL=()=>Km().__FIREBASE_DEFAULTS__,nL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},rL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Id(n[1]);return e&&JSON.parse(e)},Ed=()=>{try{return EC()||tL()||nL()||rL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Qm=n=>{var e,t;return(t=(e=Ed())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},SC=n=>{let e=Qm(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Ym=()=>{var n;return(n=Ed())===null||n===void 0?void 0:n.config},Jm=n=>{var e;return(e=Ed())===null||e===void 0?void 0:e[`_${n}`]};var Ui=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Vr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function wd(n){return E(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function CC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[hc(JSON.stringify(t)),hc(JSON.stringify(s)),""].join(".")}var dc={};function iL(){let n={prod:[],emulator:[]};for(let e of Object.keys(dc))dc[e]?n.emulator.push(e):n.prod.push(e);return n}function oL(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var wC=!1;function Td(n,e){if(typeof window>"u"||typeof document>"u"||!Vr(window.location.host)||dc[n]===e||dc[n]||wC)return;dc[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=iL().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{wC=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=oL(r),y=t("text"),D=document.getElementById(y)||document.createElement("span"),N=t("learnmore"),R=document.getElementById(N)||document.createElement("a"),O=t("preprendIcon"),$=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let G=m.element;c(G),h(R,N);let Ie=l();u($,O),G.append($,D,R,Ie),document.body.appendChild(G)}o?(D.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tt())}function sL(){var n;let e=(n=Ed())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function AC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RC(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function NC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PC(){let n=tt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function MC(){return!sL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fc(){try{return typeof indexedDB=="object"}catch{return!1}}function xC(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var aL="FirebaseError",jt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=aL,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dn.prototype.create)}},dn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?cL(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new jt(i,c,r)}};function cL(n,e){return n.replace(uL,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var uL=/\{\$([^}]+)}/g;function kC(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function En(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(TC(o)&&TC(s)){if(!En(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function TC(n){return n!==null&&typeof n=="object"}function pc(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function OC(n,e){let t=new Gm(n,e);return t.subscribe.bind(t)}var Gm=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");lL(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=zm),i.error===void 0&&(i.error=zm),i.complete===void 0&&(i.complete=zm);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function lL(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function zm(){}var YJ=14400*1e3;function nt(n){return n&&n._delegate?n._delegate:n}var wt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var $i="[DEFAULT]";var Zm=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Ui;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hL(e))try{this.getOrInitializeService({instanceIdentifier:$i})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=$i){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return E(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=$i){return this.instances.has(e)}getOptions(e=$i){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$i){return this.component?this.component.multipleInstances?e:$i:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function dL(n){return n===$i?void 0:n}function hL(n){return n.instantiationMode==="EAGER"}var bd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Zm(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var fL=[],oe=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(oe||{}),pL={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},gL=oe.INFO,mL={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},yL=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=mL[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},wn=class{constructor(e){this.name=e,this._logLevel=gL,this._logHandler=yL,this._userLogHandler=null,fL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}};var vL=(n,e)=>e.some(t=>n instanceof t),LC,FC;function _L(){return LC||(LC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IL(){return FC||(FC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var VC=new WeakMap,ey=new WeakMap,jC=new WeakMap,Xm=new WeakMap,ny=new WeakMap;function EL(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Tn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&VC.set(t,n)}).catch(()=>{}),ny.set(e,n),e}function wL(n){if(ey.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});ey.set(n,e)}var ty={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ey.get(n);if(e==="objectStoreNames")return n.objectStoreNames||jC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Tn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function UC(n){ty=n(ty)}function TL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Sd(this),e,...t);return jC.set(r,e.sort?e.sort():[e]),Tn(r)}:IL().includes(n)?function(...e){return n.apply(Sd(this),e),Tn(VC.get(this))}:function(...e){return Tn(n.apply(Sd(this),e))}}function bL(n){return typeof n=="function"?TL(n):(n instanceof IDBTransaction&&wL(n),vL(n,_L())?new Proxy(n,ty):n)}function Tn(n){if(n instanceof IDBRequest)return EL(n);if(Xm.has(n))return Xm.get(n);let e=bL(n);return e!==n&&(Xm.set(n,e),ny.set(e,n)),e}var Sd=n=>ny.get(n);function BC(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),c=Tn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Tn(s.result),u.oldVersion,u.newVersion,Tn(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var SL=["get","getKey","getAll","getAllKeys","count"],CL=["put","add","delete","clear"],ry=new Map;function $C(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ry.get(e))return ry.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=CL.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||SL.includes(t)))return;let o=function(s,...c){return E(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[t](...c),i&&u.done]))[0]})};return ry.set(e,o),o}UC(n=>_e(F({},n),{get:(e,t,r)=>$C(e,t)||n.get(e,t,r),has:(e,t)=>!!$C(e,t)||n.has(e,t)}));var oy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(DL(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function DL(n){let e=n.getComponent();return e?.type==="VERSION"}var sy="@firebase/app",HC="0.13.2";var Xn=new wn("@firebase/app"),AL="@firebase/app-compat",RL="@firebase/analytics-compat",NL="@firebase/analytics",PL="@firebase/app-check-compat",ML="@firebase/app-check",xL="@firebase/auth",kL="@firebase/auth-compat",OL="@firebase/database",LL="@firebase/data-connect",FL="@firebase/database-compat",VL="@firebase/functions",jL="@firebase/functions-compat",UL="@firebase/installations",$L="@firebase/installations-compat",BL="@firebase/messaging",HL="@firebase/messaging-compat",qL="@firebase/performance",zL="@firebase/performance-compat",WL="@firebase/remote-config",GL="@firebase/remote-config-compat",KL="@firebase/storage",QL="@firebase/storage-compat",YL="@firebase/firestore",JL="@firebase/ai",ZL="@firebase/firestore-compat",XL="firebase",eF="11.10.0";var ay="[DEFAULT]",tF={[sy]:"fire-core",[AL]:"fire-core-compat",[NL]:"fire-analytics",[RL]:"fire-analytics-compat",[ML]:"fire-app-check",[PL]:"fire-app-check-compat",[xL]:"fire-auth",[kL]:"fire-auth-compat",[OL]:"fire-rtdb",[LL]:"fire-data-connect",[FL]:"fire-rtdb-compat",[VL]:"fire-fn",[jL]:"fire-fn-compat",[UL]:"fire-iid",[$L]:"fire-iid-compat",[BL]:"fire-fcm",[HL]:"fire-fcm-compat",[qL]:"fire-perf",[zL]:"fire-perf-compat",[WL]:"fire-rc",[GL]:"fire-rc-compat",[KL]:"fire-gcs",[QL]:"fire-gcs-compat",[YL]:"fire-fst",[ZL]:"fire-fst-compat",[JL]:"fire-vertex","fire-js":"fire-js",[XL]:"fire-js-all"};var gc=new Map,nF=new Map,cy=new Map;function qC(n,e){try{n.container.addComponent(e)}catch(t){Xn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function hn(n){let e=n.name;if(cy.has(e))return Xn.debug(`There were multiple attempts to register component ${e}.`),!1;cy.set(e,n);for(let t of gc.values())qC(t,n);for(let t of nF.values())qC(t,n);return!0}function as(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Zt(n){return n==null?!1:n.settings!==void 0}var rF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jr=new dn("app","Firebase",rF);var uy=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jr.create("app-deleted",{appName:this._name})}};var Ur=eF;function hy(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:ay,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw jr.create("bad-app-name",{appName:String(i)});if(t||(t=Ym()),!t)throw jr.create("no-options");let o=gc.get(i);if(o){if(En(t,o.options)&&En(r,o.config))return o;throw jr.create("duplicate-app",{appName:i})}let s=new bd(i);for(let u of cy.values())s.addComponent(u);let c=new uy(t,r,s);return gc.set(i,c),c}function Bi(n=ay){let e=gc.get(n);if(!e&&n===ay&&Ym())return hy();if(!e)throw jr.create("no-app",{appName:n});return e}function Cd(){return Array.from(gc.values())}function xe(n,e,t){var r;let i=(r=tF[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xn.warn(c.join(" "));return}hn(new wt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var iF="firebase-heartbeat-database",oF=1,mc="firebase-heartbeat-store",iy=null;function KC(){return iy||(iy=BC(iF,oF,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(mc)}catch(t){console.warn(t)}}}}).catch(n=>{throw jr.create("idb-open",{originalErrorMessage:n.message})})),iy}function sF(n){return E(this,null,function*(){try{let t=(yield KC()).transaction(mc),r=yield t.objectStore(mc).get(QC(n));return yield t.done,r}catch(e){if(e instanceof jt)Xn.warn(e.message);else{let t=jr.create("idb-get",{originalErrorMessage:e?.message});Xn.warn(t.message)}}})}function zC(n,e){return E(this,null,function*(){try{let r=(yield KC()).transaction(mc,"readwrite");yield r.objectStore(mc).put(e,QC(n)),yield r.done}catch(t){if(t instanceof jt)Xn.warn(t.message);else{let r=jr.create("idb-set",{originalErrorMessage:t?.message});Xn.warn(r.message)}}})}function QC(n){return`${n.name}!${n.options.appId}`}var aF=1024,cF=30,ly=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new dy(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return E(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=WC();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>cF){let s=lF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Xn.warn(r)}})}getHeartbeatsHeader(){return E(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=WC(),{heartbeatsToSend:r,unsentEntries:i}=uF(this._heartbeatsCache.heartbeats),o=hc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Xn.warn(t),""}})}};function WC(){return new Date().toISOString().substring(0,10)}function uF(n,e=aF){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),GC(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),GC(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var dy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return E(this,null,function*(){return fc()?xC().then(()=>!0).catch(()=>!1):!1})}read(){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield sF(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return zC(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return zC(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function GC(n){return hc(JSON.stringify({version:2,heartbeats:n})).length}function lF(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function dF(n){hn(new wt("platform-logger",e=>new oy(e),"PRIVATE")),hn(new wt("heartbeat",e=>new ly(e),"PRIVATE")),xe(sy,HC,n),xe(sy,HC,"esm2017"),xe("fire-js","")}dF("");var hF="firebase",fF="11.10.0";xe(hF,fF,"app");function YC(n){n===void 0&&(n=x(Ke));let e=n.get(Ri);return t=>new ne(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let c=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return c.add(()=>{r.unsubscribe(),s()}),c})}var $r=new No("ANGULARFIRE2_VERSION");function yc(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var us=(n,e)=>{let t=e?[e]:Cd(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},cs=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(cs||{}),JC=Jg()&&typeof Zone<"u"?cs.WARN:cs.SILENT;var Dd=class{zone;delegate;constructor(e,t=$f){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Br=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=x(ve);this.outsideAngular=t.runOutsideAngular(()=>new Dd(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Dd(typeof Zone>"u"?void 0:Zone.current,Uf))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ZC=!1;function pF(n,e){!ZC&&(JC>cs.SILENT||Jg())&&(ZC=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),JC>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function gF(n){let e=x(ve,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Hi(n){let e=x(ve,{optional:!0});return e?e.run(()=>n()):n()}var mF=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Qe(t,()=>Hi(()=>n.apply(void 0,r)))),Ut=(n,e,t)=>(t||=e?cs.WARN:cs.VERBOSE,function(){let r,i=arguments,o,s,c;try{o=x(Br),s=x(Ri),c=x(Ge)}catch{return pF(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Hi(()=>s.add())),i[l]=mF(i[l],r,c));let u=gF(()=>n.apply(this,i));return e?u instanceof ne?u.pipe(_r(o.outsideAngular),vr(o.insideAngular),YC(c)):u instanceof Promise?Hi(()=>{let l=s.add();return new Promise((h,p)=>{u.then(m=>Qe(c,()=>Hi(()=>h(m))),m=>Qe(c,()=>Hi(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Hi(()=>u):u instanceof ne?u.pipe(_r(o.outsideAngular),vr(o.insideAngular)):Hi(()=>u)});var er=class{constructor(e){return e}},qi=class{constructor(){return Cd()}};function yF(n){return n&&n.length===1?n[0]:new er(Bi())}var fy=new U("angularfire2._apps"),vF={provide:er,useFactory:yF,deps:[[new Ot,fy]]},_F={provide:qi,deps:[[new Ot,fy]]};function IF(n){return(e,t)=>{let r=t.get(ki);xe("angularfire",$r.full,"core"),xe("angularfire",$r.full,"app"),xe("angular",np.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new er(i)}}function XC(n,...e){return rn([vF,_F,{provide:fy,useFactory:IF(n),multi:!0,deps:[ve,Ke,Br,...e]}])}var eD=Ut(hy,!0);var EF=new Map,wF={activated:!1,tokenObservers:[]},TF={initialized:!1,enabled:!1};function fn(n){return EF.get(n)||Object.assign({},wF)}function iD(){return TF}var bF="https://content-firebaseappcheck.googleapis.com/v1";var SF="exchangeDebugToken",tD={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},XZ=1440*60*1e3;var my=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return E(this,null,function*(){this.stop();try{this.pending=new Ui,this.pending.promise.catch(t=>{}),yield CF(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Ui,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function CF(n){return new Promise(e=>{setTimeout(e,n)})}var DF={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Hr=new dn("appCheck","AppCheck",DF);function oD(n){if(!fn(n).activated)throw Hr.create("use-before-activation",{appName:n.name})}function sD(r,i){return E(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let c={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,c)}catch(y){throw Hr.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Hr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Hr.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Hr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function aD(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${bF}/projects/${t}/apps/${r}:${SF}?key=${i}`,body:{debug_token:e}}}var AF="firebase-app-check-database",RF=1,yy="firebase-app-check-store";var Ad=null;function NF(){return Ad||(Ad=new Promise((n,e)=>{try{let t=indexedDB.open(AF,RF);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Hr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(yy,{keyPath:"compositeKey"})}}}catch(t){e(Hr.create("storage-open",{originalErrorMessage:t?.message}))}}),Ad)}function PF(n,e){return MF(xF(n),e)}function MF(n,e){return E(this,null,function*(){let r=(yield NF()).transaction(yy,"readwrite"),o=r.objectStore(yy).put({compositeKey:n,value:e});return new Promise((s,c)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;c(Hr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function xF(n){return`${n.options.appId}-${n.name}`}var vc=new wn("@firebase/app-check");function py(n,e){return fc()?PF(n,e).catch(t=>{vc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function cD(){return iD().enabled}function uD(){return E(this,null,function*(){let n=iD();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var kF={error:"UNKNOWN_ERROR"};function OF(n){return _d.encodeString(JSON.stringify(n),!1)}function vy(n,e=!1,t=!1){return E(this,null,function*(){let r=n.app;oD(r);let i=fn(r),o=i.token,s;if(o&&!_c(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(_c(l)?o=l:yield py(r,void 0))}if(!e&&o&&_c(o))return{token:o.token};let c=!1;if(cD())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=sD(aD(r,yield uD()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);let l=yield i.exchangeTokenPromise;return yield py(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?vc.warn(l.message):t&&vc.error(l),gy(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),o=yield fn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?vc.warn(l.message):t&&vc.error(l),s=l}let u;return o?s?_c(o)?u={token:o.token,internalError:s}:u=gy(s):(u={token:o.token},i.token=o,yield py(r,o)):u=gy(s),c&&jF(r,u),u})}function LF(n){return E(this,null,function*(){let e=n.app;oD(e);let{provider:t}=fn(e);if(cD()){let r=yield uD(),{token:i}=yield sD(aD(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function FF(n,e,t,r){let{app:i}=n,o=fn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&_c(o.token)){let c=o.token;Promise.resolve().then(()=>{t({token:c.token}),nD(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>nD(n))}function lD(n,e){let t=fn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function nD(n){let{app:e}=n,t=fn(e),r=t.tokenRefresher;r||(r=VF(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function VF(n){let{app:e}=n;return new my(()=>E(null,null,function*(){let t=fn(e),r;if(t.token?r=yield vy(n,!0):r=yield vy(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=fn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},tD.RETRIAL_MIN_WAIT,tD.RETRIAL_MAX_WAIT)}function jF(n,e){let t=fn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function _c(n){return n.expireTimeMillis-Date.now()>0}function gy(n){return{token:OF(kF),error:n}}var _y=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=fn(this.app);for(let t of e)lD(this.app,t.next);return Promise.resolve()}};function UF(n,e){return new _y(n,e)}function $F(n){return{getToken:e=>vy(n,e),getLimitedUseToken:()=>LF(n),addTokenListener:e=>FF(n,"INTERNAL",e),removeTokenListener:e=>lD(n.app,e)}}var BF="@firebase/app-check",HF="0.10.1";var qF="app-check",rD="app-check-internal";function zF(){hn(new wt(qF,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return UF(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(rD).initialize()})),hn(new wt(rD,n=>{let e=n.getProvider("app-check").getImmediate();return $F(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),xe(BF,HF)}zF();var WF="app-check";var ls=class{constructor(){return us(WF)}};var GF=["localhost","0.0.0.0","127.0.0.1"],hX=typeof window<"u"&&GF.includes(window.location.hostname);function SD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var CD=SD,DD=new dn("auth","Firebase",SD());var kd=new wn("@firebase/auth");function KF(n,...e){kd.logLevel<=oe.WARN&&kd.warn(`Auth (${Ur}): ${n}`,...e)}function Nd(n,...e){kd.logLevel<=oe.ERROR&&kd.error(`Auth (${Ur}): ${n}`,...e)}function Wr(n,...e){throw jy(n,...e)}function Wi(n,...e){return jy(n,...e)}function AD(n,e,t){let r=Object.assign(Object.assign({},CD()),{[e]:t});return new dn("auth","Firebase",r).create(e,{appName:n.name})}function zi(n){return AD(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jy(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return DD.create(n,...e)}function W(n,e,...t){if(!n)throw jy(e,...t)}function tr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Nd(e),new Error(e)}function Gr(n,e){n||tr(e)}function Ty(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function QF(){return dD()==="http:"||dD()==="https:"}function dD(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function YF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QF()||RC()||"connection"in navigator)?navigator.onLine:!0}function JF(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Gi=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gr(t>e,"Short delay should be less than long delay!"),this.isMobile=DC()||NC()}get(){return YF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Uy(n,e){Gr(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Od=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var ZF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var XF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],eV=new Gi(3e4,6e4);function $y(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ds(o,s,c,u){return E(this,arguments,function*(n,e,t,r,i={}){return RD(n,i,()=>E(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=pc(Object.assign({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:m},l);return AC()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&Vr(n.emulatorConfig.host)&&(y.credentials="include"),Od.fetch()(yield ND(n,n.config.apiHost,t,p),y)}))})}function RD(n,e,t){return E(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},ZF),e);try{let i=new by(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Rd(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rd(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Rd(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw Rd(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw AD(n,h,l);Wr(n,h)}}catch(i){if(i instanceof jt)throw i;Wr(n,"network-request-failed",{message:String(i)})}})}function tV(o,s,c,u){return E(this,arguments,function*(n,e,t,r,i={}){let l=yield ds(n,e,t,r,i);return"mfaPendingCredential"in l&&Wr(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function ND(n,e,t,r){return E(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?Uy(n.config,i):`${n.config.apiScheme}://${i}`;return XF.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var by=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Wi(this.auth,"network-request-failed")),eV.get())})}};function Rd(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Wi(n,e,r);return i.customData._tokenResponse=t,i}function nV(n,e){return E(this,null,function*(){return ds(n,"POST","/v1/accounts:delete",e)})}function Ld(n,e){return E(this,null,function*(){return ds(n,"POST","/v1/accounts:lookup",e)})}function Ic(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function By(n,e=!1){return E(this,null,function*(){let t=nt(n),r=yield t.getIdToken(e),i=Hy(r);W(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Ic(Iy(i.auth_time)),issuedAtTime:Ic(Iy(i.iat)),expirationTime:Ic(Iy(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Iy(n){return Number(n)*1e3}function Hy(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Nd("JWT malformed, contained fewer than 3 sections"),null;try{let i=Id(t);return i?JSON.parse(i):(Nd("Failed to decode base64 JWT payload"),null)}catch(i){return Nd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function hD(n){let e=Hy(n);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function wc(n,e,t=!1){return E(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof jt&&rV(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function rV({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Sy=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>E(this,null,function*(){yield this.iteration()}),t)}iteration(){return E(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Tc=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ic(this.lastLoginAt),this.creationTime=Ic(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Fd(n){return E(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield wc(n,Ld(t,{idToken:r}));W(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?PD(o.providerUserInfo):[],c=iV(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!c?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Tc(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function qy(n){return E(this,null,function*(){let e=nt(n);yield Fd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function iV(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function PD(n){return n.map(e=>{var{providerId:t}=e,r=Bf(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function oV(n,e){return E(this,null,function*(){let t=yield RD(n,{},()=>E(null,null,function*(){let r=pc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield ND(n,i,"/v1/token",`key=${o}`),c=yield n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:c,body:r};return n.emulatorConfig&&Vr(n.emulatorConfig.host)&&(u.credentials="include"),Od.fetch()(s,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function sV(n,e){return E(this,null,function*(){return ds(n,"POST","/v2/accounts:revokeToken",$y(n,e))})}var Ec=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){W(e.length!==0,"internal-error");let t=hD(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return E(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return E(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield oV(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(W(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(W(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return tr("not implemented")}};function qr(n,e){W(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var zr=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Bf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Sy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Tc(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return E(this,null,function*(){let t=yield wc(this,this.stsTokenManager.getToken(this.auth,e));return W(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return By(this,e)}reload(){return qy(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return E(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Fd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return E(this,null,function*(){if(Zt(this.auth.app))return Promise.reject(zi(this.auth));let e=yield this.getIdToken();return yield wc(this,nV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,c,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,D=(s=t.photoURL)!==null&&s!==void 0?s:void 0,N=(c=t.tenantId)!==null&&c!==void 0?c:void 0,R=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,O=(l=t.createdAt)!==null&&l!==void 0?l:void 0,$=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:G,emailVerified:Ie,isAnonymous:vt,providerData:ye,stsTokenManager:T}=t;W(G&&T,e,"internal-error");let v=Ec.fromJSON(this.name,T);W(typeof G=="string",e,"internal-error"),qr(p,e.name),qr(m,e.name),W(typeof Ie=="boolean",e,"internal-error"),W(typeof vt=="boolean",e,"internal-error"),qr(y,e.name),qr(D,e.name),qr(N,e.name),qr(R,e.name),qr(O,e.name),qr($,e.name);let I=new n({uid:G,auth:e,email:m,emailVerified:Ie,displayName:p,isAnonymous:vt,photoURL:D,phoneNumber:y,tenantId:N,stsTokenManager:v,createdAt:O,lastLoginAt:$});return ye&&Array.isArray(ye)&&(I.providerData=ye.map(w=>Object.assign({},w))),R&&(I._redirectEventId=R),I}static _fromIdTokenResponse(e,t,r=!1){return E(this,null,function*(){let i=new Ec;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Fd(o),o})}static _fromGetAccountInfoResponse(e,t,r){return E(this,null,function*(){let i=t.users[0];W(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?PD(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new Ec;c.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Tc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var fD=new Map;function nr(n){Gr(n instanceof Function,"Expected a class definition");let e=fD.get(n);return e?(Gr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,fD.set(n,e),e)}var aV=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return E(this,null,function*(){return!0})}_set(t,r){return E(this,null,function*(){this.storage[t]=r})}_get(t){return E(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return E(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Cy=aV;function Pd(n,e,t){return`firebase:${n}:${e}:${t}`}var Vd=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Pd(this.userKey,i.apiKey,o),this.fullPersistenceKey=Pd("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return E(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Ld(this.auth,{idToken:e}).catch(()=>{});return t?zr._fromGetAccountInfoResponse(this.auth,t,e):null}return zr._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return E(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return E(this,null,function*(){if(!t.length)return new n(nr(Cy),e,r);let i=(yield Promise.all(t.map(l=>E(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||nr(Cy),s=Pd(r,e.config.apiKey,e.name),c=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield Ld(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield zr._fromGetAccountInfoResponse(e,m,h)}else p=zr._fromJSON(e,h);l!==o&&(c=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],c&&(yield o._set(s,c.toJSON())),yield Promise.all(t.map(l=>E(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function pD(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(OD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(MD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FD(e))return"Blackberry";if(VD(e))return"Webos";if(xD(e))return"Safari";if((e.includes("chrome/")||kD(e))&&!e.includes("edge/"))return"Chrome";if(LD(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function MD(n=tt()){return/firefox\//i.test(n)}function xD(n=tt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kD(n=tt()){return/crios\//i.test(n)}function OD(n=tt()){return/iemobile/i.test(n)}function LD(n=tt()){return/android/i.test(n)}function FD(n=tt()){return/blackberry/i.test(n)}function VD(n=tt()){return/webos/i.test(n)}function zy(n=tt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function cV(n=tt()){var e;return zy(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function uV(){return PC()&&document.documentMode===10}function jD(n=tt()){return zy(n)||LD(n)||VD(n)||FD(n)||/windows phone/i.test(n)||OD(n)}function UD(n,e=[]){let t;switch(n){case"Browser":t=pD(tt());break;case"Worker":t=`${pD(tt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ur}/${r}`}var Dy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,c)=>{try{let u=e(o);s(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return E(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function lV(t){return E(this,arguments,function*(n,e={}){return ds(n,"GET","/v2/passwordPolicy",$y(n,e))})}var dV=6,Ay=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:dV,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Ry=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jd(this),this.idTokenSubscription=new jd(this),this.beforeStateQueue=new Dy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=nr(t)),this._initializationPromise=this.queue(()=>E(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Vd.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return E(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return E(this,null,function*(){try{let t=yield Ld(this,{idToken:e}),r=yield zr._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return E(this,null,function*(){var t;if(Zt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===c)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return E(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return E(this,null,function*(){try{yield Fd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=JF()}_delete(){return E(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return E(this,null,function*(){if(Zt(this.app))return Promise.reject(zi(this));let t=e?nt(e):null;return t&&W(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return E(this,null,function*(){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>E(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return E(this,null,function*(){return Zt(this.app)?Promise.reject(zi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Zt(this.app)?Promise.reject(zi(this)):this.queue(()=>E(this,null,function*(){yield this.assertedPersistence.setPersistence(nr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return E(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return E(this,null,function*(){let e=yield lV(this),t=new Ay(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new dn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return E(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield sV(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return E(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return E(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&nr(e)||this._popupRedirectResolver;W(t,this,"argument-error"),this.redirectPersistenceManager=yield Vd.create(this,[nr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return E(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>E(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return E(this,null,function*(){if(e===this.currentUser)return this.queue(()=>E(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return E(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=UD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return E(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return E(this,null,function*(){var e;if(Zt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&KF(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Wy(n){return nt(n)}var jd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=OC(t=>this.observer=t)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Gy={loadJS(){return E(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hV(n){Gy=n}function fV(n){return Gy.loadJS(n)}function pV(){return Gy.gapiScript}function $D(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Ky(n,e){let t=as(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(En(o,e??{}))return i;Wr(i,"already-initialized")}return t.initialize({options:e})}function gV(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(nr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Qy(n,e,t){let r=Wy(n);W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=BD(e),{host:s,port:c}=mV(e),u=c===null?"":`:${c}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){W(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),W(En(l,r.config.emulator)&&En(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Vr(s)?(wd(`${o}//${s}${u}`),Td("Auth",!0)):i||yV()}function BD(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function mV(n){let e=BD(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:gD(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:gD(s)}}}function gD(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function yV(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Ud=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return tr("not implemented")}_getIdTokenResponse(e){return tr("not implemented")}_linkToIdToken(e,t){return tr("not implemented")}_getReauthenticationResolver(e){return tr("not implemented")}};function Ey(n,e){return E(this,null,function*(){return tV(n,"POST","/v1/accounts:signInWithIdp",$y(n,e))})}var $d=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Ny=class extends $d{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var bc=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return E(this,null,function*(){let o=yield zr._fromIdTokenResponse(e,r,i),s=mD(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return E(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=mD(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function mD(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Py=class n extends jt{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function HD(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Py._fromErrorAndOperation(n,o,e,r):o})}function vV(n,e,t=!1){return E(this,null,function*(){let r=yield wc(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return bc._forOperation(n,"link",r)})}function _V(n,e,t=!1){return E(this,null,function*(){let{auth:r}=n;if(Zt(r.app))return Promise.reject(zi(r));let i="reauthenticate";try{let o=yield wc(n,HD(r,i,e,n),t);W(o.idToken,r,"internal-error");let s=Hy(o.idToken);W(s,r,"internal-error");let{sub:c}=s;return W(n.uid===c,r,"user-mismatch"),bc._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Wr(r,"user-mismatch"),o}})}function IV(n,e,t=!1){return E(this,null,function*(){if(Zt(n.app))return Promise.reject(zi(n));let r="signIn",i=yield HD(n,r,e),o=yield bc._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Yy(n,e,t,r){return nt(n).onIdTokenChanged(e,t,r)}function Jy(n,e,t){return nt(n).beforeAuthStateChanged(e,t)}var Bd="__sak";var Hd=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Bd,"1"),this.storage.removeItem(Bd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var EV=1e3,wV=10,TV=(()=>{class n extends Hd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jD(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,u,l)=>{this.notifyListeners(c,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},s=this.storage.getItem(i);uV()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,wV):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},EV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return E(this,null,function*(){yield mr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return E(this,null,function*(){let r=yield mr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return E(this,null,function*(){yield mr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),qD=TV;var bV=(()=>{class n extends Hd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Zy=bV;function SV(n){return Promise.all(n.map(e=>E(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var CV=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return E(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,c=this.handlersMap[o];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(c).map(h=>E(this,null,function*(){return h(r.origin,s)})),l=yield SV(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function zD(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var My=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return E(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((c,u)=>{let l=zD("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function bn(){return window}function DV(n){bn().location.href=n}function WD(){return typeof bn().WorkerGlobalScope<"u"&&typeof bn().importScripts=="function"}function AV(){return E(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function RV(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function NV(){return WD()?self:null}var GD="firebaseLocalStorageDb",PV=1,qd="firebaseLocalStorage",KD="fbase_key",Ki=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Wd(n,e){return n.transaction([qd],e?"readwrite":"readonly").objectStore(qd)}function MV(){let n=indexedDB.deleteDatabase(GD);return new Ki(n).toPromise()}function xy(){let n=indexedDB.open(GD,PV);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(qd,{keyPath:KD})}catch(i){t(i)}}),n.addEventListener("success",()=>E(null,null,function*(){let r=n.result;r.objectStoreNames.contains(qd)?e(r):(r.close(),yield MV(),e(yield xy()))}))})}function yD(n,e,t){return E(this,null,function*(){let r=Wd(n,!0).put({[KD]:e,value:t});return new Ki(r).toPromise()})}function xV(n,e){return E(this,null,function*(){let t=Wd(n,!1).get(e),r=yield new Ki(t).toPromise();return r===void 0?null:r.value})}function vD(n,e){let t=Wd(n,!0).delete(e);return new Ki(t).toPromise()}var kV=800,OV=3,LV=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return E(this,null,function*(){return this.db?this.db:(this.db=yield xy(),this.db)})}_withRetries(t){return E(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>OV)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return E(this,null,function*(){return WD()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return E(this,null,function*(){this.receiver=CV._getInstance(NV()),this.receiver._subscribe("keyChanged",(t,r)=>E(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>E(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return E(this,null,function*(){var t,r;if(this.activeServiceWorker=yield AV(),!this.activeServiceWorker)return;this.sender=new My(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return E(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||RV()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return E(this,null,function*(){try{if(!indexedDB)return!1;let t=yield xy();return yield yD(t,Bd,"1"),yield vD(t,Bd),!0}catch{}return!1})}_withPendingWrite(t){return E(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(i=>yD(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return E(this,null,function*(){let r=yield this._withRetries(i=>xV(i,t));return this.localCache[t]=r,r})}_remove(t){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(r=>vD(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return E(this,null,function*(){let t=yield this._withRetries(o=>{let s=Wd(o,!1).getAll();return new Ki(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>E(this,null,function*(){return this._poll()}),kV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),QD=LV;var wX=$D("rcb"),TX=new Gi(3e4,6e4);function FV(n,e){return e?nr(e):(W(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Sc=class extends Ud{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ey(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ey(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ey(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function VV(n){return IV(n.auth,new Sc(n),n.bypassAuthState)}function jV(n){let{auth:e,user:t}=n;return W(t,e,"internal-error"),_V(t,new Sc(n),n.bypassAuthState)}function UV(n){return E(this,null,function*(){let{auth:e,user:t}=n;return W(t,e,"internal-error"),vV(t,new Sc(n),n.bypassAuthState)})}var ky=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>E(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return E(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:c}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VV;case"linkViaPopup":case"linkViaRedirect":return UV;case"reauthViaPopup":case"reauthViaRedirect":return jV;default:Wr(this.auth,"internal-error")}}resolve(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var bX=new Gi(2e3,1e4);var $V="pendingRedirect",Md=new Map,Oy=class n extends ky{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return E(this,null,function*(){let e=Md.get(this.auth._key());if(!e){try{let r=(yield BV(this.resolver,this.auth))?yield mr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Md.set(this.auth._key(),e)}return this.bypassAuthState||Md.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return E(this,null,function*(){if(e.type==="signInViaRedirect")return mr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,mr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return E(this,null,function*(){})}cleanUp(){}};function BV(n,e){return E(this,null,function*(){let t=zV(e),r=qV(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function HV(n,e){Md.set(n._key(),e)}function qV(n){return nr(n._redirectPersistence)}function zV(n){return Pd($V,n.config.apiKey,n.name)}function WV(n,e,t=!1){return E(this,null,function*(){if(Zt(n.app))return Promise.reject(zi(n));let r=Wy(n),i=FV(r,e),s=yield new Oy(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var GV=600*1e3,Ly=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!KV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!YD(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Wi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=GV&&this.cachedEventUids.clear(),this.cachedEventUids.has(_D(e))}saveEventToCache(e){this.cachedEventUids.add(_D(e)),this.lastProcessedEventTime=Date.now()}};function _D(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function YD({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function KV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YD(n);default:return!1}}function QV(t){return E(this,arguments,function*(n,e={}){return ds(n,"GET","/v1/projects",e)})}var YV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JV=/^https?/;function ZV(n){return E(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield QV(n);for(let t of e)try{if(XV(t))return}catch{}Wr(n,"unauthorized-domain")})}function XV(n){let e=Ty(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!JV.test(t))return!1;if(YV.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var ej=new Gi(3e4,6e4);function ID(){let n=bn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function tj(n){return new Promise((e,t)=>{var r,i,o;function s(){ID(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ID(),t(Wi(n,"network-request-failed"))},timeout:ej.get()})}if(!((i=(r=bn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=bn().gapi)===null||o===void 0)&&o.load)s();else{let c=$D("iframefcb");return bn()[c]=()=>{gapi.load?s():t(Wi(n,"network-request-failed"))},fV(`${pV()}?onload=${c}`).catch(u=>t(u))}}).catch(e=>{throw xd=null,e})}var xd=null;function nj(n){return xd=xd||tj(n),xd}var rj=new Gi(5e3,15e3),ij="__/auth/iframe",oj="emulator/auth/iframe",sj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cj(n){let e=n.config;W(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Uy(e,oj):`https://${n.config.authDomain}/${ij}`,r={apiKey:e.apiKey,appName:n.name,v:Ur},i=aj.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${pc(r).slice(1)}`}function uj(n){return E(this,null,function*(){let e=yield nj(n),t=bn().gapi;return W(t,n,"internal-error"),e.open({where:document.body,url:cj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sj,dontclear:!0},r=>new Promise((i,o)=>E(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Wi(n,"network-request-failed"),c=bn().setTimeout(()=>{o(s)},rj.get());function u(){bn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var lj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dj=500,hj=600,fj="_blank",pj="http://localhost",zd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function gj(n,e,t,r=dj,i=hj){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=Object.assign(Object.assign({},lj),{width:r.toString(),height:i.toString(),top:o,left:s}),l=tt().toLowerCase();t&&(c=kD(l)?fj:t),MD(l)&&(e=e||pj,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,D])=>`${m}${y}=${D},`,"");if(cV(l)&&c!=="_self")return mj(e||"",c),new zd(null);let p=window.open(e||"",c,h);W(p,n,"popup-blocked");try{p.focus()}catch{}return new zd(p)}function mj(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var yj="__/auth/handler",vj="emulator/auth/handler",_j=encodeURIComponent("fac");function ED(n,e,t,r,i,o){return E(this,null,function*(){W(n.config.authDomain,n,"auth-domain-config-required"),W(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ur,eventId:i};if(e instanceof $d){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",kC(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Ny){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let c=s;for(let h of Object.keys(c))c[h]===void 0&&delete c[h];let u=yield n._getAppCheckToken(),l=u?`#${_j}=${encodeURIComponent(u)}`:"";return`${Ij(n)}?${pc(c).slice(1)}${l}`})}function Ij({config:n}){return n.emulator?Uy(n,vj):`https://${n.authDomain}/${yj}`}var wy="webStorageSupport",Fy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zy,this._completeRedirectFn=WV,this._overrideRedirectResult=HV}_openPopup(e,t,r,i){return E(this,null,function*(){var o;Gr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield ED(e,t,r,Ty(),i);return gj(e,s,zD())})}_openRedirect(e,t,r,i){return E(this,null,function*(){yield this._originValidation(e);let o=yield ED(e,t,r,Ty(),i);return DV(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Gr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return E(this,null,function*(){let t=yield uj(e),r=new Ly(e);return t.register("authEvent",i=>(W(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wy,{type:wy},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[wy];s!==void 0&&t(!!s),Wr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ZV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jD()||xD()||zy()}},JD=Fy;var wD="@firebase/auth",TD="1.10.8";var Vy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return E(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Ej(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wj(n){hn(new wt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;W(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UD(n)},l=new Ry(r,i,o,u);return gV(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),hn(new wt("auth-internal",e=>{let t=Wy(e.getProvider("auth").getImmediate());return(r=>new Vy(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xe(wD,TD,Ej(n)),xe(wD,TD,"esm2017")}var Tj=300,bj=Jm("authIdTokenMaxAge")||Tj,bD=null,Sj=n=>e=>E(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>bj)return;let i=t?.token;bD!==i&&(bD=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Xy(n=Bi()){let e=as(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Ky(n,{popupRedirectResolver:JD,persistence:[QD,qD,Zy]}),r=Jm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=Sj(o.toString());Jy(t,s,()=>s(t.currentUser)),Yy(t,c=>s(c))}}let i=Qm("auth");return i&&Qy(t,`http://${i}`),t}function Cj(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}hV({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Wi("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",Cj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wj("Browser");var ZD="auth",Cc=class{constructor(e){return e}},Dc=class{constructor(){return us(ZD)}};var ev=new U("angularfire2.auth-instances");function _U(n,e){let t=yc(ZD,n,e);return t&&new Cc(t)}function IU(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Cc(r)}}var EU={provide:Dc,deps:[[new Ot,ev]]},wU={provide:Cc,useFactory:_U,deps:[[new Ot,ev],er]};function XD(n,...e){return xe("angularfire",$r.full,"auth"),rn([wU,EU,{provide:ev,useFactory:IU(n),multi:!0,deps:[ve,Ke,Br,qi,[new Ot,ls],...e]}])}var eA=Ut(Xy,!0);var tA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nA={};var rr,tv;(function(){var n;function e(T,v){function I(){}I.prototype=v.prototype,T.D=v.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(w,b,C){for(var _=Array(arguments.length-2),Mn=2;Mn<arguments.length;Mn++)_[Mn-2]=arguments[Mn];return v.prototype[b].apply(w,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,I){I||(I=0);var w=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)w[b]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(b=0;16>b;++b)w[b]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=T.g[0],I=T.g[1],b=T.g[2];var C=T.g[3],_=v+(C^I&(b^C))+w[0]+3614090360&4294967295;v=I+(_<<7&4294967295|_>>>25),_=C+(b^v&(I^b))+w[1]+3905402710&4294967295,C=v+(_<<12&4294967295|_>>>20),_=b+(I^C&(v^I))+w[2]+606105819&4294967295,b=C+(_<<17&4294967295|_>>>15),_=I+(v^b&(C^v))+w[3]+3250441966&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(C^I&(b^C))+w[4]+4118548399&4294967295,v=I+(_<<7&4294967295|_>>>25),_=C+(b^v&(I^b))+w[5]+1200080426&4294967295,C=v+(_<<12&4294967295|_>>>20),_=b+(I^C&(v^I))+w[6]+2821735955&4294967295,b=C+(_<<17&4294967295|_>>>15),_=I+(v^b&(C^v))+w[7]+4249261313&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(C^I&(b^C))+w[8]+1770035416&4294967295,v=I+(_<<7&4294967295|_>>>25),_=C+(b^v&(I^b))+w[9]+2336552879&4294967295,C=v+(_<<12&4294967295|_>>>20),_=b+(I^C&(v^I))+w[10]+4294925233&4294967295,b=C+(_<<17&4294967295|_>>>15),_=I+(v^b&(C^v))+w[11]+2304563134&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(C^I&(b^C))+w[12]+1804603682&4294967295,v=I+(_<<7&4294967295|_>>>25),_=C+(b^v&(I^b))+w[13]+4254626195&4294967295,C=v+(_<<12&4294967295|_>>>20),_=b+(I^C&(v^I))+w[14]+2792965006&4294967295,b=C+(_<<17&4294967295|_>>>15),_=I+(v^b&(C^v))+w[15]+1236535329&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(b^C&(I^b))+w[1]+4129170786&4294967295,v=I+(_<<5&4294967295|_>>>27),_=C+(I^b&(v^I))+w[6]+3225465664&4294967295,C=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(C^v))+w[11]+643717713&4294967295,b=C+(_<<14&4294967295|_>>>18),_=I+(C^v&(b^C))+w[0]+3921069994&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(b^C&(I^b))+w[5]+3593408605&4294967295,v=I+(_<<5&4294967295|_>>>27),_=C+(I^b&(v^I))+w[10]+38016083&4294967295,C=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(C^v))+w[15]+3634488961&4294967295,b=C+(_<<14&4294967295|_>>>18),_=I+(C^v&(b^C))+w[4]+3889429448&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(b^C&(I^b))+w[9]+568446438&4294967295,v=I+(_<<5&4294967295|_>>>27),_=C+(I^b&(v^I))+w[14]+3275163606&4294967295,C=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(C^v))+w[3]+4107603335&4294967295,b=C+(_<<14&4294967295|_>>>18),_=I+(C^v&(b^C))+w[8]+1163531501&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(b^C&(I^b))+w[13]+2850285829&4294967295,v=I+(_<<5&4294967295|_>>>27),_=C+(I^b&(v^I))+w[2]+4243563512&4294967295,C=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(C^v))+w[7]+1735328473&4294967295,b=C+(_<<14&4294967295|_>>>18),_=I+(C^v&(b^C))+w[12]+2368359562&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(I^b^C)+w[5]+4294588738&4294967295,v=I+(_<<4&4294967295|_>>>28),_=C+(v^I^b)+w[8]+2272392833&4294967295,C=v+(_<<11&4294967295|_>>>21),_=b+(C^v^I)+w[11]+1839030562&4294967295,b=C+(_<<16&4294967295|_>>>16),_=I+(b^C^v)+w[14]+4259657740&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(I^b^C)+w[1]+2763975236&4294967295,v=I+(_<<4&4294967295|_>>>28),_=C+(v^I^b)+w[4]+1272893353&4294967295,C=v+(_<<11&4294967295|_>>>21),_=b+(C^v^I)+w[7]+4139469664&4294967295,b=C+(_<<16&4294967295|_>>>16),_=I+(b^C^v)+w[10]+3200236656&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(I^b^C)+w[13]+681279174&4294967295,v=I+(_<<4&4294967295|_>>>28),_=C+(v^I^b)+w[0]+3936430074&4294967295,C=v+(_<<11&4294967295|_>>>21),_=b+(C^v^I)+w[3]+3572445317&4294967295,b=C+(_<<16&4294967295|_>>>16),_=I+(b^C^v)+w[6]+76029189&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(I^b^C)+w[9]+3654602809&4294967295,v=I+(_<<4&4294967295|_>>>28),_=C+(v^I^b)+w[12]+3873151461&4294967295,C=v+(_<<11&4294967295|_>>>21),_=b+(C^v^I)+w[15]+530742520&4294967295,b=C+(_<<16&4294967295|_>>>16),_=I+(b^C^v)+w[2]+3299628645&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(b^(I|~C))+w[0]+4096336452&4294967295,v=I+(_<<6&4294967295|_>>>26),_=C+(I^(v|~b))+w[7]+1126891415&4294967295,C=v+(_<<10&4294967295|_>>>22),_=b+(v^(C|~I))+w[14]+2878612391&4294967295,b=C+(_<<15&4294967295|_>>>17),_=I+(C^(b|~v))+w[5]+4237533241&4294967295,I=b+(_<<21&4294967295|_>>>11),_=v+(b^(I|~C))+w[12]+1700485571&4294967295,v=I+(_<<6&4294967295|_>>>26),_=C+(I^(v|~b))+w[3]+2399980690&4294967295,C=v+(_<<10&4294967295|_>>>22),_=b+(v^(C|~I))+w[10]+4293915773&4294967295,b=C+(_<<15&4294967295|_>>>17),_=I+(C^(b|~v))+w[1]+2240044497&4294967295,I=b+(_<<21&4294967295|_>>>11),_=v+(b^(I|~C))+w[8]+1873313359&4294967295,v=I+(_<<6&4294967295|_>>>26),_=C+(I^(v|~b))+w[15]+4264355552&4294967295,C=v+(_<<10&4294967295|_>>>22),_=b+(v^(C|~I))+w[6]+2734768916&4294967295,b=C+(_<<15&4294967295|_>>>17),_=I+(C^(b|~v))+w[13]+1309151649&4294967295,I=b+(_<<21&4294967295|_>>>11),_=v+(b^(I|~C))+w[4]+4149444226&4294967295,v=I+(_<<6&4294967295|_>>>26),_=C+(I^(v|~b))+w[11]+3174756917&4294967295,C=v+(_<<10&4294967295|_>>>22),_=b+(v^(C|~I))+w[2]+718787259&4294967295,b=C+(_<<15&4294967295|_>>>17),_=I+(C^(b|~v))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(b+(_<<21&4294967295|_>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+C&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var I=v-this.blockSize,w=this.B,b=this.h,C=0;C<v;){if(b==0)for(;C<=I;)i(this,T,C),C+=this.blockSize;if(typeof T=="string"){for(;C<v;)if(w[b++]=T.charCodeAt(C++),b==this.blockSize){i(this,w),b=0;break}}else for(;C<v;)if(w[b++]=T[C++],b==this.blockSize){i(this,w),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var I=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=I&255,I/=256;for(this.u(T),T=Array(16),v=I=0;4>v;++v)for(var w=0;32>w;w+=8)T[I++]=this.g[v]>>>w&255;return T};function o(T,v){var I=c;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=v(T)}function s(T,v){this.h=v;for(var I=[],w=!0,b=T.length-1;0<=b;b--){var C=T[b]|0;w&&C==v||(I[b]=C,w=!1)}this.g=I}var c={};function u(T){return-128<=T&&128>T?o(T,function(v){return new s([v|0],0>v?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return R(l(-T));for(var v=[],I=1,w=0;T>=I;w++)v[w]=T/I|0,I*=4294967296;return new s(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return R(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),w=p,b=0;b<T.length;b+=8){var C=Math.min(8,T.length-b),_=parseInt(T.substring(b,b+C),v);8>C?(C=l(Math.pow(v,C)),w=w.j(C).add(l(_))):(w=w.j(I),w=w.add(l(_)))}return w}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(N(this))return-R(this).m();for(var T=0,v=1,I=0;I<this.g.length;I++){var w=this.i(I);T+=(0<=w?w:4294967296+w)*v,v*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(D(this))return"0";if(N(this))return"-"+R(this).toString(T);for(var v=l(Math.pow(T,6)),I=this,w="";;){var b=Ie(I,v).g;I=O(I,b.j(v));var C=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=b,D(I))return C+w;for(;6>C.length;)C="0"+C;w=C+w}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function D(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function N(T){return T.h==-1}n.l=function(T){return T=O(this,T),N(T)?-1:D(T)?0:1};function R(T){for(var v=T.g.length,I=[],w=0;w<v;w++)I[w]=~T.g[w];return new s(I,~T.h).add(m)}n.abs=function(){return N(this)?R(this):this},n.add=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0,b=0;b<=v;b++){var C=w+(this.i(b)&65535)+(T.i(b)&65535),_=(C>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);w=_>>>16,C&=65535,_&=65535,I[b]=_<<16|C}return new s(I,I[I.length-1]&-2147483648?-1:0)};function O(T,v){return T.add(R(v))}n.j=function(T){if(D(this)||D(T))return p;if(N(this))return N(T)?R(this).j(R(T)):R(R(this).j(T));if(N(T))return R(this.j(R(T)));if(0>this.l(y)&&0>T.l(y))return l(this.m()*T.m());for(var v=this.g.length+T.g.length,I=[],w=0;w<2*v;w++)I[w]=0;for(w=0;w<this.g.length;w++)for(var b=0;b<T.g.length;b++){var C=this.i(w)>>>16,_=this.i(w)&65535,Mn=T.i(b)>>>16,js=T.i(b)&65535;I[2*w+2*b]+=_*js,$(I,2*w+2*b),I[2*w+2*b+1]+=C*js,$(I,2*w+2*b+1),I[2*w+2*b+1]+=_*Mn,$(I,2*w+2*b+1),I[2*w+2*b+2]+=C*Mn,$(I,2*w+2*b+2)}for(w=0;w<v;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=v;w<2*v;w++)I[w]=0;return new s(I,0)};function $(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function G(T,v){this.g=T,this.h=v}function Ie(T,v){if(D(v))throw Error("division by zero");if(D(T))return new G(p,p);if(N(T))return v=Ie(R(T),v),new G(R(v.g),R(v.h));if(N(v))return v=Ie(T,R(v)),new G(R(v.g),v.h);if(30<T.g.length){if(N(T)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var I=m,w=v;0>=w.l(T);)I=vt(I),w=vt(w);var b=ye(I,1),C=ye(w,1);for(w=ye(w,2),I=ye(I,2);!D(w);){var _=C.add(w);0>=_.l(T)&&(b=b.add(I),C=_),w=ye(w,1),I=ye(I,1)}return v=O(T,b.j(v)),new G(b,v)}for(b=p;0<=T.l(v);){for(I=Math.max(1,Math.floor(T.m()/v.m())),w=Math.ceil(Math.log(I)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),C=l(I),_=C.j(v);N(_)||0<_.l(T);)I-=w,C=l(I),_=C.j(v);D(C)&&(C=m),b=b.add(C),T=O(T,_)}return new G(b,T)}n.A=function(T){return Ie(this,T).h},n.and=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)&T.i(w);return new s(I,this.h&T.h)},n.or=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)|T.i(w);return new s(I,this.h|T.h)},n.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)^T.i(w);return new s(I,this.h^T.h)};function vt(T){for(var v=T.g.length+1,I=[],w=0;w<v;w++)I[w]=T.i(w)<<1|T.i(w-1)>>>31;return new s(I,T.h)}function ye(T,v){var I=v>>5;v%=32;for(var w=T.g.length-I,b=[],C=0;C<w;C++)b[C]=0<v?T.i(C+I)>>>v|T.i(C+I+1)<<32-v:T.i(C+I);return new s(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,tv=nA.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,rr=nA.Integer=s}).apply(typeof tA<"u"?tA:typeof self<"u"?self:typeof window<"u"?window:{});var Gd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ir={};var nv,TU,hs,rv,Ac,Kd,iv,ov,sv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gd=="object"&&Gd];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var S=a[g];if(!(S in f))break e;f=f[S]}a=a[a.length-1],g=f[a],d=d(g),d!=g&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function o(a,d){a instanceof String&&(a+="");var f=0,g=!1,S={next:function(){if(!g&&f<a.length){var A=f++;return{value:d(A,a[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return S[Symbol.iterator]=function(){return S},S}i("Array.prototype.values",function(a){return a||function(){return o(this,function(d,f){return f})}});var s=s||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function l(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function h(a,d,f){return a.call.apply(a.bind,arguments)}function p(a,d,f){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var S=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(S,g),a.apply(d,S)}}return function(){return a.apply(d,arguments)}}function m(a,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function D(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(g,S,A){for(var k=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)k[Ee-2]=arguments[Ee];return d.prototype[S].apply(g,k)}}function N(a){let d=a.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=a[g];return f}return[]}function R(a,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let S=a.length||0,A=g.length||0;a.length=S+A;for(let k=0;k<A;k++)a[S+k]=g[k]}else a.push(g)}}class O{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function $(a){return/^[\s\xa0]*$/.test(a)}function G(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function Ie(a){return Ie[" "](a),a}Ie[" "]=function(){};var vt=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function ye(a,d,f){for(let g in a)d.call(f,a[g],g,a)}function T(a,d){for(let f in a)d.call(void 0,a[f],f,a)}function v(a){let d={};for(let f in a)d[f]=a[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,d){let f,g;for(let S=1;S<arguments.length;S++){g=arguments[S];for(f in g)a[f]=g[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function b(a){var d=1;a=a.split(":");let f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function C(a){c.setTimeout(()=>{throw a},0)}function _(){var a=Kh;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Mn{constructor(){this.h=this.g=null}add(d,f){let g=js.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var js=new O(()=>new FN,a=>a.reset());class FN{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Us,$s=!1,Kh=new Mn,SI=()=>{let a=c.Promise.resolve(void 0);Us=()=>{a.then(VN)}};var VN=()=>{for(var a;a=_();){try{a.h.call(a.g)}catch(f){C(f)}var d=js;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}$s=!1};function hr(){this.s=this.s,this.C=this.C}hr.prototype.s=!1,hr.prototype.ma=function(){this.s||(this.s=!0,this.N())},hr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ut(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}ut.prototype.h=function(){this.defaultPrevented=!0};var jN=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};c.addEventListener("test",f,d),c.removeEventListener("test",f,d)}catch{}return a})();function Bs(a,d){if(ut.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(vt){e:{try{Ie(d.nodeName);var S=!0;break e}catch{}S=!1}S||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:UN[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Bs.aa.h.call(this)}}D(Bs,ut);var UN={2:"touch",3:"pen",4:"mouse"};Bs.prototype.h=function(){Bs.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Hs="closure_listenable_"+(1e6*Math.random()|0),$N=0;function BN(a,d,f,g,S){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=S,this.key=++$N,this.da=this.fa=!1}function Kc(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Qc(a){this.src=a,this.g={},this.h=0}Qc.prototype.add=function(a,d,f,g,S){var A=a.toString();a=this.g[A],a||(a=this.g[A]=[],this.h++);var k=Yh(a,d,g,S);return-1<k?(d=a[k],f||(d.fa=!1)):(d=new BN(d,this.src,A,!!g,S),d.fa=f,a.push(d)),d};function Qh(a,d){var f=d.type;if(f in a.g){var g=a.g[f],S=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=S)&&Array.prototype.splice.call(g,S,1),A&&(Kc(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Yh(a,d,f,g){for(var S=0;S<a.length;++S){var A=a[S];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return S}return-1}var Jh="closure_lm_"+(1e6*Math.random()|0),Zh={};function CI(a,d,f,g,S){if(g&&g.once)return AI(a,d,f,g,S);if(Array.isArray(d)){for(var A=0;A<d.length;A++)CI(a,d[A],f,g,S);return null}return f=nf(f),a&&a[Hs]?a.K(d,f,l(g)?!!g.capture:!!g,S):DI(a,d,f,!1,g,S)}function DI(a,d,f,g,S,A){if(!d)throw Error("Invalid event type");var k=l(S)?!!S.capture:!!S,Ee=ef(a);if(Ee||(a[Jh]=Ee=new Qc(a)),f=Ee.add(d,f,g,k,A),f.proxy)return f;if(g=HN(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)jN||(S=k),S===void 0&&(S=!1),a.addEventListener(d.toString(),g,S);else if(a.attachEvent)a.attachEvent(NI(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function HN(){function a(f){return d.call(a.src,a.listener,f)}let d=qN;return a}function AI(a,d,f,g,S){if(Array.isArray(d)){for(var A=0;A<d.length;A++)AI(a,d[A],f,g,S);return null}return f=nf(f),a&&a[Hs]?a.L(d,f,l(g)?!!g.capture:!!g,S):DI(a,d,f,!0,g,S)}function RI(a,d,f,g,S){if(Array.isArray(d))for(var A=0;A<d.length;A++)RI(a,d[A],f,g,S);else g=l(g)?!!g.capture:!!g,f=nf(f),a&&a[Hs]?(a=a.i,d=String(d).toString(),d in a.g&&(A=a.g[d],f=Yh(A,f,g,S),-1<f&&(Kc(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete a.g[d],a.h--)))):a&&(a=ef(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Yh(d,f,g,S)),(f=-1<a?d[a]:null)&&Xh(f))}function Xh(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Hs])Qh(d.i,a);else{var f=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(f,g,a.capture):d.detachEvent?d.detachEvent(NI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=ef(d))?(Qh(f,a),f.h==0&&(f.src=null,d[Jh]=null)):Kc(a)}}}function NI(a){return a in Zh?Zh[a]:Zh[a]="on"+a}function qN(a,d){if(a.da)a=!0;else{d=new Bs(d,this);var f=a.listener,g=a.ha||a.src;a.fa&&Xh(a),a=f.call(g,d)}return a}function ef(a){return a=a[Jh],a instanceof Qc?a:null}var tf="__closure_events_fn_"+(1e9*Math.random()>>>0);function nf(a){return typeof a=="function"?a:(a[tf]||(a[tf]=function(d){return a.handleEvent(d)}),a[tf])}function lt(){hr.call(this),this.i=new Qc(this),this.M=this,this.F=null}D(lt,hr),lt.prototype[Hs]=!0,lt.prototype.removeEventListener=function(a,d,f,g){RI(this,a,d,f,g)};function _t(a,d){var f,g=a.F;if(g)for(f=[];g;g=g.F)f.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new ut(d,a);else if(d instanceof ut)d.target=d.target||a;else{var S=d;d=new ut(g,a),w(d,S)}if(S=!0,f)for(var A=f.length-1;0<=A;A--){var k=d.g=f[A];S=Yc(k,g,!0,d)&&S}if(k=d.g=a,S=Yc(k,g,!0,d)&&S,S=Yc(k,g,!1,d)&&S,f)for(A=0;A<f.length;A++)k=d.g=f[A],S=Yc(k,g,!1,d)&&S}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],g=0;g<f.length;g++)Kc(f[g]);delete a.g[d],a.h--}}this.F=null},lt.prototype.K=function(a,d,f,g){return this.i.add(String(a),d,!1,f,g)},lt.prototype.L=function(a,d,f,g){return this.i.add(String(a),d,!0,f,g)};function Yc(a,d,f,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var S=!0,A=0;A<d.length;++A){var k=d[A];if(k&&!k.da&&k.capture==f){var Ee=k.listener,ot=k.ha||k.src;k.fa&&Qh(a.i,k),S=Ee.call(ot,g)!==!1&&S}}return S&&!g.defaultPrevented}function PI(a,d,f){if(typeof a=="function")f&&(a=m(a,f));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function MI(a){a.g=PI(()=>{a.g=null,a.i&&(a.i=!1,MI(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class zN extends hr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:MI(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qs(a){hr.call(this),this.h=a,this.g={}}D(qs,hr);var xI=[];function kI(a){ye(a.g,function(d,f){this.g.hasOwnProperty(f)&&Xh(d)},a),a.g={}}qs.prototype.N=function(){qs.aa.N.call(this),kI(this)},qs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rf=c.JSON.stringify,WN=c.JSON.parse,GN=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function of(){}of.prototype.h=null;function OI(a){return a.h||(a.h=a.i())}function LI(){}var zs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function sf(){ut.call(this,"d")}D(sf,ut);function af(){ut.call(this,"c")}D(af,ut);var oi={},FI=null;function Jc(){return FI=FI||new lt}oi.La="serverreachability";function VI(a){ut.call(this,oi.La,a)}D(VI,ut);function Ws(a){let d=Jc();_t(d,new VI(d))}oi.STAT_EVENT="statevent";function jI(a,d){ut.call(this,oi.STAT_EVENT,a),this.stat=d}D(jI,ut);function It(a){let d=Jc();_t(d,new jI(d,a))}oi.Ma="timingevent";function UI(a,d){ut.call(this,oi.Ma,a),this.size=d}D(UI,ut);function Gs(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function Ks(){this.g=!0}Ks.prototype.xa=function(){this.g=!1};function KN(a,d,f,g,S,A){a.info(function(){if(a.g)if(A)for(var k="",Ee=A.split("&"),ot=0;ot<Ee.length;ot++){var fe=Ee[ot].split("=");if(1<fe.length){var dt=fe[0];fe=fe[1];var ht=dt.split("_");k=2<=ht.length&&ht[1]=="type"?k+(dt+"="+fe+"&"):k+(dt+"=redacted&")}}else k=null;else k=A;return"XMLHTTP REQ ("+g+") [attempt "+S+"]: "+d+`
`+f+`
`+k})}function QN(a,d,f,g,S,A,k){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+S+"]: "+d+`
`+f+`
`+A+" "+k})}function ao(a,d,f,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+JN(a,f)+(g?" "+g:"")})}function YN(a,d){a.info(function(){return"TIMEOUT: "+d})}Ks.prototype.info=function(){};function JN(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var g=f[a];if(!(2>g.length)){var S=g[1];if(Array.isArray(S)&&!(1>S.length)){var A=S[0];if(A!="noop"&&A!="stop"&&A!="close")for(var k=1;k<S.length;k++)S[k]=""}}}}return rf(f)}catch{return d}}var Zc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$I={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},cf;function Xc(){}D(Xc,of),Xc.prototype.g=function(){return new XMLHttpRequest},Xc.prototype.i=function(){return{}},cf=new Xc;function fr(a,d,f,g){this.j=a,this.i=d,this.l=f,this.R=g||1,this.U=new qs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new BI}function BI(){this.i=null,this.g="",this.h=!1}var HI={},uf={};function lf(a,d,f){a.L=1,a.v=ru(xn(d)),a.m=f,a.P=!0,qI(a,null)}function qI(a,d){a.F=Date.now(),eu(a),a.A=xn(a.v);var f=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),iE(f.i,"t",g),a.C=0,f=a.j.J,a.h=new BI,a.g=wE(a.j,f?d:null,!a.m),0<a.O&&(a.M=new zN(m(a.Y,a,a.g),a.O)),d=a.U,f=a.g,g=a.ca;var S="readystatechange";Array.isArray(S)||(S&&(xI[0]=S.toString()),S=xI);for(var A=0;A<S.length;A++){var k=CI(f,S[A],g||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Ws(),KN(a.i,a.u,a.A,a.l,a.R,a.m)}fr.prototype.ca=function(a){a=a.target;let d=this.M;d&&kn(a)==3?d.j():this.Y(a)},fr.prototype.Y=function(a){try{if(a==this.g)e:{let ht=kn(this.g);var d=this.g.Ba();let lo=this.g.Z();if(!(3>ht)&&(ht!=3||this.g&&(this.h.h||this.g.oa()||dE(this.g)))){this.J||ht!=4||d==7||(d==8||0>=lo?Ws(3):Ws(2)),df(this);var f=this.g.Z();this.X=f;t:if(zI(this)){var g=dE(this.g);a="";var S=g.length,A=kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){si(this),Qs(this);var k="";break t}this.h.i=new c.TextDecoder}for(d=0;d<S;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(A&&d==S-1)});g.length=0,this.h.g+=a,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=f==200,QN(this.i,this.u,this.A,this.l,this.R,ht,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,ot=this.g;if((Ee=ot.g?ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Ee)){var fe=Ee;break t}}fe=null}if(f=fe)ao(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hf(this,f);else{this.o=!1,this.s=3,It(12),si(this),Qs(this);break e}}if(this.P){f=!0;let tn;for(;!this.J&&this.C<k.length;)if(tn=ZN(this,k),tn==uf){ht==4&&(this.s=4,It(14),f=!1),ao(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==HI){this.s=4,It(15),ao(this.i,this.l,k,"[Invalid Chunk]"),f=!1;break}else ao(this.i,this.l,tn,null),hf(this,tn);if(zI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ht!=4||k.length!=0||this.h.h||(this.s=1,It(16),f=!1),this.o=this.o&&f,!f)ao(this.i,this.l,k,"[Invalid Chunked Response]"),si(this),Qs(this);else if(0<k.length&&!this.W){this.W=!0;var dt=this.j;dt.g==this&&dt.ba&&!dt.M&&(dt.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),vf(dt),dt.M=!0,It(11))}}else ao(this.i,this.l,k,null),hf(this,k);ht==4&&si(this),this.o&&!this.J&&(ht==4?vE(this.j,this):(this.o=!1,eu(this)))}else g0(this.g),f==400&&0<k.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),si(this),Qs(this)}}}catch{}finally{}};function zI(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function ZN(a,d){var f=a.C,g=d.indexOf(`
`,f);return g==-1?uf:(f=Number(d.substring(f,g)),isNaN(f)?HI:(g+=1,g+f>d.length?uf:(d=d.slice(g,g+f),a.C=g+f,d)))}fr.prototype.cancel=function(){this.J=!0,si(this)};function eu(a){a.S=Date.now()+a.I,WI(a,a.I)}function WI(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Gs(m(a.ba,a),d)}function df(a){a.B&&(c.clearTimeout(a.B),a.B=null)}fr.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(YN(this.i,this.A),this.L!=2&&(Ws(),It(17)),si(this),this.s=2,Qs(this)):WI(this,this.S-a)};function Qs(a){a.j.G==0||a.J||vE(a.j,a)}function si(a){df(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,kI(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function hf(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||ff(f.h,a))){if(!a.K&&ff(f.h,a)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var S=g;if(S[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)cu(f),su(f);else break e;yf(f),It(18)}}else f.za=S[1],0<f.za-f.T&&37500>S[2]&&f.F&&f.v==0&&!f.C&&(f.C=Gs(m(f.Za,f),6e3));if(1>=QI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ci(f,11)}else if((a.K||f.g==a)&&cu(f),!$(d))for(S=f.Da.g.parse(d),d=0;d<S.length;d++){let fe=S[d];if(f.T=fe[0],fe=fe[1],f.G==2)if(fe[0]=="c"){f.K=fe[1],f.ia=fe[2];let dt=fe[3];dt!=null&&(f.la=dt,f.j.info("VER="+f.la));let ht=fe[4];ht!=null&&(f.Aa=ht,f.j.info("SVER="+f.Aa));let lo=fe[5];lo!=null&&typeof lo=="number"&&0<lo&&(g=1.5*lo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let tn=a.g;if(tn){let lu=tn.g?tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(lu){var A=g.h;A.g||lu.indexOf("spdy")==-1&&lu.indexOf("quic")==-1&&lu.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(pf(A,A.h),A.h=null))}if(g.D){let _f=tn.g?tn.g.getResponseHeader("X-HTTP-Session-Id"):null;_f&&(g.ya=_f,be(g.I,g.D,_f))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var k=a;if(g.qa=EE(g,g.J?g.ia:null,g.W),k.K){YI(g.h,k);var Ee=k,ot=g.L;ot&&(Ee.I=ot),Ee.B&&(df(Ee),eu(Ee)),g.g=k}else mE(g);0<f.i.length&&au(f)}else fe[0]!="stop"&&fe[0]!="close"||ci(f,7);else f.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?ci(f,7):mf(f):fe[0]!="noop"&&f.l&&f.l.ta(fe),f.v=0)}}Ws(4)}catch{}}var XN=class{constructor(a,d){this.g=a,this.map=d}};function GI(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function KI(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function QI(a){return a.h?1:a.g?a.g.size:0}function ff(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function pf(a,d){a.g?a.g.add(d):a.h=d}function YI(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}GI.prototype.cancel=function(){if(this.i=JI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function JI(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let f of a.g.values())d=d.concat(f.D);return d}return N(a.i)}function e0(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],f=a.length,g=0;g<f;g++)d.push(a[g]);return d}d=[],f=0;for(g in a)d[f++]=a[g];return d}function t0(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(let g in a)d[f++]=g;return d}}}function ZI(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=t0(a),g=e0(a),S=g.length,A=0;A<S;A++)d.call(void 0,g[A],f&&f[A],a)}var XI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function n0(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var g=a[f].indexOf("="),S=null;if(0<=g){var A=a[f].substring(0,g);S=a[f].substring(g+1)}else A=a[f];d(A,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function ai(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof ai){this.h=a.h,tu(this,a.j),this.o=a.o,this.g=a.g,nu(this,a.s),this.l=a.l;var d=a.i,f=new Zs;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),eE(this,f),this.m=a.m}else a&&(d=String(a).match(XI))?(this.h=!1,tu(this,d[1]||"",!0),this.o=Ys(d[2]||""),this.g=Ys(d[3]||"",!0),nu(this,d[4]),this.l=Ys(d[5]||"",!0),eE(this,d[6]||"",!0),this.m=Ys(d[7]||"")):(this.h=!1,this.i=new Zs(null,this.h))}ai.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Js(d,tE,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Js(d,tE,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Js(f,f.charAt(0)=="/"?o0:i0,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Js(f,a0)),a.join("")};function xn(a){return new ai(a)}function tu(a,d,f){a.j=f?Ys(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function nu(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function eE(a,d,f){d instanceof Zs?(a.i=d,c0(a.i,a.h)):(f||(d=Js(d,s0)),a.i=new Zs(d,a.h))}function be(a,d,f){a.i.set(d,f)}function ru(a){return be(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ys(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Js(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,r0),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function r0(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var tE=/[#\/\?@]/g,i0=/[#\?:]/g,o0=/[#\?]/g,s0=/[#\?@]/g,a0=/#/g;function Zs(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function pr(a){a.g||(a.g=new Map,a.h=0,a.i&&n0(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Zs.prototype,n.add=function(a,d){pr(this),this.i=null,a=co(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function nE(a,d){pr(a),d=co(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function rE(a,d){return pr(a),d=co(a,d),a.g.has(d)}n.forEach=function(a,d){pr(this),this.g.forEach(function(f,g){f.forEach(function(S){a.call(d,S,g,this)},this)},this)},n.na=function(){pr(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let S=a[g];for(let A=0;A<S.length;A++)f.push(d[g])}return f},n.V=function(a){pr(this);let d=[];if(typeof a=="string")rE(this,a)&&(d=d.concat(this.g.get(co(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},n.set=function(a,d){return pr(this),this.i=null,a=co(this,a),rE(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},n.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function iE(a,d,f){nE(a,d),0<f.length&&(a.i=null,a.g.set(co(a,d),N(f)),a.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),k=this.V(g);for(g=0;g<k.length;g++){var S=A;k[g]!==""&&(S+="="+encodeURIComponent(String(k[g]))),a.push(S)}}return this.i=a.join("&")};function co(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function c0(a,d){d&&!a.j&&(pr(a),a.i=null,a.g.forEach(function(f,g){var S=g.toLowerCase();g!=S&&(nE(this,g),iE(this,S,f))},a)),a.j=d}function u0(a,d){let f=new Ks;if(c.Image){let g=new Image;g.onload=y(gr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(gr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(gr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(gr,f,"TestLoadImage: timeout",!1,d,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function l0(a,d){let f=new Ks,g=new AbortController,S=setTimeout(()=>{g.abort(),gr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(A=>{clearTimeout(S),A.ok?gr(f,"TestPingServer: ok",!0,d):gr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(S),gr(f,"TestPingServer: error",!1,d)})}function gr(a,d,f,g,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),g(f)}catch{}}function d0(){this.g=new GN}function h0(a,d,f){let g=f||"";try{ZI(a,function(S,A){let k=S;l(S)&&(k=rf(S)),d.push(g+A+"="+encodeURIComponent(k))})}catch(S){throw d.push(g+"type="+encodeURIComponent("_badmap")),S}}function Xs(a){this.l=a.Ub||null,this.j=a.eb||!1}D(Xs,of),Xs.prototype.g=function(){return new iu(this.l,this.j)},Xs.prototype.i=(function(a){return function(){return a}})({});function iu(a,d){lt.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(iu,lt),n=iu.prototype,n.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,ta(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ea(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ta(this)),this.g&&(this.readyState=3,ta(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;oE(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function oE(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?ea(this):ta(this),this.readyState==3&&oE(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,ea(this))},n.Qa=function(a){this.g&&(this.response=a,ea(this))},n.ga=function(){this.g&&ea(this)};function ea(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ta(a)}n.setRequestHeader=function(a,d){this.u.append(a,d)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function ta(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(iu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function sE(a){let d="";return ye(a,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function gf(a,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=sE(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):be(a,d,f))}function Re(a){lt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Re,lt);var f0=/^https?$/i,p0=["POST","PUT"];n=Re.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cf.g(),this.v=this.o?OI(this.o):OI(cf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(A){aE(this,A);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var S in g)f.set(S,g[S]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),S=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(p0,d,void 0))||g||S||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,k]of f)this.g.setRequestHeader(A,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lE(this),this.u=!0,this.g.send(a),this.u=!1}catch(A){aE(this,A)}};function aE(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,cE(a),ou(a)}function cE(a){a.A||(a.A=!0,_t(a,"complete"),_t(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,_t(this,"complete"),_t(this,"abort"),ou(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ou(this,!0)),Re.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?uE(this):this.bb())},n.bb=function(){uE(this)};function uE(a){if(a.h&&typeof s<"u"&&(!a.v[1]||kn(a)!=4||a.Z()!=2)){if(a.u&&kn(a)==4)PI(a.Ea,0,a);else if(_t(a,"readystatechange"),kn(a)==4){a.h=!1;try{let k=a.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=k===0){var S=String(a.D).match(XI)[1]||null;!S&&c.self&&c.self.location&&(S=c.self.location.protocol.slice(0,-1)),g=!f0.test(S?S.toLowerCase():"")}f=g}if(f)_t(a,"complete"),_t(a,"success");else{a.m=6;try{var A=2<kn(a)?a.g.statusText:""}catch{A=""}a.l=A+" ["+a.Z()+"]",cE(a)}}finally{ou(a)}}}}function ou(a,d){if(a.g){lE(a);let f=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||_t(a,"ready");try{f.onreadystatechange=g}catch{}}}function lE(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function kn(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<kn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),WN(d)}};function dE(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function g0(a){let d={};a=(a.g&&2<=kn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if($(a[g]))continue;var f=b(a[g]);let S=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[S]||[];d[S]=A,A.push(f)}T(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function na(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function hE(a){this.Aa=0,this.i=[],this.j=new Ks,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=na("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=na("baseRetryDelayMs",5e3,a),this.cb=na("retryDelaySeedMs",1e4,a),this.Wa=na("forwardChannelMaxRetries",2,a),this.wa=na("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new GI(a&&a.concurrentRequestLimit),this.Da=new d0,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=hE.prototype,n.la=8,n.G=1,n.connect=function(a,d,f,g){It(0),this.W=a,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=EE(this,null,this.W),au(this)};function mf(a){if(fE(a),a.G==3){var d=a.U++,f=xn(a.I);if(be(f,"SID",a.K),be(f,"RID",d),be(f,"TYPE","terminate"),ra(a,f),d=new fr(a,a.j,d),d.L=2,d.v=ru(xn(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=d.v,f=!0),f||(d.g=wE(d.j,null),d.g.ea(d.v)),d.F=Date.now(),eu(d)}IE(a)}function su(a){a.g&&(vf(a),a.g.cancel(),a.g=null)}function fE(a){su(a),a.u&&(c.clearTimeout(a.u),a.u=null),cu(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function au(a){if(!KI(a.h)&&!a.s){a.s=!0;var d=a.Ga;Us||SI(),$s||(Us(),$s=!0),Kh.add(d,a),a.B=0}}function m0(a,d){return QI(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Gs(m(a.Ga,a,d),_E(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let S=new fr(this,this.j,a),A=this.o;if(this.S&&(A?(A=v(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(S.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=gE(this,S,d),f=xn(this.I),be(f,"RID",a),be(f,"CVER",22),this.D&&be(f,"X-HTTP-Session-Id",this.D),ra(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(sE(A)))+"&"+d:this.m&&gf(f,this.m,A)),pf(this.h,S),this.Ua&&be(f,"TYPE","init"),this.P?(be(f,"$req",d),be(f,"SID","null"),S.T=!0,lf(S,f,null)):lf(S,f,d),this.G=2}}else this.G==3&&(a?pE(this,a):this.i.length==0||KI(this.h)||pE(this))};function pE(a,d){var f;d?f=d.l:f=a.U++;let g=xn(a.I);be(g,"SID",a.K),be(g,"RID",f),be(g,"AID",a.T),ra(a,g),a.m&&a.o&&gf(g,a.m,a.o),f=new fr(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=gE(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),pf(a.h,f),lf(f,g,d)}function ra(a,d){a.H&&ye(a.H,function(f,g){be(d,g,f)}),a.l&&ZI({},function(f,g){be(d,g,f)})}function gE(a,d,f){f=Math.min(a.i.length,f);var g=a.l?m(a.l.Na,a.l,a):null;e:{var S=a.i;let A=-1;for(;;){let k=["count="+f];A==-1?0<f?(A=S[0].g,k.push("ofs="+A)):A=0:k.push("ofs="+A);let Ee=!0;for(let ot=0;ot<f;ot++){let fe=S[ot].g,dt=S[ot].map;if(fe-=A,0>fe)A=Math.max(0,S[ot].g-100),Ee=!1;else try{h0(dt,k,"req"+fe+"_")}catch{g&&g(dt)}}if(Ee){g=k.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,g}function mE(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Us||SI(),$s||(Us(),$s=!0),Kh.add(d,a),a.v=0}}function yf(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Gs(m(a.Fa,a),_E(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,yE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Gs(m(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),su(this),yE(this))};function vf(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function yE(a){a.g=new fr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=xn(a.qa);be(d,"RID","rpc"),be(d,"SID",a.K),be(d,"AID",a.T),be(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&be(d,"TO",a.ja),be(d,"TYPE","xmlhttp"),ra(a,d),a.m&&a.o&&gf(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=ru(xn(d)),f.m=null,f.P=!0,qI(f,a)}n.Za=function(){this.C!=null&&(this.C=null,su(this),yf(this),It(19))};function cu(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function vE(a,d){var f=null;if(a.g==d){cu(a),vf(a),a.g=null;var g=2}else if(ff(a.h,d))f=d.D,YI(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var S=a.B;g=Jc(),_t(g,new UI(g,f)),au(a)}else mE(a);else if(S=d.s,S==3||S==0&&0<d.X||!(g==1&&m0(a,d)||g==2&&yf(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),S){case 1:ci(a,5);break;case 4:ci(a,10);break;case 3:ci(a,6);break;default:ci(a,2)}}}function _E(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function ci(a,d){if(a.j.info("Error code "+d),d==2){var f=m(a.fb,a),g=a.Xa;let S=!g;g=new ai(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||tu(g,"https"),ru(g),S?u0(g.toString(),f):l0(g.toString(),f)}else It(2);a.G=0,a.l&&a.l.sa(d),IE(a),fE(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function IE(a){if(a.G=0,a.ka=[],a.l){let d=JI(a.h);(d.length!=0||a.i.length!=0)&&(R(a.ka,d),R(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function EE(a,d,f){var g=f instanceof ai?xn(f):new ai(f);if(g.g!="")d&&(g.g=d+"."+g.g),nu(g,g.s);else{var S=c.location;g=S.protocol,d=d?d+"."+S.hostname:S.hostname,S=+S.port;var A=new ai(null);g&&tu(A,g),d&&(A.g=d),S&&nu(A,S),f&&(A.l=f),g=A}return f=a.D,d=a.ya,f&&d&&be(g,f,d),be(g,"VER",a.la),ra(a,g),g}function wE(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Re(new Xs({eb:f})):new Re(a.pa),d.Ha(a.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function TE(){}n=TE.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function uu(){}uu.prototype.g=function(a,d){return new Nt(a,d)};function Nt(a,d){lt.call(this),this.g=new hE(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!$(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!$(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new uo(this)}D(Nt,lt),Nt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nt.prototype.close=function(){mf(this.g)},Nt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=rf(a),a=f);d.i.push(new XN(d.Ya++,a)),d.G==3&&au(d)},Nt.prototype.N=function(){this.g.l=null,delete this.j,mf(this.g),delete this.g,Nt.aa.N.call(this)};function bE(a){sf.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}D(bE,sf);function SE(){af.call(this),this.status=1}D(SE,af);function uo(a){this.g=a}D(uo,TE),uo.prototype.ua=function(){_t(this.g,"a")},uo.prototype.ta=function(a){_t(this.g,new bE(a))},uo.prototype.sa=function(a){_t(this.g,new SE)},uo.prototype.ra=function(){_t(this.g,"b")},uu.prototype.createWebChannel=uu.prototype.g,Nt.prototype.send=Nt.prototype.o,Nt.prototype.open=Nt.prototype.m,Nt.prototype.close=Nt.prototype.close,sv=ir.createWebChannelTransport=function(){return new uu},ov=ir.getStatEventTarget=function(){return Jc()},iv=ir.Event=oi,Kd=ir.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zc.NO_ERROR=0,Zc.TIMEOUT=8,Zc.HTTP_ERROR=6,Ac=ir.ErrorCode=Zc,$I.COMPLETE="complete",rv=ir.EventType=$I,LI.EventType=zs,zs.OPEN="a",zs.CLOSE="b",zs.ERROR="c",zs.MESSAGE="d",lt.prototype.listen=lt.prototype.K,hs=ir.WebChannel=LI,TU=ir.FetchXmlHttpFactory=Xs,Re.prototype.listenOnce=Re.prototype.L,Re.prototype.getLastError=Re.prototype.Ka,Re.prototype.getLastErrorCode=Re.prototype.Ba,Re.prototype.getStatus=Re.prototype.Z,Re.prototype.getResponseJson=Re.prototype.Oa,Re.prototype.getResponseText=Re.prototype.oa,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Ha,nv=ir.XhrIo=Re}).apply(typeof Gd<"u"?Gd:typeof self<"u"?self:typeof window<"u"?window:{});var rA="@firebase/firestore",iA="4.8.0";var rt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};rt.UNAUTHENTICATED=new rt(null),rt.GOOGLE_CREDENTIALS=new rt("google-credentials-uid"),rt.FIRST_PARTY=new rt("first-party-uid"),rt.MOCK_USER=new rt("mock-user");var Os="11.10.0";var Xi=new wn("@firebase/firestore");function fs(){return Xi.logLevel}function L(n,...e){if(Xi.logLevel<=oe.DEBUG){let t=e.map(G_);Xi.debug(`Firestore (${Os}): ${n}`,...t)}}function ar(n,...e){if(Xi.logLevel<=oe.ERROR){let t=e.map(G_);Xi.error(`Firestore (${Os}): ${n}`,...t)}}function Xr(n,...e){if(Xi.logLevel<=oe.WARN){let t=e.map(G_);Xi.warn(`Firestore (${Os}): ${n}`,...t)}}function G_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function q(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,KA(n,r,t)}function KA(n,e,t){let r=`FIRESTORE (${Os}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ar(r),new Error(r)}function me(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||KA(e,i,r)}function J(n,e){return n}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends jt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var or=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var th=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},dv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(rt.UNAUTHENTICATED))}shutdown(){}},hv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},fv=class{constructor(e){this.t=e,this.currentUser=rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){me(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new or;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new or,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>E(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new or)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string",31837,{l:r}),new th(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string",2055,{h:e}),new rt(e)}},pv=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=rt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},gv=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new pv(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},nh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},mv=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){me(this.o===void 0,3512);let r=o=>{o.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,L("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new nh(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(me(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new nh(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function bU(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function QA(){return new TextEncoder}var kc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=bU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function re(n,e){return n<e?-1:n>e?1:0}function yv(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return re(r,i);{let o=QA(),s=SU(o.encode(oA(n,t)),o.encode(oA(e,t)));return s!==0?s:re(r,i)}}t+=r>65535?2:1}return re(n.length,e.length)}function oA(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function SU(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return re(n[t],e[t]);return re(n.length,e.length)}function Es(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var sA="__name__",rh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&q(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&q(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return re(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):yv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return rr.fromString(e.substring(4,e.length-2))}},Ae=class n extends rh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},CU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Bt=class n extends rh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return CU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===sA}static keyField(){return new n([sA])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new V(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new V(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new V(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new V(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var H=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ae.fromString(e))}static fromName(e){return new n(Ae.fromString(e).popFirst(5))}static empty(){return new n(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ae.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ae(e.slice()))}};function YA(n,e,t){if(!t)throw new V(P.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function DU(n,e,t,r){if(e===!0&&r===!0)throw new V(P.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function aA(n){if(!H.isDocumentKey(n))throw new V(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function cA(n){if(H.isDocumentKey(n))throw new V(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function JA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function K_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":q(12329,{type:typeof n})}function Kr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new V(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=K_(n);throw new V(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function He(n,e){let t={typeString:n};return e&&(t.value=e),t}function zc(n,e){if(!JA(n))throw new V(P.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new V(P.INVALID_ARGUMENT,t);return!0}var uA=-62135596800,lA=1e6,qe=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*lA);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new V(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new V(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<uA)throw new V(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/lA}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zc(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-uA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};qe._jsonSchemaVersion="firestore/timestamp/1.0",qe._jsonSchema={type:He("string",qe._jsonSchemaVersion),seconds:He("number"),nanoseconds:He("number")};var ee=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new qe(0,0))}static max(){return new n(new qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Oc=-1,vv=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};vv.UNKNOWN_ID=-1;function AU(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new qe(t+1,0):new qe(t,r));return new eo(i,H.empty(),e)}function RU(n){return new eo(n.readTime,n.key,Oc)}var eo=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ee.min(),H.empty(),Oc)}static max(){return new n(ee.max(),H.empty(),Oc)}};function NU(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=H.comparator(n.documentKey,e.documentKey),t!==0?t:re(n.largestBatchId,e.largestBatchId))}var PU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_v=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ls(n){return E(this,null,function*(){if(n.code!==P.FAILED_PRECONDITION||n.message!==PU)throw n;L("LocalStore","Unexpectedly lost primary lease")})}var M=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++c,c===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function MU(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Fs(n){return n.name==="IndexedDbTransactionError"}var Q_=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),Y_=-1;function kh(n){return n==null}function Lc(n){return n===0&&1/n==-1/0}function xU(n){return typeof n=="number"&&Number.isInteger(n)&&!Lc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var ZA="";function kU(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=dA(e)),e=OU(n.get(t),e);return dA(e)}function OU(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case ZA:t+="";break;default:t+=o}}return t}function dA(n){return n+ZA+""}var LU="remoteDocuments",XA="owner";var eR="mutationQueues";var tR="mutations";var nR="documentMutations",FU="remoteDocumentsV14";var rR="remoteDocumentGlobal";var iR="targets";var oR="targetDocuments";var sR="targetGlobal",aR="collectionParents";var cR="clientMetadata";var uR="bundles";var lR="namedQueries";var VU="indexConfiguration";var jU="indexState";var UU="indexEntries";var dR="documentOverlays";var $U="globals";var BU=[eR,tR,nR,LU,iR,XA,sR,oR,cR,rR,aR,uR,lR],Dee=[...BU,dR],HU=[eR,tR,nR,FU,iR,XA,sR,oR,cR,rR,aR,uR,lR,dR],qU=HU,zU=[...qU,VU,jU,UU];var Aee=[...zU,$U];function hA(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ii(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var ke=class n{constructor(e,t){this.comparator=e,this.root=t||Sn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ys(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ys(this.root,e,this.comparator,!1)}getReverseIterator(){return new ys(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ys(this.root,e,this.comparator,!0)}},ys=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Sn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw q(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw q(27949);return e+(this.isRed()?0:1)}};Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1;Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw q(57766)}get value(){throw q(16141)}get color(){throw q(16727)}get left(){throw q(29726)}get right(){throw q(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var it=class n{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ih(this.data.getIterator())}getIteratorFrom(e){return new ih(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},ih=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var en=class n{constructor(e){this.fields=e,e.sort(Bt.comparator)}static empty(){return new n([])}unionWith(e){let t=new it(Bt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Es(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var oh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var yt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new oh("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};yt.EMPTY_BYTE_STRING=new yt("");var WU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cr(n){if(me(!!n,39018),typeof n=="string"){let e=0,t=WU.exec(n);if(me(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(n.seconds),nanos:Ce(n.nanos)}}function Ce(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ur(n){return typeof n=="string"?yt.fromBase64String(n):yt.fromUint8Array(n)}var fR="server_timestamp",pR="__type__",gR="__previous_value__",mR="__local_write_time__";function J_(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[pR])===null||t===void 0?void 0:t.stringValue)===fR}function Oh(n){let e=n.mapValue.fields[gR];return J_(e)?Oh(e):e}function Fc(n){let e=cr(n.mapValue.fields[mR].timestampValue);return new qe(e.seconds,e.nanos)}var Iv=class{constructor(e,t,r,i,o,s,c,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},sh="(default)",ah=class n{constructor(e,t){this.projectId=e,this.database=t||sh}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===sh}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Z_="__type__",yR="__max__",Qd={mapValue:{fields:{__type__:{stringValue:yR}}}},X_="__vector__",ws="value";function ei(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?J_(n)?4:_R(n)?9007199254740991:vR(n)?10:11:q(28295,{value:n})}function An(n,e){if(n===e)return!0;let t=ei(n);if(t!==ei(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Fc(n).isEqual(Fc(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=cr(i.timestampValue),c=cr(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return ur(i.bytesValue).isEqual(ur(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Ce(i.geoPointValue.latitude)===Ce(o.geoPointValue.latitude)&&Ce(i.geoPointValue.longitude)===Ce(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Ce(i.integerValue)===Ce(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ce(i.doubleValue),c=Ce(o.doubleValue);return s===c?Lc(s)===Lc(c):isNaN(s)&&isNaN(c)}return!1})(n,e);case 9:return Es(n.arrayValue.values||[],e.arrayValue.values||[],An);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(hA(s)!==hA(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!An(s[u],c[u])))return!1;return!0})(n,e);default:return q(52216,{left:n})}}function Vc(n,e){return(n.values||[]).find(t=>An(t,e))!==void 0}function Ts(n,e){if(n===e)return 0;let t=ei(n),r=ei(e);if(t!==r)return re(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return re(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let c=Ce(o.integerValue||o.doubleValue),u=Ce(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(n,e);case 3:return fA(n.timestampValue,e.timestampValue);case 4:return fA(Fc(n),Fc(e));case 5:return yv(n.stringValue,e.stringValue);case 6:return(function(o,s){let c=ur(o),u=ur(s);return c.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let c=o.split("/"),u=s.split("/");for(let l=0;l<c.length&&l<u.length;l++){let h=re(c[l],u[l]);if(h!==0)return h}return re(c.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let c=re(Ce(o.latitude),Ce(s.latitude));return c!==0?c:re(Ce(o.longitude),Ce(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return pA(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var c,u,l,h;let p=o.fields||{},m=s.fields||{},y=(c=p[ws])===null||c===void 0?void 0:c.arrayValue,D=(u=m[ws])===null||u===void 0?void 0:u.arrayValue,N=re(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=D?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:pA(y,D)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Qd.mapValue&&s===Qd.mapValue)return 0;if(o===Qd.mapValue)return 1;if(s===Qd.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=yv(u[p],h[p]);if(m!==0)return m;let y=Ts(c[u[p]],l[h[p]]);if(y!==0)return y}return re(u.length,h.length)})(n.mapValue,e.mapValue);default:throw q(23264,{le:t})}}function fA(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return re(n,e);let t=cr(n),r=cr(e),i=re(t.seconds,r.seconds);return i!==0?i:re(t.nanos,r.nanos)}function pA(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ts(t[i],r[i]);if(o)return o}return re(t.length,r.length)}function bs(n){return Ev(n)}function Ev(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=cr(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ur(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return H.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Ev(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Ev(t.fields[s])}`;return i+"}"})(n.mapValue):q(61005,{value:n})}function Zd(n){switch(ei(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Oh(n);return e?16+Zd(e):16;case 5:return 2*n.stringValue.length;case 6:return ur(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Zd(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return ii(r.fields,(o,s)=>{i+=o.length+Zd(s)}),i})(n.mapValue);default:throw q(13486,{value:n})}}function wv(n){return!!n&&"integerValue"in n}function eI(n){return!!n&&"arrayValue"in n}function gA(n){return!!n&&"nullValue"in n}function mA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Xd(n){return!!n&&"mapValue"in n}function vR(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Z_])===null||t===void 0?void 0:t.stringValue)===X_}function Nc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ii(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Nc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Nc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function _R(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===yR}var Nee={mapValue:{fields:{[Z_]:{stringValue:X_},[ws]:{arrayValue:{}}}}};var $t=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Xd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nc(t)}setAll(e){let t=Bt.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!t.isImmediateParentOf(c)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}s?r[c.lastSegment()]=Nc(s):i.push(c.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Xd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return An(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Xd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ii(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Nc(this.value))}};function IR(n){let e=[];return ii(n.fields,(t,r)=>{let i=new Bt([t]);if(Xd(r)){let o=IR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new en(e)}var pn=class n{constructor(e,t,r,i,o,s,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new n(e,0,ee.min(),ee.min(),ee.min(),$t.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ee.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ee.min(),ee.min(),$t.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ee.min(),ee.min(),$t.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ss=class{constructor(e,t){this.position=e,this.inclusive=t}};function yA(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=H.comparator(H.fromName(s.referenceValue),t.key):r=Ts(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function vA(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!An(n.position[t],e.position[t]))return!1;return!0}var Cs=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function GU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var ch=class{},Ye=class n extends ch{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new bv(e,t,r):t==="array-contains"?new Dv(e,r):t==="in"?new Av(e,r):t==="not-in"?new Rv(e,r):t==="array-contains-any"?new Nv(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Sv(e,r):new Cv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ts(t,this.value)):t!==null&&ei(this.value)===ei(t)&&this.matchesComparison(Ts(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Rn=class n extends ch{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return ER(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function ER(n){return n.op==="and"}function wR(n){return KU(n)&&ER(n)}function KU(n){for(let e of n.filters)if(e instanceof Rn)return!1;return!0}function Tv(n){if(n instanceof Ye)return n.field.canonicalString()+n.op.toString()+bs(n.value);if(wR(n))return n.filters.map(e=>Tv(e)).join(",");{let e=n.filters.map(t=>Tv(t)).join(",");return`${n.op}(${e})`}}function TR(n,e){return n instanceof Ye?(function(r,i){return i instanceof Ye&&r.op===i.op&&r.field.isEqual(i.field)&&An(r.value,i.value)})(n,e):n instanceof Rn?(function(r,i){return i instanceof Rn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&TR(s,i.filters[c]),!0):!1})(n,e):void q(19439)}function bR(n){return n instanceof Ye?(function(t){return`${t.field.canonicalString()} ${t.op} ${bs(t.value)}`})(n):n instanceof Rn?(function(t){return t.op.toString()+" {"+t.getFilters().map(bR).join(" ,")+"}"})(n):"Filter"}var bv=class extends Ye{constructor(e,t,r){super(e,t,r),this.key=H.fromName(r.referenceValue)}matches(e){let t=H.comparator(e.key,this.key);return this.matchesComparison(t)}},Sv=class extends Ye{constructor(e,t){super(e,"in",t),this.keys=SR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Cv=class extends Ye{constructor(e,t){super(e,"not-in",t),this.keys=SR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function SR(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>H.fromName(r.referenceValue))}var Dv=class extends Ye{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return eI(t)&&Vc(t.arrayValue,this.value)}},Av=class extends Ye{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Vc(this.value.arrayValue,t)}},Rv=class extends Ye{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Vc(this.value.arrayValue,t)}},Nv=class extends Ye{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!eI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Vc(this.value.arrayValue,r))}};var Pv=class{constructor(e,t=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Pe=null}};function _A(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Pv(n,e,t,r,i,o,s)}function tI(n){let e=J(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Tv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),kh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>bs(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>bs(r)).join(",")),e.Pe=t}return e.Pe}function nI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!GU(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!TR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!vA(n.startAt,e.startAt)&&vA(n.endAt,e.endAt)}function Mv(n){return H.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ds=class{constructor(e,t=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function QU(n,e,t,r,i,o,s,c){return new Ds(n,e,t,r,i,o,s,c)}function rI(n){return new Ds(n)}function IA(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function YU(n){return n.collectionGroup!==null}function Pc(n){let e=J(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new it(Bt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Cs(o,r))}),t.has(Bt.keyField().canonicalString())||e.Te.push(new Cs(Bt.keyField(),r))}return e.Te}function Cn(n){let e=J(n);return e.Ie||(e.Ie=JU(e,Pc(n))),e.Ie}function JU(n,e){if(n.limitType==="F")return _A(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Cs(i.field,o)});let t=n.endAt?new Ss(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ss(n.startAt.position,n.startAt.inclusive):null;return _A(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function xv(n,e,t){return new Ds(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Lh(n,e){return nI(Cn(n),Cn(e))&&n.limitType===e.limitType}function CR(n){return`${tI(Cn(n))}|lt:${n.limitType}`}function ps(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>bR(i)).join(", ")}]`),kh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>bs(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>bs(i)).join(",")),`Target(${r})`})(Cn(n))}; limitType=${n.limitType})`}function Fh(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):H.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Pc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,c,u){let l=yA(s,c,u);return s.inclusive?l<=0:l<0})(r.startAt,Pc(r),i)||r.endAt&&!(function(s,c,u){let l=yA(s,c,u);return s.inclusive?l>=0:l>0})(r.endAt,Pc(r),i))})(n,e)}function ZU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function DR(n){return(e,t)=>{let r=!1;for(let i of Pc(n)){let o=XU(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function XU(n,e,t){let r=n.field.isKeyField()?H.comparator(e.key,t.key):(function(o,s,c){let u=s.data.field(o),l=c.data.field(o);return u!==null&&l!==null?Ts(u,l):q(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return q(19790,{direction:n.dir})}}var lr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ii(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return hR(this.inner)}size(){return this.innerSize}};var e2=new ke(H.comparator);function dr(){return e2}var AR=new ke(H.comparator);function Rc(...n){let e=AR;for(let t of n)e=e.insert(t.key,t);return e}function RR(n){let e=AR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Qi(){return Mc()}function NR(){return Mc()}function Mc(){return new lr(n=>n.toString(),(n,e)=>n.isEqual(e))}var t2=new ke(H.comparator),n2=new it(H.comparator);function se(...n){let e=n2;for(let t of n)e=e.add(t);return e}var r2=new it(re);function i2(){return r2}function iI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lc(e)?"-0":e}}function PR(n){return{integerValue:""+n}}function o2(n,e){return xU(e)?PR(e):iI(n,e)}var As=class{constructor(){this._=void 0}};function s2(n,e,t){return n instanceof Rs?(function(i,o){let s={fields:{[pR]:{stringValue:fR},[mR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&J_(o)&&(o=Oh(o)),o&&(s.fields[gR]=o),{mapValue:s}})(t,e):n instanceof to?xR(n,e):n instanceof no?kR(n,e):(function(i,o){let s=MR(i,o),c=EA(s)+EA(i.Ee);return wv(s)&&wv(i.Ee)?PR(c):iI(i.serializer,c)})(n,e)}function a2(n,e,t){return n instanceof to?xR(n,e):n instanceof no?kR(n,e):t}function MR(n,e){return n instanceof Ns?(function(r){return wv(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Rs=class extends As{},to=class extends As{constructor(e){super(),this.elements=e}};function xR(n,e){let t=OR(e);for(let r of n.elements)t.some(i=>An(i,r))||t.push(r);return{arrayValue:{values:t}}}var no=class extends As{constructor(e){super(),this.elements=e}};function kR(n,e){let t=OR(e);for(let r of n.elements)t=t.filter(i=>!An(i,r));return{arrayValue:{values:t}}}var Ns=class extends As{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function EA(n){return Ce(n.integerValue||n.doubleValue)}function OR(n){return eI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function c2(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof to&&i instanceof to||r instanceof no&&i instanceof no?Es(r.elements,i.elements,An):r instanceof Ns&&i instanceof Ns?An(r.Ee,i.Ee):r instanceof Rs&&i instanceof Rs})(n.transform,e.transform)}var kv=class{constructor(e,t){this.version=e,this.transformResults=t}},sr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function eh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ps=class{};function LR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new jc(n.key,sr.none()):new ro(n.key,n.data,sr.none());{let t=n.data,r=$t.empty(),i=new it(Bt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Nn(n.key,r,new en(i.toArray()),sr.none())}}function u2(n,e,t){n instanceof ro?(function(i,o,s){let c=i.value.clone(),u=TA(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):n instanceof Nn?(function(i,o,s){if(!eh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=TA(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(FR(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function xc(n,e,t,r){return n instanceof ro?(function(o,s,c,u){if(!eh(o.precondition,s))return c;let l=o.value.clone(),h=bA(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof Nn?(function(o,s,c,u){if(!eh(o.precondition,s))return c;let l=bA(o.fieldTransforms,u,s),h=s.data;return h.setAll(FR(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,c){return eh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(n,e,t)}function l2(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=MR(r.transform,i||null);o!=null&&(t===null&&(t=$t.empty()),t.set(r.field,o))}return t||null}function wA(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Es(r,i,(o,s)=>c2(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ro=class extends Ps{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Nn=class extends Ps{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function FR(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function TA(n,e,t){let r=new Map;me(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,a2(s,c,t[i]))}return r}function bA(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,s2(o,s,e))}return r}var jc=class extends Ps{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ov=class extends Ps{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Lv=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&u2(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=xc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=xc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=NR();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=t.has(i.key)?null:c;let u=LR(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),se())}isEqual(e){return this.batchId===e.batchId&&Es(this.mutations,e.mutations,(t,r)=>wA(t,r))&&Es(this.baseMutations,e.baseMutations,(t,r)=>wA(t,r))}},Fv=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){me(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return t2})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Vv=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var jv=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var $e,he;function d2(n){switch(n){case P.OK:return q(64938);case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0;default:return q(15467,{code:n})}}function VR(n){if(n===void 0)return ar("GRPC error has no .code"),P.UNKNOWN;switch(n){case $e.OK:return P.OK;case $e.CANCELLED:return P.CANCELLED;case $e.UNKNOWN:return P.UNKNOWN;case $e.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case $e.INTERNAL:return P.INTERNAL;case $e.UNAVAILABLE:return P.UNAVAILABLE;case $e.UNAUTHENTICATED:return P.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case $e.NOT_FOUND:return P.NOT_FOUND;case $e.ALREADY_EXISTS:return P.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return P.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case $e.ABORTED:return P.ABORTED;case $e.OUT_OF_RANGE:return P.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return P.UNIMPLEMENTED;case $e.DATA_LOSS:return P.DATA_LOSS;default:return q(39323,{code:n})}}(he=$e||($e={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";var SA=null;var h2=new rr([4294967295,4294967295],0);function CA(n){let e=QA().encode(n),t=new tv;return t.update(e),new Uint8Array(t.digest())}function DA(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new rr([t,r],0),new rr([i,o],0)]}var Uv=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Yi(`Invalid padding: ${t}`);if(r<0)throw new Yi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Yi(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=rr.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(rr.fromNumber(r)));return i.compare(h2)===1&&(i=new rr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=CA(e),[r,i]=DA(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.fe===0)return;let t=CA(e),[r,i]=DA(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Yi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var uh=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Uc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ee.min(),i,new ke(re),dr(),se())}},Uc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,se(),se(),se())}};var vs=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},lh=class{constructor(e,t){this.targetId=e,this.De=t}},dh=class{constructor(e,t,r=yt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},hh=class{constructor(){this.ve=0,this.Ce=AA(),this.Fe=yt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=se(),t=se(),r=se();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:q(38017,{changeType:o})}}),new Uc(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=AA()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,me(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},$v=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=dr(),this.je=Yd(),this.Je=Yd(),this.He=new ke(re)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:q(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(Mv(o))if(r===0){let s=new H(o.path);this.Xe(t,s,pn.newNoDocument(s,ee.min()))}else me(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let c=this._t(e),u=c?this.ut(c,e,s):1;if(u!==0){this.rt(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}SA?.ct((function(h,p,m,y,D){var N,R,O,$,G,Ie;let vt={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},ye=p.unchangedNames;return ye&&(vt.bloomFilter={applied:D===0,hashCount:(N=ye?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:($=(O=(R=ye?.bits)===null||R===void 0?void 0:R.bitmap)===null||O===void 0?void 0:O.length)!==null&&$!==void 0?$:0,padding:(Ie=(G=ye?.bits)===null||G===void 0?void 0:G.padding)!==null&&Ie!==void 0?Ie:0,mightContain:T=>{var v;return(v=y?.mightContain(T))!==null&&v!==void 0&&v}}),vt})(s,e.De,this.We.lt(),c,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,c;try{s=ur(r).toUint8Array()}catch(u){if(u instanceof oh)return Xr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Uv(s,i,o)}catch(u){return Xr(u instanceof Yi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.fe===0?null:c}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let c=this.st(s);if(c){if(o.current&&Mv(c.target)){let u=new H(c.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,pn.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=se();this.Je.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new uh(e,t,this.He,this.ze,r);return this.ze=dr(),this.je=Yd(),this.Je=Yd(),this.He=new ke(re),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new hh,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new it(re),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new it(re),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||L("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new hh),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Yd(){return new ke(H.comparator)}function AA(){return new ke(H.comparator)}var f2={asc:"ASCENDING",desc:"DESCENDING"},p2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},g2={and:"AND",or:"OR"},Bv=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Hv(n,e){return n.useProto3Json||kh(e)?e:{value:e}}function fh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function m2(n,e){return fh(n,e.toTimestamp())}function Dn(n){return me(!!n,49232),ee.fromTimestamp((function(t){let r=cr(t);return new qe(r.seconds,r.nanos)})(n))}function oI(n,e){return qv(n,e).canonicalString()}function qv(n,e){let t=(function(i){return new Ae(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function UR(n){let e=Ae.fromString(n);return me(zR(e),10190,{key:e.toString()}),e}function zv(n,e){return oI(n.databaseId,e.path)}function av(n,e){let t=UR(e);if(t.get(1)!==n.databaseId.projectId)throw new V(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new V(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new H(BR(t))}function $R(n,e){return oI(n.databaseId,e)}function y2(n){let e=UR(n);return e.length===4?Ae.emptyPath():BR(e)}function Wv(n){return new Ae(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function BR(n){return me(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function RA(n,e,t){return{name:zv(n,e),fields:t.value.mapValue.fields}}function v2(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:q(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(me(h===void 0||typeof h=="string",58123),yt.fromBase64String(h||"")):(me(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),yt.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(l){let h=l.code===void 0?P.UNKNOWN:VR(l.code);return new V(h,l.message||"")})(s);t=new dh(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=av(n,r.document.name),o=Dn(r.document.updateTime),s=r.document.createTime?Dn(r.document.createTime):ee.min(),c=new $t({mapValue:{fields:r.document.fields}}),u=pn.newFoundDocument(i,o,s,c),l=r.targetIds||[],h=r.removedTargetIds||[];t=new vs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=av(n,r.document),o=r.readTime?Dn(r.readTime):ee.min(),s=pn.newNoDocument(i,o),c=r.removedTargetIds||[];t=new vs([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=av(n,r.document),o=r.removedTargetIds||[];t=new vs([],o,i,null)}else{if(!("filter"in e))return q(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new jv(i,o),c=r.targetId;t=new lh(c,s)}}return t}function _2(n,e){let t;if(e instanceof ro)t={update:RA(n,e.key,e.value)};else if(e instanceof jc)t={delete:zv(n,e.key)};else if(e instanceof Nn)t={update:RA(n,e.key,e.data),updateMask:A2(e.fieldMask)};else{if(!(e instanceof Ov))return q(16599,{Rt:e.type});t={verify:zv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let c=s.transform;if(c instanceof Rs)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof to)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof no)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ns)return{fieldPath:s.field.canonicalString(),increment:c.Ee};throw q(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:m2(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:q(27497)})(n,e.precondition)),t}function I2(n,e){return n&&n.length>0?(me(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?Dn(i.updateTime):Dn(o);return s.isEqual(ee.min())&&(s=Dn(o)),new kv(s,i.transformResults||[])})(t,e))):[]}function E2(n,e){return{documents:[$R(n,e.path)]}}function w2(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=$R(n,i);let o=(function(l){if(l.length!==0)return qR(Rn.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:gs(m.field),direction:S2(m.dir)}})(h))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let c=Hv(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function T2(n){let e=y2(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){me(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=(function(p){let m=HR(p);return m instanceof Rn&&wR(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(m=>(function(D){return new Cs(ms(D.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(m))})(t.orderBy));let c=null;t.limit&&(c=(function(p){let m;return m=typeof p=="object"?p.value:p,kh(m)?null:m})(t.limit));let u=null;t.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new Ss(y,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new Ss(y,m)})(t.endAt)),QU(e,i,s,o,c,"F",u,l)}function b2(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function HR(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ms(t.unaryFilter.field);return Ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ms(t.unaryFilter.field);return Ye.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ms(t.unaryFilter.field);return Ye.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ms(t.unaryFilter.field);return Ye.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return q(61313);default:return q(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ye.create(ms(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return q(58110);default:return q(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Rn.create(t.compositeFilter.filters.map(r=>HR(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q(1026)}})(t.compositeFilter.op))})(n):q(30097,{filter:n})}function S2(n){return f2[n]}function C2(n){return p2[n]}function D2(n){return g2[n]}function gs(n){return{fieldPath:n.canonicalString()}}function ms(n){return Bt.fromServerFormat(n.fieldPath)}function qR(n){return n instanceof Ye?(function(t){if(t.op==="=="){if(mA(t.value))return{unaryFilter:{field:gs(t.field),op:"IS_NAN"}};if(gA(t.value))return{unaryFilter:{field:gs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(mA(t.value))return{unaryFilter:{field:gs(t.field),op:"IS_NOT_NAN"}};if(gA(t.value))return{unaryFilter:{field:gs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gs(t.field),op:C2(t.op),value:t.value}}})(n):n instanceof Rn?(function(t){let r=t.getFilters().map(i=>qR(i));return r.length===1?r[0]:{compositeFilter:{op:D2(t.op),filters:r}}})(n):q(54877,{filter:n})}function A2(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function zR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var $c=class n{constructor(e,t,r,i,o=ee.min(),s=ee.min(),c=yt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Gv=class{constructor(e){this.gt=e}};function R2(n){let e=T2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?xv(e,e.limit,"L"):e}var ph=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Ce(e.integerValue));else if("doubleValue"in e){let r=Ce(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Lc(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=cr(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(ur(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?_R(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):vR(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):q(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=ws,c=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Ce(c)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),H.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};ph.Ut=new ph;var Kv=class{constructor(){this.Dn=new Qv}addToCollectionParentIndex(e,t){return this.Dn.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(eo.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(eo.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}},Qv=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new it(Ae.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new it(Ae.comparator)).toArray()}};var Pee=new Uint8Array(0);var NA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WR=41943040,Xt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Xt.DEFAULT_COLLECTION_PERCENTILE=10,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xt.DEFAULT=new Xt(WR,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xt.DISABLED=new Xt(-1,0,0);var Bc=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var PA="LruGarbageCollector",N2=1048576;function MA([n,e],[t,r]){let i=re(n,t);return i===0?re(e,r):i}var Yv=class{constructor(e){this.Tr=e,this.buffer=new it(MA),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();MA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Jv=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){L(PA,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>E(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Fs(t)?L(PA,"Ignoring IndexedDB error during garbage collection: ",t):yield Ls(t)}yield this.Rr(3e5)}))}},Zv=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return M.resolve(Q_.ue);let r=new Yv(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(L("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(NA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(L("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),NA):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,c,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(L("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),fs()<=oe.DEBUG&&L("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function P2(n,e){return new Zv(n,e)}var Xv=class{constructor(){this.changes=new lr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var e_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var t_=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&xc(r.mutation,i,en.empty(),qe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,t,r=se()){let i=Qi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Rc();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Qi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,se()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{t.set(s,c)})})}computeViews(e,t,r,i){let o=dr(),s=Mc(),c=(function(){return Mc()})();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Nn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),xc(h.mutation,l,h.mutation.getFieldMask(),qe.now())):s.set(l.key,en.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return c.set(l,new e_(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,t){let r=Mc(),i=new ke((s,c)=>s-c),o=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let c of s)c.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||en.empty();h=c.applyToLocalView(l,h),r.set(u,h);let p=(i.get(c.batchId)||se()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,h=u.value,p=NR();h.forEach(m=>{if(!o.has(m)){let y=LR(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return M.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return H.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):YU(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):M.resolve(Qi()),c=Oc,u=o;return s.next(l=>M.forEach(l,(h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(h)?M.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,se())).next(h=>({batchId:c,changes:RR(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new H(t)).next(r=>{let i=Rc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Rc();return this.indexManager.getCollectionParents(e,o).next(c=>M.forEach(c,u=>{let l=(function(p,m){return new Ds(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,pn.newInvalidDocument(h)))});let c=Rc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&xc(h.mutation,l,en.empty(),qe.now()),Fh(t,l)&&(c=c.insert(u,l))}),c})}};var n_=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return M.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Dn(i.createTime)}})(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:R2(i.bundledQuery),readTime:Dn(i.readTime)}})(t)),M.resolve()}};var r_=class{constructor(){this.overlays=new ke(H.comparator),this.kr=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Qi();return M.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),M.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){let i=Qi(),o=t.length+1,s=new H(t.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new ke((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Qi(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let c=Qi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>c.set(l,h)),!(c.size()>=i)););return M.resolve(c)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Vv(t,r));let o=this.kr.get(t);o===void 0&&(o=se(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var i_=class{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}};var Hc=class{constructor(){this.qr=new it(Be.Qr),this.$r=new it(Be.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Be(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Be(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new H(new Ae([])),r=new Be(t,e),i=new Be(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new H(new Ae([])),r=new Be(t,e),i=new Be(t,e+1),o=se();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Be(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Be=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return H.comparator(e.key,t.key)||re(e.Hr,t.Hr)}static Ur(e,t){return re(e.Hr,t.Hr)||H.comparator(e.key,t.key)}};var o_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new it(Be.Qr)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Lv(o,t,r,i);this.mutationQueue.push(s);for(let c of i)this.Yr=this.Yr.add(new Be(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return M.resolve(s)}lookupMutationBatch(e,t){return M.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return M.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?Y_:this.er-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Be(t,0),i=new Be(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let c=this.Zr(s.Hr);o.push(c)}),M.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new it(re);return t.forEach(i=>{let o=new Be(i,0),s=new Be(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],c=>{r=r.add(c.Hr)})}),M.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;H.isDocumentKey(o)||(o=o.child(""));let s=new Be(new H(o),0),c=new it(re);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.Hr)),!0)},s),M.resolve(this.ei(c))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){me(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return M.forEach(t.mutations,i=>{let o=new Be(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Be(t,0),i=this.Yr.firstAfterOrEqual(r);return M.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var s_=class{constructor(e){this.ni=e,this.docs=(function(){return new ke(H.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():pn.newInvalidDocument(t))}getEntries(e,t){let r=dr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():pn.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=dr(),s=t.path,c=new H(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||NU(RU(h),r)<=0||(i.has(h.key)||Fh(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return M.resolve(o)}getAllFromCollectionGroup(e,t,r,i){q(9500)}ri(e,t){return M.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new a_(this)}getSize(e){return M.resolve(this.size)}},a_=class extends Xv{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),M.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var c_=class{constructor(e){this.persistence=e,this.ii=new lr(t=>tI(t),nI),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.si=0,this.oi=new Hc,this.targetCount=0,this._i=Bc.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),M.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Bc(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.hr(t),M.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),M.waitFor(o).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),M.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),M.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),M.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this.oi.containsKey(t))}};var gh=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new Q_(0),this.ci=!1,this.ci=!0,this.li=new i_,this.referenceDelegate=e(this),this.hi=new c_(this),this.indexManager=new Kv,this.remoteDocumentCache=(function(i){return new s_(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new Gv(t),this.Ti=new n_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new r_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new o_(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){L("MemoryPersistence","Starting transaction:",e);let i=new u_(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return M.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},u_=class extends _v{constructor(e){super(),this.currentSequenceNumber=e}},l_=class n{constructor(e){this.persistence=e,this.Ai=new Hc,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw q(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),M.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.mi,r=>{let i=H.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,ee.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return M.or([()=>M.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},mh=class n{constructor(e,t){this.persistence=e,this.gi=new lr(r=>kU(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=P2(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return M.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return M.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?M.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(c=>{c||(r++,o.removeEntry(s,ee.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),M.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),M.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Zd(e.data.value)),t}Sr(e,t,r){return M.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return M.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var d_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=se(),i=se();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var h_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var f_=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return MC()?8:MU(tt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new h_;return this.ws(e,t,s).next(c=>{if(o.result=c,this.Rs)return this.Ss(e,t,s,c.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(fs()<=oe.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",ps(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),M.resolve()):(fs()<=oe.DEBUG&&L("QueryEngine","Query:",ps(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(fs()<=oe.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",ps(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cn(t))):M.resolve())}ps(e,t){if(IA(t))return M.resolve(null);let r=Cn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=xv(t,null,"F"),r=Cn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=se(...o);return this.gs.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(t,c);return this.Ds(t,l,s,u.readTime)?this.ps(e,xv(t,null,"F")):this.vs(e,l,t,u)}))})))}ys(e,t,r,i){return IA(t)||i.isEqual(ee.min())?M.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?M.resolve(null):(fs()<=oe.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ps(t)),this.vs(e,s,t,AU(i,Oc)).next(c=>c))})}bs(e,t){let r=new it(DR(e));return t.forEach((i,o)=>{Fh(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return fs()<=oe.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",ps(t)),this.gs.getDocumentsMatchingQuery(e,t,eo.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var sI="LocalStore",M2=3e8,p_=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new ke(re),this.Ms=new lr(o=>tI(o),nI),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new t_(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function x2(n,e,t,r){return new p_(n,e,t,r)}function GR(n,e){return E(this,null,function*(){let t=J(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=se();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){c.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:c}))})})})}function k2(n,e){let t=J(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(c,u,l,h){let p=l.batch,m=p.keys(),y=M.resolve();return m.forEach(D=>{y=y.next(()=>h.getEntry(u,D)).next(N=>{let R=l.docVersions.get(D);me(R!==null,48541),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=se();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function KR(n){let e=J(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function O2(n,e){let t=J(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let c=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;c.push(t.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(yt.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(N,R,O){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=M2?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(m,y,h)&&c.push(t.hi.updateTargetData(o,y))});let u=dr(),l=se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),c.push(L2(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(ee.min())){let h=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(h)}return M.waitFor(c).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Fs=i,o))}function L2(n,e,t){let r=se(),i=se();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=dr();return t.forEach((c,u)=>{let l=o.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):L(sI,"Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function F2(n,e){let t=J(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Y_),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function V2(n,e){let t=J(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,M.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new $c(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function g_(n,e,t){return E(this,null,function*(){let r=J(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Fs(s))throw s;L(sI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function xA(n,e,t){let r=J(n),i=ee.min(),o=se();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=J(u),m=p.Ms.get(h);return m!==void 0?M.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)})(r,s,Cn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:ee.min(),t?o:se())).next(c=>(j2(r,ZU(e),c),{documents:c,qs:o})))}function j2(n,e,t){let r=n.xs.get(e)||ee.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var yh=class{constructor(){this.activeTargetIds=i2()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var m_=class{constructor(){this.Fo=new yh,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new yh,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var y_=class{xo(e){}shutdown(){}};var kA="ConnectivityMonitor",vh=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){L(kA,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){L(kA,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Jd=null;function v_(){return Jd===null?Jd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jd++,"0x"+Jd.toString(16)}var cv="RestConnection",U2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},__=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===sh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=v_(),c=this.Go(e,t.toUriEncodedString());L(cv,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(c),h=Vr(l);return this.jo(e,c,u,r,h).then(p=>(L(cv,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Xr(cv,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Os})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=U2[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var I_=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var gt="WebChannelConnection",E_=class extends __{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=v_();return new Promise((c,u)=>{let l=new nv;l.setWithCredentials(!0),l.listenOnce(rv.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ac.NO_ERROR:let p=l.getResponseJson();L(gt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case Ac.TIMEOUT:L(gt,`RPC '${e}' ${s} timed out`),u(new V(P.DEADLINE_EXCEEDED,"Request time out"));break;case Ac.HTTP_ERROR:let m=l.getStatus();if(L(gt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let D=y?.error;if(D&&D.status&&D.message){let N=(function(O){let $=O.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf($)>=0?$:P.UNKNOWN})(D.status);u(new V(N,D.message))}else u(new V(P.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new V(P.UNAVAILABLE,"Connection failed."));break;default:q(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{L(gt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);L(gt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}P_(e,t,r){let i=v_(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=sv(),c=ov(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");L(gt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let m=!1,y=!1,D=new I_({Ho:R=>{y?L(gt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(L(gt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),L(gt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),N=(R,O,$)=>{R.listen(O,G=>{try{$(G)}catch(Ie){setTimeout(()=>{throw Ie},0)}})};return N(p,hs.EventType.OPEN,()=>{y||(L(gt,`RPC '${e}' stream ${i} transport opened.`),D.s_())}),N(p,hs.EventType.CLOSE,()=>{y||(y=!0,L(gt,`RPC '${e}' stream ${i} transport closed`),D.__(),this.I_(p))}),N(p,hs.EventType.ERROR,R=>{y||(y=!0,Xr(gt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),D.__(new V(P.UNAVAILABLE,"The operation could not be completed")))}),N(p,hs.EventType.MESSAGE,R=>{var O;if(!y){let $=R.data[0];me(!!$,16349);let G=$,Ie=G?.error||((O=G[0])===null||O===void 0?void 0:O.error);if(Ie){L(gt,`RPC '${e}' stream ${i} received error:`,Ie);let vt=Ie.status,ye=(function(I){let w=$e[I];if(w!==void 0)return VR(w)})(vt),T=Ie.message;ye===void 0&&(ye=P.INTERNAL,T="Unknown error status: "+vt+" with message "+Ie.message),y=!0,D.__(new V(ye,T)),p.close()}else L(gt,`RPC '${e}' stream ${i} received:`,$),D.a_($)}}),N(c,iv.STAT_EVENT,R=>{R.stat===Kd.PROXY?L(gt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Kd.NOPROXY&&L(gt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.o_()},0),D}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function uv(){return typeof document<"u"?document:null}function Vh(n){return new Bv(n,!0)}var _h=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&L("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var OA="PersistentStream",Ih=class{constructor(e,t,r,i,o,s,c,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new _h(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return E(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return E(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return E(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===P.RESOURCE_EXHAUSTED?(ar(t.toString()),ar("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new V(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>E(this,null,function*(){this.state=0,this.start()}))}G_(e){return L(OA,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(L(OA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},w_=class extends Ih{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=v2(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ee.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ee.min():s.readTime?Dn(s.readTime):ee.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=Wv(this.serializer),t.addTarget=(function(o,s){let c,u=s.target;if(c=Mv(u)?{documents:E2(o,u)}:{query:w2(o,u).Vt},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=jR(o,s.resumeToken);let l=Hv(o,s.expectedCount);l!==null&&(c.expectedCount=l)}else if(s.snapshotVersion.compareTo(ee.min())>0){c.readTime=fh(o,s.snapshotVersion.toTimestamp());let l=Hv(o,s.expectedCount);l!==null&&(c.expectedCount=l)}return c})(this.serializer,e);let r=b2(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=Wv(this.serializer),t.removeTarget=e,this.k_(t)}},T_=class extends Ih{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=I2(e.writeResults,e.commitTime),r=Dn(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=Wv(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>_2(this.serializer,r))};this.k_(t)}};var b_=class{},S_=class extends b_{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new V(P.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,qv(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(P.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Jo(e,qv(t,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(P.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},C_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ar(t),this._a=!1):L("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var io="RemoteStore",D_=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>E(this,null,function*(){oo(this)&&(L(io,"Restarting streams for network reachability change."),yield(function(u){return E(this,null,function*(){let l=J(u);l.Ia.add(4),yield Wc(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield jh(l)})})(this))}))}),this.Aa=new C_(r,i)}};function jh(n){return E(this,null,function*(){if(oo(n))for(let e of n.da)yield e(!0)})}function Wc(n){return E(this,null,function*(){for(let e of n.da)yield e(!1)})}function QR(n,e){let t=J(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),lI(t)?uI(t):Vs(t).x_()&&cI(t,e))}function aI(n,e){let t=J(n),r=Vs(t);t.Ta.delete(e),r.x_()&&YR(t,e),t.Ta.size===0&&(r.x_()?r.B_():oo(t)&&t.Aa.set("Unknown"))}function cI(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vs(n).H_(e)}function YR(n,e){n.Ra.$e(e),Vs(n).Y_(e)}function uI(n){n.Ra=new $v({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Vs(n).start(),n.Aa.aa()}function lI(n){return oo(n)&&!Vs(n).M_()&&n.Ta.size>0}function oo(n){return J(n).Ia.size===0}function JR(n){n.Ra=void 0}function $2(n){return E(this,null,function*(){n.Aa.set("Online")})}function B2(n){return E(this,null,function*(){n.Ta.forEach((e,t)=>{cI(n,e)})})}function H2(n,e){return E(this,null,function*(){JR(n),lI(n)?(n.Aa.la(e),uI(n)):n.Aa.set("Unknown")})}function q2(n,e,t){return E(this,null,function*(){if(n.Aa.set("Online"),e instanceof dh&&e.state===2&&e.cause)try{yield(function(i,o){return E(this,null,function*(){let s=o.cause;for(let c of o.targetIds)i.Ta.has(c)&&(yield i.remoteSyncer.rejectListen(c,s),i.Ta.delete(c),i.Ra.removeTarget(c))})})(n,e)}catch(r){L(io,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Eh(n,r)}else if(e instanceof vs?n.Ra.Ye(e):e instanceof lh?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ee.min()))try{let r=yield KR(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let c=o.Ra.Pt(s);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(yt.EMPTY_BYTE_STRING,h.snapshotVersion)),YR(o,u);let p=new $c(h.target,u,l,h.sequenceNumber);cI(o,p)}),o.remoteSyncer.applyRemoteEvent(c)})(n,t))}catch(r){L(io,"Failed to raise snapshot:",r),yield Eh(n,r)}})}function Eh(n,e,t){return E(this,null,function*(){if(!Fs(e))throw e;n.Ia.add(1),yield Wc(n),n.Aa.set("Offline"),t||(t=()=>KR(n.localStore)),n.asyncQueue.enqueueRetryable(()=>E(null,null,function*(){L(io,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield jh(n)}))})}function ZR(n,e){return e().catch(t=>Eh(n,t,e))}function Uh(n){return E(this,null,function*(){let e=J(n),t=ti(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Y_;for(;z2(e);)try{let i=yield F2(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,W2(e,i)}catch(i){yield Eh(e,i)}XR(e)&&eN(e)})}function z2(n){return oo(n)&&n.Pa.length<10}function W2(n,e){n.Pa.push(e);let t=ti(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function XR(n){return oo(n)&&!ti(n).M_()&&n.Pa.length>0}function eN(n){ti(n).start()}function G2(n){return E(this,null,function*(){ti(n).na()})}function K2(n){return E(this,null,function*(){let e=ti(n);for(let t of n.Pa)e.X_(t.mutations)})}function Q2(n,e,t){return E(this,null,function*(){let r=n.Pa.shift(),i=Fv.from(r,e,t);yield ZR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Uh(n)})}function Y2(n,e){return E(this,null,function*(){e&&ti(n).Z_&&(yield(function(r,i){return E(this,null,function*(){if((function(s){return d2(s)&&s!==P.ABORTED})(i.code)){let o=r.Pa.shift();ti(r).N_(),yield ZR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Uh(r)}})})(n,e)),XR(n)&&eN(n)})}function LA(n,e){return E(this,null,function*(){let t=J(n);t.asyncQueue.verifyOperationInProgress(),L(io,"RemoteStore received new credentials");let r=oo(t);t.Ia.add(3),yield Wc(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield jh(t)})}function J2(n,e){return E(this,null,function*(){let t=J(n);e?(t.Ia.delete(2),yield jh(t)):e||(t.Ia.add(2),yield Wc(t),t.Aa.set("Unknown"))})}function Vs(n){return n.Va||(n.Va=(function(t,r,i){let o=J(t);return o.ia(),new w_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:$2.bind(null,n),e_:B2.bind(null,n),n_:H2.bind(null,n),J_:q2.bind(null,n)}),n.da.push(e=>E(null,null,function*(){e?(n.Va.N_(),lI(n)?uI(n):n.Aa.set("Unknown")):(yield n.Va.stop(),JR(n))}))),n.Va}function ti(n){return n.ma||(n.ma=(function(t,r,i){let o=J(t);return o.ia(),new T_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:G2.bind(null,n),n_:Y2.bind(null,n),ea:K2.bind(null,n),ta:Q2.bind(null,n)}),n.da.push(e=>E(null,null,function*(){e?(n.ma.N_(),yield Uh(n)):(yield n.ma.stop(),n.Pa.length>0&&(L(io,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var A_=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,c=new n(e,t,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function dI(n,e){if(ar("AsyncQueue",`${e}: ${n}`),Fs(n))return new V(P.UNAVAILABLE,`${e}: ${n}`);throw n}var wh=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||H.comparator(t.key,r.key):(t,r)=>H.comparator(t.key,r.key),this.keyedMap=Rc(),this.sortedSet=new ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Th=class{constructor(){this.fa=new ke(H.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):q(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Ms=class n{constructor(e,t,r,i,o,s,c,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new n(e,t,wh.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var R_=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},N_=class{constructor(){this.queries=FA(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=J(t),o=i.queries;i.queries=FA(),o.forEach((s,c)=>{for(let u of c.wa)u.onError(r)})})(this,new V(P.ABORTED,"Firestore shutting down"))}};function FA(){return new lr(n=>CR(n),Lh)}function Z2(n,e){return E(this,null,function*(){let t=J(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new R_,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let c=dI(s,`Initialization of query '${ps(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&hI(t)})}function X2(n,e){return E(this,null,function*(){let t=J(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function e$(n,e){let t=J(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let c of s.wa)c.Ca(i)&&(r=!0);s.ya=i}}r&&hI(t)}function t$(n,e,t){let r=J(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function hI(n){n.Da.forEach(e=>{e.next()})}var P_,VA;(VA=P_||(P_={})).Fa="default",VA.Cache="cache";var M_=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ms(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ms.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==P_.Cache}};var bh=class{constructor(e){this.key=e}},Sh=class{constructor(e){this.key=e}},x_=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=se(),this.mutatedKeys=se(),this.Xa=DR(e),this.eu=new wh(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Th,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Fh(this.query,p)?p:null,D=!!m&&this.mutatedKeys.has(m.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?D!==N&&(r.track({type:3,doc:y}),R=!0):this.iu(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(c=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(c=!0)),R&&(y?(s=s.add(y),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:c,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,D){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q(20277,{At:R})}};return N(y)-N(D)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let c=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new Ms(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Th,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=se(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Sh(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new bh(r))}),t}uu(e){this.Ha=e.qs,this.Za=se();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ms.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},fI="SyncEngine",k_=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},O_=class{constructor(e){this.key=e,this.lu=!1}},L_=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new lr(c=>CR(c),Lh),this.Tu=new Map,this.Iu=new Set,this.du=new ke(H.comparator),this.Eu=new Map,this.Au=new Hc,this.Ru={},this.Vu=new Map,this.mu=Bc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function n$(n,e,t=!0){return E(this,null,function*(){let r=sN(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield tN(r,e,t,!0),i})}function r$(n,e){return E(this,null,function*(){let t=sN(n);yield tN(t,e,!0,!1)})}function tN(n,e,t,r){return E(this,null,function*(){let i=yield V2(n.localStore,Cn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),c;return r&&(c=yield i$(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&QR(n.remoteStore,i),c})}function i$(n,e,t,r,i){return E(this,null,function*(){n.gu=(p,m,y)=>(function(N,R,O,$){return E(this,null,function*(){let G=R.view.nu(O);G.Ds&&(G=yield xA(N.localStore,R.query,!1).then(({documents:T})=>R.view.nu(T,G)));let Ie=$&&$.targetChanges.get(R.targetId),vt=$&&$.targetMismatches.get(R.targetId)!=null,ye=R.view.applyChanges(G,N.isPrimaryClient,Ie,vt);return UA(N,R.targetId,ye._u),ye.snapshot})})(n,p,m,y);let o=yield xA(n.localStore,e,!0),s=new x_(e,o.qs),c=s.nu(o.documents),u=Uc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(c,n.isPrimaryClient,u);UA(n,t,l._u);let h=new k_(e,t,s);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function o$(n,e,t){return E(this,null,function*(){let r=J(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Lh(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield g_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&aI(r.remoteStore,i.targetId),F_(r,i.targetId)}).catch(Ls))):(F_(r,i.targetId),yield g_(r.localStore,i.targetId,!0))})}function s$(n,e){return E(this,null,function*(){let t=J(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),aI(t.remoteStore,r.targetId))})}function a$(n,e,t){return E(this,null,function*(){let r=p$(n);try{let i=yield(function(s,c){let u=J(s),l=qe.now(),h=c.reduce((y,D)=>y.add(D.key),se()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=dr(),N=se();return u.Os.getEntries(y,h).next(R=>{D=R,D.forEach((O,$)=>{$.isValidDocument()||(N=N.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,D)).next(R=>{p=R;let O=[];for(let $ of c){let G=l2($,p.get($.key).overlayedDocument);G!=null&&O.push(new Nn($.key,G,IR(G.value.mapValue),sr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,O,c)}).next(R=>{m=R;let O=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,R.batchId,O)})}).then(()=>({batchId:m.batchId,changes:RR(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,c,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new ke(re)),l=l.insert(c,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,t),yield Gc(r,i.changes),yield Uh(r.remoteStore)}catch(i){let o=dI(i,"Failed to persist write");t.reject(o)}})}function nN(n,e){return E(this,null,function*(){let t=J(n);try{let r=yield O2(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(me(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?me(s.lu,14607):i.removedDocuments.size>0&&(me(s.lu,42227),s.lu=!1))}),yield Gc(t,r,e)}catch(r){yield Ls(r)}})}function jA(n,e,t){let r=J(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),(function(s,c){let u=J(s);u.onlineState=c;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.wa)m.va(c)&&(l=!0)}),l&&hI(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function c$(n,e,t){return E(this,null,function*(){let r=J(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new ke(H.comparator);s=s.insert(o,pn.newNoDocument(o,ee.min()));let c=se().add(o),u=new uh(ee.min(),new Map,new ke(re),s,c);yield nN(r,u),r.du=r.du.remove(o),r.Eu.delete(e),pI(r)}else yield g_(r.localStore,e,!1).then(()=>F_(r,e,t)).catch(Ls)})}function u$(n,e){return E(this,null,function*(){let t=J(n),r=e.batch.batchId;try{let i=yield k2(t.localStore,e);iN(t,r,null),rN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Gc(t,i)}catch(i){yield Ls(i)}})}function l$(n,e,t){return E(this,null,function*(){let r=J(n);try{let i=yield(function(s,c){let u=J(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(me(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);iN(r,e,t),rN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Gc(r,i)}catch(i){yield Ls(i)}})}function rN(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function iN(n,e,t){let r=J(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function F_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||oN(n,r)})}function oN(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(aI(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),pI(n))}function UA(n,e,t){for(let r of t)r instanceof bh?(n.Au.addReference(r.key,e),d$(n,r)):r instanceof Sh?(L(fI,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||oN(n,r.key)):q(19791,{yu:r})}function d$(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(L(fI,"New document in limbo: "+t),n.Iu.add(r),pI(n))}function pI(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new H(Ae.fromString(e)),r=n.mu.next();n.Eu.set(r,new O_(t)),n.du=n.du.insert(t,r),QR(n.remoteStore,new $c(Cn(rI(t.path)),r,"TargetPurposeLimboResolution",Q_.ue))}}function Gc(n,e,t){return E(this,null,function*(){let r=J(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((c,u)=>{s.push(r.gu(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=d_.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(u,l){return E(this,null,function*(){let h=J(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>M.forEach(l,m=>M.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>M.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Fs(p))throw p;L(sI,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Fs.get(m),D=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(D);h.Fs=h.Fs.insert(m,N)}}})})(r.localStore,o))})}function h$(n,e){return E(this,null,function*(){let t=J(n);if(!t.currentUser.isEqual(e)){L(fI,"User change. New user:",e.toKey());let r=yield GR(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(c=>{c.forEach(u=>{u.reject(new V(P.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Gc(t,r.Bs)}})}function f$(n,e){let t=J(n),r=t.Eu.get(e);if(r&&r.lu)return se().add(r.key);{let i=se(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let c=t.Pu.get(s);i=i.unionWith(c.view.tu)}return i}}function sN(n){let e=J(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=f$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=c$.bind(null,e),e.hu.J_=e$.bind(null,e.eventManager),e.hu.pu=t$.bind(null,e.eventManager),e}function p$(n){let e=J(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=u$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=l$.bind(null,e),e}var aN=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return E(this,null,function*(){this.serializer=Vh(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return x2(this.persistence,new f_,t.initialUser,this.serializer)}Du(t){return new gh(l_.Vi,this.serializer)}bu(t){return new m_}terminate(){return E(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),V_=class extends aN{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){me(this.persistence.referenceDelegate instanceof mh,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Jv(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new gh(r=>mh.Vi(r,t),this.serializer)}};var g$=(()=>{class n{initialize(t,r){return E(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>jA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=h$.bind(null,this.syncEngine),yield J2(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new N_})()}createDatastore(t){let r=Vh(t.databaseInfo.databaseId),i=(function(s){return new E_(s)})(t.databaseInfo);return(function(s,c,u,l){return new S_(s,c,u,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,c,u){return new D_(i,o,s,c,u)})(this.localStore,this.datastore,t.asyncQueue,r=>jA(this.syncEngine,r,0),(function(){return vh.C()?new vh:new y_})())}createSyncEngine(t,r){return(function(o,s,c,u,l,h,p){let m=new L_(o,s,c,u,l,h);return p&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return E(this,null,function*(){var t,r;yield(function(o){return E(this,null,function*(){let s=J(o);L(io,"RemoteStore shutting down."),s.Ia.add(5),yield Wc(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var j_=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ar("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var ni="FirestoreClient",U_=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=rt.UNAUTHENTICATED,this.clientId=kc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>E(this,null,function*(){L(ni,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(L(ni,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=dI(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function lv(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),L(ni,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>E(null,null,function*(){r.isEqual(i)||(yield GR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Xr("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{L("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Xr("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function $A(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield m$(n);L(ni,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>LA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>LA(e.remoteStore,i)),n._onlineComponents=e})}function m$(n){return E(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){L(ni,"Using user provided OfflineComponentProvider");try{yield lv(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Xr("Error using user provided cache. Falling back to memory cache: "+t),yield lv(n,new aN)}}else L(ni,"Using default OfflineComponentProvider"),yield lv(n,new V_(void 0));return n._offlineComponents})}function cN(n){return E(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(L(ni,"Using user provided OnlineComponentProvider"),yield $A(n,n._uninitializedComponentsProvider._online)):(L(ni,"Using default OnlineComponentProvider"),yield $A(n,new g$))),n._onlineComponents})}function y$(n){return cN(n).then(e=>e.syncEngine)}function BA(n){return E(this,null,function*(){let e=yield cN(n),t=e.eventManager;return t.onListen=n$.bind(null,e.syncEngine),t.onUnlisten=o$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=r$.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=s$.bind(null,e.syncEngine),t})}function uN(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var HA=new Map;var lN="firestore.googleapis.com",qA=!0,Ch=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new V(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lN,this.ssl=qA}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:qA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=WR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<N2)throw new V(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new V(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new V(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new V(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},xs=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ch({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new V(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new V(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ch(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new dv;switch(r.type){case"firstParty":return new gv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return E(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=HA.get(t);r&&(L("ComponentProvider","Removing Datastore"),HA.delete(t),r.terminate())})(this),Promise.resolve()}};function dN(n,e,t,r={}){var i;n=Kr(n,xs);let o=Vr(e),s=n._getSettings(),c=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(wd(`https://${u}`),Td("Firestore",!0)),s.host!==lN&&s.host!==u&&Xr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!En(l,c)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=rt.MOCK_USER;else{h=CC(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new V(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new rt(m)}n._authCredentials=new hv(new th(h,p))}}var Dh=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},mt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(zc(t,n._jsonSchema))return new n(e,r||null,new H(Ae.fromString(t.referencePath)))}};mt._jsonSchemaVersion="firestore/documentReference/1.0",mt._jsonSchema={type:He("string",mt._jsonSchemaVersion),referencePath:He("string")};var Qr=class n extends Dh{constructor(e,t,r){super(e,t,rI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new H(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function hN(n,e,...t){if(n=nt(n),YA("collection","path",e),n instanceof xs){let r=Ae.fromString(e,...t);return cA(r),new Qr(n,null,r)}{if(!(n instanceof mt||n instanceof Qr))throw new V(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ae.fromString(e,...t));return cA(r),new Qr(n.firestore,null,r)}}function gI(n,e,...t){if(n=nt(n),arguments.length===1&&(e=kc.newId()),YA("doc","path",e),n instanceof xs){let r=Ae.fromString(e,...t);return aA(r),new mt(n,null,new H(r))}{if(!(n instanceof mt||n instanceof Qr))throw new V(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ae.fromString(e,...t));return aA(r),new mt(n.firestore,n instanceof Qr?n.converter:null,new H(r))}}var zA="AsyncQueue",Ah=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new _h(this,"async_queue_retry"),this.oc=()=>{let r=uv();r&&L(zA,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=uv();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=uv();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new or;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return E(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Fs(e))throw e;L(zA,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ar("INTERNAL UNHANDLED ERROR: ",WA(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=A_.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&q(47125,{hc:WA(this.tc)})}verifyOperationInProgress(){}Pc(){return E(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function WA(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function GA(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var ri=class extends xs{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Ah,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return E(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ah(e),this._firestoreClient=void 0,yield e}})}};function fN(n,e){let t=typeof n=="object"?n:Bi(),r=typeof n=="string"?n:e||sh,i=as(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=SC("firestore");o&&dN(i,...o)}return i}function pN(n){if(n._terminated)throw new V(P.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||v$(n),n._firestoreClient}function v$(n){var e,t,r;let i=n._freezeSettings(),o=(function(c,u,l,h){return new Iv(c,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,uN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new U_(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}})(n._componentsProvider))}var Yr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(yt.fromBase64String(e))}catch(t){throw new V(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zc(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Yr._jsonSchemaVersion="firestore/bytes/1.0",Yr._jsonSchema={type:He("string",Yr._jsonSchemaVersion),bytes:He("string")};var ks=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new V(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var qc=class{constructor(e){this._methodName=e}};var Jr=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new V(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new V(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(zc(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Jr._jsonSchemaVersion="firestore/geoPoint/1.0",Jr._jsonSchema={type:He("string",Jr._jsonSchemaVersion),latitude:He("number"),longitude:He("number")};var Zr=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zc(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new V(P.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Zr._jsonSchemaVersion="firestore/vectorValue/1.0",Zr._jsonSchema={type:He("string",Zr._jsonSchemaVersion),vectorValues:He("object")};var _$=/^__.*__$/,$_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Nn(e,this.data,this.fieldMask,t,this.fieldTransforms):new ro(e,this.data,t,this.fieldTransforms)}},Rh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Nn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function gN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q(40011,{Ec:n})}}var B_=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Ph(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(gN(this.Ec)&&_$.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},H_=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Vh(e)}Dc(e,t,r,i=!1){return new B_({Ec:e,methodName:t,bc:r,path:Bt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function mN(n){let e=n._freezeSettings(),t=Vh(n._databaseId);return new H_(n._databaseId,!!e.ignoreUndefinedProperties,t)}function I$(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);mI("Data must be an object, but it was:",s,r);let c=yN(r,s),u,l;if(o.merge)u=new en(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=q_(e,p,t);if(!s.contains(m))throw new V(P.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);_N(h,m)||h.push(m)}u=new en(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new $_(new $t(c),u,l)}var Nh=class n extends qc{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function E$(n,e,t,r){let i=n.Dc(1,e,t);mI("Data must be an object, but it was:",i,r);let o=[],s=$t.empty();ii(r,(u,l)=>{let h=yI(e,u,t);l=nt(l);let p=i.gc(h);if(l instanceof Nh)o.push(h);else{let m=$h(l,p);m!=null&&(o.push(h),s.set(h,m))}});let c=new en(o);return new Rh(s,c,i.fieldTransforms)}function w$(n,e,t,r,i,o){let s=n.Dc(1,e,t),c=[q_(e,r,t)],u=[i];if(o.length%2!=0)throw new V(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)c.push(q_(e,o[m])),u.push(o[m+1]);let l=[],h=$t.empty();for(let m=c.length-1;m>=0;--m)if(!_N(l,c[m])){let y=c[m],D=u[m];D=nt(D);let N=s.gc(y);if(D instanceof Nh)l.push(y);else{let R=$h(D,N);R!=null&&(l.push(y),h.set(y,R))}}let p=new en(l);return new Rh(h,p,s.fieldTransforms)}function $h(n,e){if(vN(n=nt(n)))return mI("Unsupported field value:",e,n),yN(n,e);if(n instanceof qc)return(function(r,i){if(!gN(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let c of r){let u=$h(c,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return o2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=qe.fromDate(r);return{timestampValue:fh(i.serializer,o)}}if(r instanceof qe){let o=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fh(i.serializer,o)}}if(r instanceof Jr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yr)return{bytesValue:jR(i.serializer,r._byteString)};if(r instanceof mt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:oI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Zr)return(function(s,c){return{mapValue:{fields:{[Z_]:{stringValue:X_},[ws]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw c.wc("VectorValues must only contain numeric values.");return iI(c.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${K_(r)}`)})(n,e)}function yN(n,e){let t={};return hR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ii(n,(r,i)=>{let o=$h(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function vN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof qe||n instanceof Jr||n instanceof Yr||n instanceof mt||n instanceof qc||n instanceof Zr)}function mI(n,e,t){if(!vN(t)||!JA(t)){let r=K_(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function q_(n,e,t){if((e=nt(e))instanceof ks)return e._internalPath;if(typeof e=="string")return yI(n,e);throw Ph("Field path arguments must be of type string or ",n,!1,void 0,t)}var T$=new RegExp("[~\\*/\\[\\]]");function yI(n,e,t){if(e.search(T$)>=0)throw Ph(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ks(...e.split("."))._internalPath}catch{throw Ph(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ph(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new V(P.INVALID_ARGUMENT,c+n+u)}function _N(n,e){return n.some(t=>t.isEqual(e))}var Mh=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new z_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(IN("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},z_=class extends Mh{data(){return super.data()}};function IN(n,e){return typeof e=="string"?yI(n,e):e instanceof ks?e._internalPath:e._delegate._internalPath}function b$(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new V(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var W_=class{convertValue(e,t="none"){switch(ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ur(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw q(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ii(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[ws].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ce(s.doubleValue));return new Zr(o)}convertGeoPoint(e){return new Jr(Ce(e.latitude),Ce(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Oh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Fc(e));default:return null}}convertTimestamp(e){let t=cr(e);return new qe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ae.fromString(e);me(zR(r),9688,{name:e});let i=new ah(r.get(1),r.get(3)),o=new H(r.popFirst(5));return i.isEqual(t)||ar(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function S$(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Ji=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Zi=class n extends Mh{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new _s(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(IN("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new V(P.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Zi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zi._jsonSchema={type:He("string",Zi._jsonSchemaVersion),bundleSource:He("string","DocumentSnapshot"),bundleName:He("string"),bundle:He("string")};var _s=class extends Zi{data(e={}){return super.data(e)}},Is=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ji(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new _s(this._firestore,this._userDataWriter,r.key,r,new Ji(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new V(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new _s(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ji(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new _s(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ji(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return c.type!==0&&(l=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),h=s.indexOf(c.doc.key)),{type:C$(c.type),doc:u,oldIndex:l,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new V(P.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=kc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function C$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q(61501,{type:n})}}Is._jsonSchemaVersion="firestore/querySnapshot/1.0",Is._jsonSchema={type:He("string",Is._jsonSchemaVersion),bundleSource:He("string","QuerySnapshot"),bundleName:He("string"),bundle:He("string")};var xh=class extends W_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,t)}};function EN(n,e,t,...r){n=Kr(n,mt);let i=Kr(n.firestore,ri),o=mN(i),s;return s=typeof(e=nt(e))=="string"||e instanceof ks?w$(o,"updateDoc",n._key,e,t,r):E$(o,"updateDoc",n._key,e),_I(i,[s.toMutation(n._key,sr.exists(!0))])}function wN(n){return _I(Kr(n.firestore,ri),[new jc(n._key,sr.none())])}function TN(n,e){let t=Kr(n.firestore,ri),r=gI(n),i=S$(n.converter,e);return _I(t,[I$(mN(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,sr.exists(!1))]).then(()=>r)}function vI(n,...e){var t,r,i;n=nt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||GA(e[s])||(o=e[s++]);let c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(GA(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof mt)l=Kr(n.firestore,ri),h=rI(n._key.path),u={next:p=>{e[s]&&e[s](D$(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Kr(n,Dh);l=Kr(p.firestore,ri),h=p._query;let m=new xh(l);u={next:y=>{e[s]&&e[s](new Is(l,m,p,y))},error:e[s+1],complete:e[s+2]},b$(n._query)}return(function(m,y,D,N){let R=new j_(N),O=new M_(y,R,D);return m.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return Z2(yield BA(m),O)})),()=>{R.Ou(),m.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return X2(yield BA(m),O)}))}})(pN(l),h,c,u)}function _I(n,e){return(function(r,i){let o=new or;return r.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return a$(yield y$(r),i,o)})),o.promise})(pN(n),e)}function D$(n,e,t){let r=t.docs.get(e._key),i=new xh(n);return new Zi(n,i,e._key,r,new Ji(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Os=i})(Ur),hn(new wt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new ri(new fv(r.getProvider("auth-internal")),new mv(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new V(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ah(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),xe(rA,iA,e),xe(rA,iA,"esm2017")})();var Bh=function(){return Bh=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Bh.apply(this,arguments)};var N$={includeMetadataChanges:!1};function bN(n,e){return e===void 0&&(e=N$),new ne(function(t){var r=vI(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function SN(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Bh(Bh({},r),(t={},t[e.idField]=n.id,t))}function CN(n){return bN(n,{includeMetadataChanges:!0}).pipe(ie(function(e){return e.docs}))}function DN(n,e){return e===void 0&&(e={}),CN(n).pipe(ie(function(t){return t.map(function(r){return SN(r,e)})}))}var so=class{constructor(e){return e}},AN="firestore",II=class{constructor(){return us(AN)}};var EI=new U("angularfire2.firestore-instances");function P$(n,e){let t=yc(AN,n,e);return t&&new so(t)}function M$(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new so(r)}}var x$={provide:II,deps:[[new Ot,EI]]},k$={provide:so,useFactory:P$,deps:[[new Ot,EI],er]};function RN(n,...e){return xe("angularfire",$r.full,"fst"),rn([k$,x$,{provide:EI,useFactory:M$(n),multi:!0,deps:[ve,Ke,Br,qi,[new Ot,Dc],[new Ot,ls],...e]}])}var NN=Ut(DN,!0);var PN=Ut(TN,!0,2);var wI=Ut(hN,!0,2);var MN=Ut(wN,!0,2);var TI=Ut(gI,!0,2);var xN=Ut(fN,!0);var kN=Ut(EN,!0,2);var ON={firebase:{projectId:"stock-app-b9475",appId:"1:602421702706:web:97855ec83612f939198c2b",storageBucket:"stock-app-b9475.firebasestorage.app",apiKey:"AIzaSyCIspo0QkSjuu5nspIeDuG512pl3s9uRzE",authDomain:"stock-app-b9475.firebaseapp.com",messagingSenderId:"602421702706",projectNumber:"602421702706",version:"2"}};var LN={providers:[Gg({eventCoalescing:!0}),qm(IC),XC(()=>eD(ON.firebase)),XD(()=>eA()),RN(()=>xN())]};var Pn=class n{constructor(e){this.firestore=e}crearProduct$=new ze(null);addProduct(e){let t=wI(this.firestore,"product");return PN(t,e)}getProduct(){let e=wI(this.firestore,"product");return NN(e,{idField:"id"})}deletedProducts(e){let t=TI(this.firestore,`product/${e.id}`);return MN(t)}addProductEdit(e){this.crearProduct$.next(e)}getProductEdit(){return this.crearProduct$.asObservable().pipe(pt(e=>e!==null))}editProduct(e,t){let r=TI(this.firestore,`product/${e}`),s=t,{id:i}=s,o=RE(s,["id"]);return kN(r,o)}static \u0275fac=function(t){return new(t||n)(te(so))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};var Hh=class n{constructor(e){this.productService=e}name=Qt("");price=Qt(0);image=Qt("");description=Qt("");quantity=Qt(0);id=Qt.required();onDelete=Kn();deletedProduct=Kn();showEditTrue=Kn();product=Kn();editProduct=Qt();deledCard(){this.deletedProduct.emit({name:this.name(),quantity:this.quantity(),price:this.price(),image:this.image()?this.image():"",description:this.description()?this.description():"",id:this.id()})}showPageEditTrue(){this.showEditTrue.emit(!0)}emitProduct(){this.product.emit({name:this.name(),quantity:this.quantity(),price:this.price(),image:this.image(),description:this.description(),id:this.id()})}static \u0275fac=function(t){return new(t||n)(Pr(Pn))};static \u0275cmp=Lt({type:n,selectors:[["app-card-inventory"]],inputs:{name:[1,"name"],price:[1,"price"],image:[1,"image"],description:[1,"description"],quantity:[1,"quantity"],id:[1,"id"],editProduct:[1,"editProduct"]},outputs:{onDelete:"onDelete",deletedProduct:"deletedProduct",showEditTrue:"showEditTrue",product:"product"},decls:20,vars:4,consts:[[1,"relative","flex","flex-col","text-gray-700","bg-white","shadow-md","rounded-xl","w-full","max-w-xs","sm:max-w-sm","md:max-w-md","lg:max-w-sm"],[1,"relative","mx-4","mt-4","overflow-hidden","rounded-xl","h-48","sm:h-50","md:h-56","lg:h-60"],["src","https://images.unsplash.com/photo-1629367494173-c78a56567877","alt","card-image",1,"object-cover","w-full","h-full"],[1,"p-4","sm:p-6"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","justify-between","mb-2","gap-1","sm:gap-2"],[1,"font-medium","text-blue-gray-900","text-sm","sm:text-base"],[1,"text-xs","sm:text-sm","text-gray-700","opacity-75","break-words"],[1,"col"],[1,"p-4","sm:p-6","pt-0"],[1,"flex","flex-col","sm:flex-row","gap-2","sm:gap-4"],[1,"w-full","sm:w-1/2","text-xs","sm:text-sm","font-bold","uppercase","py-2","sm:py-3","px-4","sm:px-6","rounded-lg","bg-blue-gray-900/10","text-blue-gray-900","hover:scale-105","transition","cursor-pointer",3,"click"]],template:function(t,r){t&1&&(le(0,"div",0)(1,"div",1),zl(2,"img",2),de(),le(3,"div",3)(4,"div",4)(5,"p",5),Ve(6),de(),le(7,"p",5),Ve(8),de(),le(9,"p",5),Ve(10),de()(),le(11,"p",6),Ve(12),de()(),le(13,"div",7)(14,"div",8)(15,"div",9)(16,"button",10),Ue("click",function(){return r.showPageEditTrue(),r.emitProduct()}),Ve(17," Edit "),de(),le(18,"button",10),Ue("click",function(){return r.deledCard()}),Ve(19," Deleted "),de()()()()()),t&2&&(De(6),Gn(" ",r.name()," "),De(2),Gn(" ",r.price()," "),De(2),Gn(" ",r.quantity()," "),De(2),Gn(" ",r.description()," "))},encapsulation:2,changeDetection:0})};var qh=class n{constructor(e){this.productService=e}cardList=Se([]);name=Se("");price=Se(0);quantity=Se(0);newProduct=Kn();image=Se("");description=Se("");addCard(){if(!this.name()||this.price()<0||this.quantity()<0)return;let e={name:this.name(),quantity:this.quantity(),price:this.price(),image:this.image(),description:this.description(),id:Math.random()*1e4};this.newProduct.emit(e)}static \u0275fac=function(t){return new(t||n)(Pr(Pn))};static \u0275cmp=Lt({type:n,selectors:[["app-side-bar"]],outputs:{newProduct:"newProduct"},decls:16,vars:5,consts:[["txtName",""],["txtQuantity",""],["txtPrice",""],["txtImage",""],["txtDescription",""],[1,"bg-amber-50","w-full","max-w-xs","sm:max-w-sm","md:max-w-md","lg:max-w-lg","h-dvh","flex-shrink-0","flex","flex-col","items-center","p-4","mx-auto"],[1,"text-2xl","sm:text-3xl","my-5","font-bold","text-gray-900","text-center"],[1,"flex","flex-col","gap-4","w-full"],["type","text","placeholder","Product's Name",1,"w-full","px-3","sm:px-4","py-2","sm:py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","outline-none","transition-all","text-sm","sm:text-base",3,"input","value"],["type","number","placeholder","Quantity",1,"w-full","px-3","sm:px-4","py-2","sm:py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","outline-none","transition-all","text-sm","sm:text-base",3,"input","value"],["type","number","placeholder","Price",1,"w-full","px-3","sm:px-4","py-2","sm:py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","outline-none","transition-all","text-sm","sm:text-base",3,"input","value"],["type","text","placeholder","Image",1,"w-full","px-3","sm:px-4","py-2","sm:py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","outline-none","transition-all","text-sm","sm:text-base",3,"input","value"],["placeholder","Description",1,"w-full","px-3","sm:px-4","py-2","sm:py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","outline-none","transition-all","text-sm","sm:text-base",3,"input","value"],[1,"w-full","bg-indigo-600","hover:bg-indigo-700","text-white","font-medium","py-2.5","sm:py-3","rounded-lg","mt-4","transition-colors",3,"click"]],template:function(t,r){if(t&1){let i=Wn();le(0,"div",5)(1,"h2",6),Ve(2," Add Product "),de(),le(3,"form",7)(4,"input",8,0),Ue("input",function(){Pe(i);let s=Ft(5);return Me(r.name.set(s.value))}),de(),le(6,"input",9,1),Ue("input",function(){Pe(i);let s=Ft(7);return Me(r.quantity.set(+s.value))}),de(),le(8,"input",10,2),Ue("input",function(){Pe(i);let s=Ft(9);return Me(r.price.set(+s.value))}),de(),le(10,"input",11,3),Ue("input",function(){Pe(i);let s=Ft(11);return Me(r.image.set(s.value))}),de(),le(12,"input",12,4),Ue("input",function(){Pe(i);let s=Ft(13);return Me(r.description.set(s.value))}),de()(),le(14,"button",13),Ue("click",function(){return Pe(i),Me(r.addCard())}),Ve(15," Add "),de()()}t&2&&(De(4),At("value",r.name()),De(2),At("value",r.quantity()),De(2),At("value",r.price()),De(2),At("value",r.image()),De(2),At("value",r.description()))},encapsulation:2,changeDetection:0})};function L$(n,e){if(n&1){let t=Wn();le(0,"button",18),Ue("click",function(){Pe(t);let i=xr();return Me(i.productEdit())}),Ve(1," Send "),de()}}var zh=class n{productService=x(Pn);ngOnInit(){this.productService.getProductEdit().subscribe(e=>{console.log(e,"dsadadasda"),this.name.set(e.name),this.price.set(e.price),this.quantity.set(e.quantity),this.description.set(e.description?e.description:""),this.image.set(e.image?e.image:""),this.id.set(e.id)})}showPage=Kn();name=Se("");price=Se(0);quantity=Se(0);image=Se("");description=Se("");product=Qt();id=Se(0);showEditPage(){this.showPage.emit(!1)}productEdit(){if(this.id()===null){console.warn("El ID a\xFAn no est\xE1 cargado");return}let e={id:this.id(),name:this.name(),price:this.price(),quantity:this.quantity(),image:this.image(),description:this.description()};this.productService.editProduct(this.id().toString(),e).then(()=>console.log("Producto actualizado")).catch(t=>console.error(t))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Lt({type:n,selectors:[["app-edit-page"]],inputs:{product:[1,"product"]},outputs:{showPage:"showPage"},decls:35,vars:9,consts:[["txtName",""],["txtPrice",""],["txtQuantity",""],["txtImage",""],["txtDescription",""],[1,"min-h-screen","bg-black/50","w-screen","flex","items-center","justify-center","p-4"],[1,"w-full","max-w-md","sm:max-w-lg","md:max-w-xl","lg:max-w-2xl","bg-white","rounded-xl","shadow-lg","p-6","sm:p-8","relative"],[1,"bg-gray-200","w-8","h-8","flex","items-center","justify-center","rounded-full","text-white","absolute","top-3","right-3","cursor-pointer",3,"click"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","mb-6","text-center"],[1,"space-y-4"],[1,"block","text-sm","sm:text-base","font-medium","text-gray-700","mb-1"],["type","product","placeholder","product",1,"w-full","px-3","sm:px-4","py-2","sm:py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","outline-none","transition-all","text-sm","sm:text-base",3,"input","value"],["type","number","placeholder","price",1,"w-full","px-3","sm:px-4","py-2","sm:py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","outline-none","transition-all","text-sm","sm:text-base",3,"input","value"],["type","number",1,"w-full","px-3","sm:px-4","py-2","sm:py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","outline-none","transition-all","text-sm","sm:text-base",3,"input","placeholder","value"],["type","text","placeholder","image",1,"w-full","px-3","sm:px-4","py-2","sm:py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","outline-none","transition-all","text-sm","sm:text-base",3,"input","value"],["placeholder","Escribe aqu\xED...",1,"w-full","h-32","sm:h-40","resize-none","overflow-y-auto","overflow-x-hidden","whitespace-pre-wrap","wrap-break-word","p-2","sm:p-3","border","rounded","text-sm","sm:text-base",3,"input","value"],["type","submit",1,"w-full","bg-indigo-600","hover:bg-indigo-700","text-white","font-medium","py-2.5","sm:py-3","rounded-lg","transition-colors","mt-4"],[1,"mt-2","text-sm","sm:text-base"],["type","submit",1,"w-full","bg-indigo-600","hover:bg-indigo-700","text-white","font-medium","py-2.5","sm:py-3","rounded-lg","transition-colors","mt-4",3,"click"]],template:function(t,r){if(t&1){let i=Wn();le(0,"div",5)(1,"div",6)(2,"div",7),Ue("click",function(){return Pe(i),Me(r.showEditPage())}),Ve(3," x "),de(),le(4,"h2",8),Ve(5,"Edit Product"),de(),le(6,"form",9)(7,"div")(8,"label",10),Ve(9,"Product"),de(),le(10,"input",11,0),Ue("input",function(){Pe(i);let s=Ft(11);return Me(r.name.set(s.value))}),de()(),le(12,"div")(13,"label",10),Ve(14,"Price"),de(),le(15,"input",12,1),Ue("input",function(){Pe(i);let s=Ft(16);return Me(r.price.set(+s.value))}),de()(),le(17,"div")(18,"label",10),Ve(19,"Quantity"),de(),le(20,"input",13,2),Ue("input",function(){Pe(i);let s=Ft(21);return Me(r.quantity.set(+s.value))}),de()(),le(22,"div")(23,"label",10),Ve(24,"Image URL"),de(),le(25,"input",14,3),Ue("input",function(){Pe(i);let s=Ft(26);return Me(r.image.set(s.value))}),de()(),le(27,"div")(28,"label",10),Ve(29,"Description"),de(),le(30,"textarea",15,4),Ue("input",function(){Pe(i);let s=Ft(31);return Me(r.description.set(s.value))}),de()()(),ja(32,L$,2,0,"button",16),le(33,"p",17),Ve(34),de()()()}t&2&&(De(10),At("value",r.name()),De(5),At("value",r.price()),De(5),At("placeholder",qg(r.quantity()))("value",r.quantity()),De(5),At("value",r.image()),De(5),At("value",r.description()),De(2),Ua(r.id()!=null?32:-1),De(2),Gn("ID actual: ",r.id()))},encapsulation:2,changeDetection:0})};function F$(n,e){if(n&1){let t=Wn();Mr(0,"app-card-inventory",6),Wo("product",function(){let i=Pe(t).$implicit,o=xr();return Me(o.showProduct(i))})("deletedProduct",function(i){Pe(t);let o=xr();return Me(o.deletedProductFromDoc(i))})("showEditTrue",function(i){Pe(t);let o=xr();return Me(o.showPageEditTrue(i))}),zn()}if(n&2){let t=e.$implicit;ql("price",t.price)("description",t.description)("quantity",t.quantity)("image",t.image)("id",t.id)("name",t.name)}}function V$(n,e){if(n&1){let t=Wn();Mr(0,"div",5)(1,"div",7)(2,"app-edit-page",8),Wo("showPage",function(i){Pe(t);let o=xr();return Me(o.showPageEdit(i))}),zn()()()}}var Wh=class n{constructor(e){this.productService=e}showPage=Se(!1);cardList=Se([]);ngOnInit(){this.productService.getProduct().subscribe(e=>{this.cardList.set(e)})}showPageEdit(e){this.showPage.set(e)}showPageEditTrue(e){this.showPage.set(e)}deletedProductFromDoc(e){this.productService.deletedProducts(e)}addNewProduct(e){return E(this,null,function*(){let t=yield this.productService.addProduct(e)})}showProduct(e){this.productService.addProductEdit(e)}static \u0275fac=function(t){return new(t||n)(Pr(Pn))};static \u0275cmp=Lt({type:n,selectors:[["app-inventory-page"]],decls:7,vars:1,consts:[[1,"w-full","h-dvh","flex","overflow-hidden"],[1,"shrink-0","relative",3,"newProduct"],[1,"flex-1","overflow-auto"],[1,"grid","gap-4","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4"],[3,"price","description","quantity","image","id","name"],[1,"fixed","inset-0"],[3,"product","deletedProduct","showEditTrue","price","description","quantity","image","id","name"],[1,"absolute","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2"],[3,"showPage"]],template:function(t,r){t&1&&(Mr(0,"div",0)(1,"app-side-bar",1),Wo("newProduct",function(o){return r.addNewProduct(o)}),zn(),Mr(2,"div",2)(3,"div",3),Bg(4,F$,1,6,"app-card-inventory",4,$g),zn()(),ja(6,V$,3,0,"div",5),zn()),t&2&&(De(4),Hg(r.cardList()),De(2),Ua(r.showPage()?6:-1))},dependencies:[Hh,qh,zh],encapsulation:2,changeDetection:0})};var Gh=class n{title="fire-app";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Lt({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&zo(0,"app-inventory-page")},dependencies:[Wh],encapsulation:2})};um(Gh,LN).catch(n=>console.error(n));
