var A0=Object.defineProperty,R0=Object.defineProperties;var N0=Object.getOwnPropertyDescriptors;var gu=Object.getOwnPropertySymbols,P0=Object.getPrototypeOf,OE=Object.prototype.hasOwnProperty,LE=Object.prototype.propertyIsEnumerable,x0=Reflect.get;var kE=(n,e,t)=>e in n?A0(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,F=(n,e)=>{for(var t in e||={})OE.call(e,t)&&kE(n,t,e[t]);if(gu)for(var t of gu(e))LE.call(e,t)&&kE(n,t,e[t]);return n},_e=(n,e)=>R0(n,N0(e));var FE=(n,e)=>{var t={};for(var r in n)OE.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&gu)for(var r of gu(n))e.indexOf(r)<0&&LE.call(n,r)&&(t[r]=n[r]);return t};var gr=(n,e,t)=>x0(P0(n),t,e);var E=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{c(t.next(u))}catch(l){i(l)}},s=u=>{try{c(t.throw(u))}catch(l){i(l)}},c=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);c((t=t.apply(n,e)).next())});var Cf;function mu(){return Cf}function gn(n){let e=Cf;return Cf=n,e}var VE=Symbol("NotFound");function lo(n){return n===VE||n?.name==="\u0275NotFound"}var ft=null,yu=!1,Df=1,M0=null,bt=Symbol("SIGNAL");function z(n){let e=ft;return ft=n,e}function _u(){return ft}var oa={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function sa(n){if(yu)throw new Error("");if(ft===null)return;ft.consumerOnSignalRead(n);let e=ft.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=ft.recomputing;if(r&&(t=e!==void 0?e.nextProducer:ft.producers,t!==void 0&&t.producer===n)){ft.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===ft&&(!r||O0(i,ft)))return;let o=ho(ft),s={producer:n,consumer:ft,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};ft.producersTail=s,e!==void 0?e.nextProducer=s:ft.producers=s,o&&BE(n,s)}function jE(){Df++}function Af(n){if(!(ho(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Df)){if(!n.producerMustRecompute(n)&&!ca(n)){vu(n);return}n.producerRecomputeValue(n),vu(n)}}function Rf(n){if(n.consumers===void 0)return;let e=yu;yu=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||k0(r)}}finally{yu=e}}function Nf(){return ft?.consumerAllowSignalWrites!==!1}function k0(n){n.dirty=!0,Rf(n),n.consumerMarkedDirty?.(n)}function vu(n){n.dirty=!1,n.lastCleanEpoch=Df}function aa(n){return n&&UE(n),z(n)}function UE(n){n.producersTail=void 0,n.recomputing=!0}function Iu(n,e){z(e),n&&$E(n)}function $E(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(ho(n))do t=Pf(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function ca(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Af(t),r!==t.version))return!0}return!1}function ua(n){if(ho(n)){let e=n.producers;for(;e!==void 0;)e=Pf(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function BE(n,e){let t=n.consumersTail,r=ho(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)BE(i.producer,i)}function Pf(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!ho(e)){let o=e.producers;for(;o!==void 0;)o=Pf(o)}return t}function ho(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function xf(n){M0?.(n)}function O0(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Mf(n,e){return Object.is(n,e)}function L0(){throw new Error}var HE=L0;function qE(n){HE(n)}function kf(n){HE=n}var F0=null;function Of(n,e){let t=Object.create(Eu);t.value=n,e!==void 0&&(t.equal=e);let r=()=>zE(t);return r[bt]=t,xf(t),[r,s=>fo(t,s),s=>Lf(t,s)]}function zE(n){return sa(n),n.value}function fo(n,e){Nf()||qE(n),n.equal(n.value,e)||(n.value=e,V0(n))}function Lf(n,e){Nf()||qE(n),fo(n,e(n.value))}var Eu=_e(F({},oa),{equal:Mf,value:void 0,kind:"signal"});function V0(n){n.version++,jE(),Rf(n),F0?.(n)}function Z(n){return typeof n=="function"}function po(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var wu=po(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ci(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Pe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Z(r))try{r()}catch(o){e=o instanceof wu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{WE(o)}catch(s){e=e??[],s instanceof wu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new wu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)WE(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ci(t,e)}remove(e){let{_finalizers:t}=this;t&&ci(t,e),e instanceof n&&e._removeParent(this)}};Pe.EMPTY=(()=>{let n=new Pe;return n.closed=!0,n})();var Ff=Pe.EMPTY;function Tu(n){return n instanceof Pe||n&&"closed"in n&&Z(n.remove)&&Z(n.add)&&Z(n.unsubscribe)}function WE(n){Z(n)?n():n.unsubscribe()}var nn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var go={setTimeout(n,e,...t){let{delegate:r}=go;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=go;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function bu(n){go.setTimeout(()=>{let{onUnhandledError:e}=nn;if(e)e(n);else throw n})}function la(){}var GE=Vf("C",void 0,void 0);function KE(n){return Vf("E",void 0,n)}function QE(n){return Vf("N",n,void 0)}function Vf(n,e,t){return{kind:n,value:e,error:t}}var ui=null;function mo(n){if(nn.useDeprecatedSynchronousErrorHandling){let e=!ui;if(e&&(ui={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ui;if(ui=null,t)throw r}}else n()}function YE(n){nn.useDeprecatedSynchronousErrorHandling&&ui&&(ui.errorThrown=!0,ui.error=n)}var li=class extends Pe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Tu(e)&&e.add(this)):this.destination=$0}static create(e,t,r){return new yo(e,t,r)}next(e){this.isStopped?Uf(QE(e),this):this._next(e)}error(e){this.isStopped?Uf(KE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Uf(GE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},j0=Function.prototype.bind;function jf(n,e){return j0.call(n,e)}var $f=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Su(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Su(r)}else Su(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Su(t)}}},yo=class extends li{constructor(e,t,r){super();let i;if(Z(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&nn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&jf(e.next,o),error:e.error&&jf(e.error,o),complete:e.complete&&jf(e.complete,o)}):i=e}this.destination=new $f(i)}};function Su(n){nn.useDeprecatedSynchronousErrorHandling?YE(n):bu(n)}function U0(n){throw n}function Uf(n,e){let{onStoppedNotification:t}=nn;t&&go.setTimeout(()=>t(n,e))}var $0={closed:!0,next:la,error:U0,complete:la};var vo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Pt(n){return n}function Cu(...n){return Bf(n)}function Bf(n){return n.length===0?Pt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ie=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=H0(t)?t:new yo(t,r,i);return mo(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=JE(r),new r((i,o)=>{let s=new yo({next:c=>{try{t(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[vo](){return this}pipe(...t){return Bf(t)(this)}toPromise(t){return t=JE(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function JE(n){var e;return(e=n??nn.Promise)!==null&&e!==void 0?e:Promise}function B0(n){return n&&Z(n.next)&&Z(n.error)&&Z(n.complete)}function H0(n){return n&&n instanceof li||B0(n)&&Tu(n)}function Hf(n){return Z(n?.lift)}function le(n){return e=>{if(Hf(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(n,e,t,r,i){return new qf(n,e,t,r,i)}var qf=class extends li{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(c){try{t(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function _o(){return le((n,e)=>{let t=null;n._refCount++;let r=de(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Io=class extends ie{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Hf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pe;let t=this.getSubject();e.add(this.source.subscribe(de(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pe.EMPTY)}return e}refCount(){return _o()(this)}};var ZE=po(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var st=(()=>{class n extends ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Du(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new ZE}next(t){mo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){mo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){mo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Ff:(this.currentObservers=null,o.push(t),new Pe(()=>{this.currentObservers=null,ci(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ie;return t.source=this,t}}return n.create=(e,t)=>new Du(e,t),n})(),Du=class extends st{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Ff}};var ze=class extends st{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var zf={now(){return(zf.delegate||Date).now()},delegate:void 0};var Au=class extends Pe{constructor(e,t){super()}schedule(e,t=0){return this}};var da={setInterval(n,e,...t){let{delegate:r}=da;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=da;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Eo=class extends Au{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return da.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&da.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ci(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var wo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};wo.now=zf.now;var To=class extends wo{constructor(e,t=wo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Wf=new To(Eo);var Ru=class extends Eo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Nu=class extends To{};var Gf=new Nu(Ru);var St=new ie(n=>n.complete());function XE(n){return n&&Z(n.schedule)}function ew(n){return n[n.length-1]}function tw(n){return Z(ew(n))?n.pop():void 0}function mr(n){return XE(ew(n))?n.pop():void 0}function Kf(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function rw(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(c,u)}l((r=r.apply(n,e||[])).next())})}function nw(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function di(n){return this instanceof di?(this.v=n,this):new di(n)}function iw(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(D){return Promise.resolve(D).then(y,p)}}function c(y,D){r[y]&&(i[y]=function(N){return new Promise(function(R,O){o.push([y,N,R,O])>1||u(y,N)})},D&&(i[y]=D(i[y])))}function u(y,D){try{l(r[y](D))}catch(N){m(o[0][3],N)}}function l(y){y.value instanceof di?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,D){y(D),o.shift(),o.length&&u(o[0][0],o[0][1])}}function ow(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof nw=="function"?nw(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(c,u){s=n[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(l){o({value:l,done:c})},s)}}var Pu=n=>n&&typeof n.length=="number"&&typeof n!="function";function xu(n){return Z(n?.then)}function Mu(n){return Z(n[vo])}function ku(n){return Symbol.asyncIterator&&Z(n?.[Symbol.asyncIterator])}function Ou(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function q0(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Lu=q0();function Fu(n){return Z(n?.[Lu])}function Vu(n){return iw(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield di(t.read());if(i)return yield di(void 0);yield yield di(r)}}finally{t.releaseLock()}})}function ju(n){return Z(n?.getReader)}function Je(n){if(n instanceof ie)return n;if(n!=null){if(Mu(n))return z0(n);if(Pu(n))return W0(n);if(xu(n))return G0(n);if(ku(n))return sw(n);if(Fu(n))return K0(n);if(ju(n))return Q0(n)}throw Ou(n)}function z0(n){return new ie(e=>{let t=n[vo]();if(Z(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function W0(n){return new ie(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function G0(n){return new ie(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,bu)})}function K0(n){return new ie(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function sw(n){return new ie(e=>{Y0(n,e).catch(t=>e.error(t))})}function Q0(n){return sw(Vu(n))}function Y0(n,e){var t,r,i,o;return rw(this,void 0,void 0,function*(){try{for(t=ow(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Ct(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function yr(n,e=0){return le((t,r)=>{t.subscribe(de(r,i=>Ct(r,n,()=>r.next(i),e),()=>Ct(r,n,()=>r.complete(),e),i=>Ct(r,n,()=>r.error(i),e)))})}function vr(n,e=0){return le((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function aw(n,e){return Je(n).pipe(vr(e),yr(e))}function cw(n,e){return Je(n).pipe(vr(e),yr(e))}function uw(n,e){return new ie(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function lw(n,e){return new ie(t=>{let r;return Ct(t,e,()=>{r=n[Lu](),Ct(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>Z(r?.return)&&r.return()})}function Uu(n,e){if(!n)throw new Error("Iterable cannot be null");return new ie(t=>{Ct(t,e,()=>{let r=n[Symbol.asyncIterator]();Ct(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function dw(n,e){return Uu(Vu(n),e)}function hw(n,e){if(n!=null){if(Mu(n))return aw(n,e);if(Pu(n))return uw(n,e);if(xu(n))return cw(n,e);if(ku(n))return Uu(n,e);if(Fu(n))return lw(n,e);if(ju(n))return dw(n,e)}throw Ou(n)}function Le(n,e){return e?hw(n,e):Je(n)}function K(...n){let e=mr(n);return Le(n,e)}function bo(n,e){let t=Z(n)?n:()=>n,r=i=>i.error(t());return new ie(e?i=>e.schedule(r,0,i):r)}function Qf(n){return!!n&&(n instanceof ie||Z(n.lift)&&Z(n.subscribe))}var Ln=po(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function se(n,e){return le((t,r)=>{let i=0;t.subscribe(de(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:J0}=Array;function Z0(n,e){return J0(e)?n(...e):n(e)}function fw(n){return se(e=>Z0(n,e))}var{isArray:X0}=Array,{getPrototypeOf:eP,prototype:tP,keys:nP}=Object;function pw(n){if(n.length===1){let e=n[0];if(X0(e))return{args:e,keys:null};if(rP(e)){let t=nP(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function rP(n){return n&&typeof n=="object"&&eP(n)===tP}function gw(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function $u(...n){let e=mr(n),t=tw(n),{args:r,keys:i}=pw(n);if(r.length===0)return Le([],e);let o=new ie(iP(r,e,i?s=>gw(i,s):Pt));return t?o.pipe(fw(t)):o}function iP(n,e,t=Pt){return r=>{mw(e,()=>{let{length:i}=n,o=new Array(i),s=i,c=i;for(let u=0;u<i;u++)mw(e,()=>{let l=Le(n[u],e),h=!1;l.subscribe(de(r,p=>{o[u]=p,h||(h=!0,c--),c||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function mw(n,e,t){n?Ct(t,n,e):e()}function yw(n,e,t,r,i,o,s,c){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?D(N):u.push(N),D=N=>{o&&e.next(N),l++;let R=!1;Je(t(N,h++)).subscribe(de(e,O=>{i?.(O),o?y(O):e.next(O)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let O=u.shift();s?Ct(e,s,()=>D(O)):D(O)}m()}catch(O){e.error(O)}}))};return n.subscribe(de(e,y,()=>{p=!0,m()})),()=>{c?.()}}function We(n,e,t=1/0){return Z(e)?We((r,i)=>se((o,s)=>e(r,o,i,s))(Je(n(r,i))),t):(typeof e=="number"&&(t=e),le((r,i)=>yw(r,i,n,t)))}function vw(n=1/0){return We(Pt,n)}function _w(){return vw(1)}function So(...n){return _w()(Le(n,mr(n)))}function ha(n){return new ie(e=>{Je(n()).subscribe(e)})}function pt(n,e){return le((t,r)=>{let i=0;t.subscribe(de(r,o=>n.call(e,o,i++)&&r.next(o)))})}function _r(n){return le((e,t)=>{let r=null,i=!1,o;r=e.subscribe(de(t,void 0,void 0,s=>{o=Je(n(s,_r(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Iw(n,e,t,r,i){return(o,s)=>{let c=t,u=e,l=0;o.subscribe(de(s,h=>{let p=l++;u=c?n(u,h,p):(c=!0,h),r&&s.next(u)},i&&(()=>{c&&s.next(u),s.complete()})))}}function Co(n,e){return Z(e)?We(n,e,1):We(n,1)}function Ir(n){return le((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Fn(n){return n<=0?()=>St:le((e,t)=>{let r=0;e.subscribe(de(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Bu(n=oP){return le((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function oP(){return new Ln}function fa(n){return le((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Vn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?pt((i,o)=>n(i,o,r)):Pt,Fn(1),t?Ir(e):Bu(()=>new Ln))}function Do(n){return n<=0?()=>St:le((e,t)=>{let r=[];e.subscribe(de(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Yf(n,e){let t=arguments.length>=2;return r=>r.pipe(n?pt((i,o)=>n(i,o,r)):Pt,Do(1),t?Ir(e):Bu(()=>new Ln))}function Hu(n,e){return le(Iw(n,e,arguments.length>=2,!0))}function qu(...n){let e=mr(n);return le((t,r)=>{(e?So(n,t,e):So(n,t)).subscribe(r)})}function Dt(n,e){return le((t,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();t.subscribe(de(r,u=>{i?.unsubscribe();let l=0,h=o++;Je(n(u,h)).subscribe(i=de(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,c()}))},()=>{s=!0,c()}))})}function zu(n){return le((e,t)=>{Je(n).subscribe(de(t,()=>t.complete(),la)),!t.closed&&e.subscribe(t)})}function Ze(n,e,t){let r=Z(n)||e||t?{next:n,error:e,complete:t}:n;return r?le((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(de(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Pt}function Ew(n){let e=z(null);try{return n()}finally{z(e)}}var Ro=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},cp=new Ro("20.3.15");var Ju="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(e,t){super(yi(e,t)),this.code=e}};function sP(n){return`NG0${Math.abs(n)}`}function yi(n,e){return`${sP(n)}${e?": "+e:""}`}function pe(n){for(let e in n)if(n[e]===pe)return e;throw Error("")}function Er(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Er).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function up(n,e){return n?e?`${n} ${e}`:n:e||""}var aP=pe({__forward_ref__:pe});function Zu(n){return n.__forward_ref__=Zu,n.toString=function(){return Er(this())},n}function At(n){return lp(n)?n():n}function lp(n){return typeof n=="function"&&n.hasOwnProperty(aP)&&n.__forward_ref__===Zu}function B(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ya(n){return cP(n,Xu)}function dp(n){return ya(n)!==null}function cP(n,e){return n.hasOwnProperty(e)&&n[e]||null}function uP(n){let e=n?.[Xu]??null;return e||null}function Zf(n){return n&&n.hasOwnProperty(Gu)?n[Gu]:null}var Xu=pe({\u0275prov:pe}),Gu=pe({\u0275inj:pe}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=B({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function hp(n){return n&&!!n.\u0275providers}var fp=pe({\u0275cmp:pe}),pp=pe({\u0275dir:pe}),gp=pe({\u0275pipe:pe}),mp=pe({\u0275mod:pe}),ga=pe({\u0275fac:pe}),vi=pe({__NG_ELEMENT_ID__:pe}),Tw=pe({__NG_ENV_ID__:pe});function va(n){return typeof n=="string"?n:n==null?"":String(n)}function Sw(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():va(n)}var Cw=pe({ngErrorCode:pe}),lP=pe({ngErrorMessage:pe}),dP=pe({ngTokenPath:pe});function yp(n,e){return Dw("",-200,e)}function el(n,e){throw new j(-201,!1)}function Dw(n,e,t){let r=new j(e,n);return r[Cw]=e,r[lP]=n,t&&(r[dP]=t),r}function hP(n){return n[Cw]}var Xf;function Aw(){return Xf}function xt(n){let e=Xf;return Xf=n,e}function vp(n,e,t){let r=ya(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;el(n,"Injector")}var fP={},hi=fP,ep="__NG_DI_FLAG__",tp=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=fi(t)||0;try{return this.injector.get(e,r&8?null:hi,r)}catch(i){if(lo(i))return i;throw i}}};function pP(n,e=0){let t=mu();if(t===void 0)throw new j(-203,!1);if(t===null)return vp(n,void 0,e);{let r=gP(e),i=t.retrieve(n,r);if(lo(i)){if(r.optional)return null;throw i}return i}}function te(n,e=0){return(Aw()||pP)(At(n),e)}function M(n,e){return te(n,fi(e))}function fi(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function gP(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function np(n){let e=[];for(let t=0;t<n.length;t++){let r=At(n[t]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let c=r[s],u=mP(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(te(i,o))}else e.push(te(r))}return e}function Rw(n,e){return n[ep]=e,n.prototype[ep]=e,n}function mP(n){return n[ep]}function pi(n,e){let t=n.hasOwnProperty(ga);return t?n[ga]:null}function tl(n,e){n.forEach(t=>Array.isArray(t)?tl(t,e):e(t))}function _p(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function _a(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var _i={},gi=[],Tr=new U(""),Ip=new U("",-1),Ep=new U(""),ma=class{get(e,t=hi){if(t===hi){let i=Dw("",-201);throw i.name="\u0275NotFound",i}return t}};function wp(n){return n[mp]||null}function br(n){return n[fp]||null}function Tp(n){return n[pp]||null}function Nw(n){return n[gp]||null}function rn(n){return{\u0275providers:n}}function Pw(...n){return{\u0275providers:bp(!0,n),\u0275fromNgModule:!0}}function bp(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return tl(e,s=>{let c=s;Ku(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&xw(i,o),t}function xw(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Sp(i,o=>{e(o,r)})}}function Ku(n,e,t,r){if(n=At(n),!n)return!1;let i=null,o=Zf(n),s=!o&&br(n);if(!o&&!s){let u=n.ngModule;if(o=Zf(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Ku(l,e,t,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let l;try{tl(o.imports,h=>{Ku(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&xw(l,e)}if(!c){let l=pi(i)||(()=>new i);e({provide:i,useFactory:l,deps:gi},i),e({provide:Ep,useValue:i,multi:!0},i),e({provide:Tr,useValue:()=>te(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let l=n;Sp(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Sp(n,e){for(let t of n)hp(t)&&(t=t.\u0275providers),Array.isArray(t)?Sp(t,e):e(t)}var yP=pe({provide:String,useValue:pe});function Mw(n){return n!==null&&typeof n=="object"&&yP in n}function vP(n){return!!(n&&n.useExisting)}function _P(n){return!!(n&&n.useFactory)}function Qu(n){return typeof n=="function"}var Ia=new U(""),Wu={},bw={},Jf;function Ea(){return Jf===void 0&&(Jf=new ma),Jf}var Ge=class{},mi=class extends Ge{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,ip(e,s=>this.processProvider(s)),this.records.set(Ip,Ao(void 0,this)),i.has("environment")&&this.records.set(Ge,Ao(void 0,this));let o=this.records.get(Ia);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Ep,gi,{self:!0}))}retrieve(e,t){let r=fi(t)||0;try{return this.get(e,hi,r)}catch(i){if(lo(i))return i;throw i}}destroy(){pa(this),this._destroyed=!0;let e=z(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),z(e)}}onDestroy(e){return pa(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){pa(this);let t=gn(this),r=xt(void 0),i;try{return e()}finally{gn(t),xt(r)}}get(e,t=hi,r){if(pa(this),e.hasOwnProperty(Tw))return e[Tw](this);let i=fi(r),o,s=gn(this),c=xt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=bP(e)&&ya(e);h&&this.injectableDefInScope(h)?l=Ao(rp(e),Wu):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Ea():this.parent;return t=i&8&&t===hi?null:t,u.get(e,t)}catch(u){let l=hP(u);throw l===-200||l===-201?new j(l,null):u}finally{xt(c),gn(s)}}resolveInjectorInitializers(){let e=z(null),t=gn(this),r=xt(void 0),i;try{let o=this.get(Tr,gi,{self:!0});for(let s of o)s()}finally{gn(t),xt(r),z(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Er(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=At(e);let t=Qu(e)?e:At(e&&e.provide),r=EP(e);if(!Qu(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ao(void 0,Wu,!0),i.factory=()=>np(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=z(null);try{if(t.value===bw)throw yp(Er(e));return t.value===Wu&&(t.value=bw,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&TP(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{z(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=At(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function rp(n){let e=ya(n),t=e!==null?e.factory:pi(n);if(t!==null)return t;if(n instanceof U)throw new j(204,!1);if(n instanceof Function)return IP(n);throw new j(204,!1)}function IP(n){if(n.length>0)throw new j(204,!1);let t=uP(n);return t!==null?()=>t.factory(n):()=>new n}function EP(n){if(Mw(n))return Ao(void 0,n.useValue);{let e=kw(n);return Ao(e,Wu)}}function kw(n,e,t){let r;if(Qu(n)){let i=At(n);return pi(i)||rp(i)}else if(Mw(n))r=()=>At(n.useValue);else if(_P(n))r=()=>n.useFactory(...np(n.deps||[]));else if(vP(n))r=(i,o)=>te(At(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=At(n&&(n.useClass||n.provide));if(wP(n))r=()=>new i(...np(n.deps));else return pi(i)||rp(i)}return r}function pa(n){if(n.destroyed)throw new j(205,!1)}function Ao(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function wP(n){return!!n.deps}function TP(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function bP(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function ip(n,e){for(let t of n)Array.isArray(t)?ip(t,e):t&&hp(t)?ip(t.\u0275providers,e):e(t)}function Qe(n,e){let t;n instanceof mi?(pa(n),t=n):t=new tp(n);let r,i=gn(t),o=xt(void 0);try{return e()}finally{gn(i),xt(o)}}function Ow(){return Aw()!==void 0||mu()!=null}var on=0,Q=1,Y=2,Xe=3,qt=4,zt=5,No=6,Po=7,Fe=8,$n=9,mn=10,je=11,xo=12,Cp=13,Ii=14,Mt=15,Ei=16,wi=17,Ti=18,wa=19,Dp=20,jn=21,nl=22,Mo=23,kt=24,rl=25,bi=26,et=27,Lw=1,Ap=6,Sr=7,Ta=8,ba=9,Ve=10;function Bn(n){return Array.isArray(n)&&typeof n[Lw]=="object"}function sn(n){return Array.isArray(n)&&n[Lw]===!0}function Rp(n){return(n.flags&4)!==0}function Cr(n){return n.componentOffset>-1}function il(n){return(n.flags&1)===1}function Si(n){return!!n.template}function ko(n){return(n[Y]&512)!==0}function Ci(n){return(n[Y]&256)===256}var Np="svg",Fw="math";function Wt(n){for(;Array.isArray(n);)n=n[on];return n}function Vw(n,e){return Wt(e[n])}function yn(n,e){return Wt(e[n.index])}function Sa(n,e){return n.data[e]}function jw(n,e){return n[e]}function an(n,e){let t=e[n];return Bn(t)?t:t[on]}function ol(n){return(n[Y]&128)===128}function Uw(n){return sn(n[Xe])}function vn(n,e){return e==null?null:n[e]}function Pp(n){n[wi]=0}function xp(n){n[Y]&1024||(n[Y]|=1024,ol(n)&&Oo(n))}function $w(n,e){for(;n>0;)e=e[Ii],n--;return e}function Ca(n){return!!(n[Y]&9216||n[kt]?.dirty)}function sl(n){n[mn].changeDetectionScheduler?.notify(8),n[Y]&64&&(n[Y]|=1024),Ca(n)&&Oo(n)}function Oo(n){n[mn].changeDetectionScheduler?.notify(0);let e=wr(n);for(;e!==null&&!(e[Y]&8192||(e[Y]|=8192,!ol(e)));)e=wr(e)}function Mp(n,e){if(Ci(n))throw new j(911,!1);n[jn]===null&&(n[jn]=[]),n[jn].push(e)}function Bw(n,e){if(n[jn]===null)return;let t=n[jn].indexOf(e);t!==-1&&n[jn].splice(t,1)}function wr(n){let e=n[Xe];return sn(e)?e[Xe]:e}function Hw(n){return n[Po]??=[]}function qw(n){return n.cleanup??=[]}var ae={lFrame:rT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var op=!1;function zw(){return ae.lFrame.elementDepthCount}function Ww(){ae.lFrame.elementDepthCount++}function kp(){ae.lFrame.elementDepthCount--}function Gw(){return ae.bindingsEnabled}function Kw(){return ae.skipHydrationRootTNode!==null}function Op(n){return ae.skipHydrationRootTNode===n}function Lp(){ae.skipHydrationRootTNode=null}function Ie(){return ae.lFrame.lView}function cn(){return ae.lFrame.tView}function xe(n){return ae.lFrame.contextLView=n,n[Fe]}function Me(n){return ae.lFrame.contextLView=null,n}function Gt(){let n=Fp();for(;n!==null&&n.type===64;)n=n.parent;return n}function Fp(){return ae.lFrame.currentTNode}function Qw(){let n=ae.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Lo(n,e){let t=ae.lFrame;t.currentTNode=n,t.isParent=e}function Vp(){return ae.lFrame.isParent}function Yw(){ae.lFrame.isParent=!1}function Jw(){return ae.lFrame.contextLView}function jp(){return op}function al(n){let e=op;return op=n,e}function Zw(n){return ae.lFrame.bindingIndex=n}function Di(){return ae.lFrame.bindingIndex++}function Xw(){return ae.lFrame.inI18n}function eT(n,e){let t=ae.lFrame;t.bindingIndex=t.bindingRootIndex=n,cl(e)}function tT(){return ae.lFrame.currentDirectiveIndex}function cl(n){ae.lFrame.currentDirectiveIndex=n}function Up(n){ae.lFrame.currentQueryIndex=n}function SP(n){let e=n[Q];return e.type===2?e.declTNode:e.type===1?n[zt]:null}function $p(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=SP(o),i===null||(o=o[Ii],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ae.lFrame=nT();return r.currentTNode=e,r.lView=n,!0}function ul(n){let e=nT(),t=n[Q];ae.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function nT(){let n=ae.lFrame,e=n===null?null:n.child;return e===null?rT(n):e}function rT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function iT(){let n=ae.lFrame;return ae.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Bp=iT;function ll(){let n=iT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function oT(n){return(ae.lFrame.contextLView=$w(n,ae.lFrame.contextLView))[Fe]}function Da(){return ae.lFrame.selectedIndex}function Dr(n){ae.lFrame.selectedIndex=n}function Hp(){let n=ae.lFrame;return Sa(n.tView,n.selectedIndex)}function dl(){ae.lFrame.currentNamespace=Np}function hl(){CP()}function CP(){ae.lFrame.currentNamespace=null}function sT(){return ae.lFrame.currentNamespace}var aT=!0;function fl(){return aT}function pl(n){aT=n}function sp(n,e=null,t=null,r){let i=qp(n,e,t,r);return i.resolveInjectorInitializers(),i}function qp(n,e=null,t=null,r,i=new Set){let o=[t||gi,Pw(n)];return r=r||(typeof n=="object"?void 0:Er(n)),new mi(o,e||Ea(),r||null,i)}var Ke=class n{static THROW_IF_NOT_FOUND=hi;static NULL=new ma;static create(e,t){if(Array.isArray(e))return sp({name:""},t,e,"");{let r=e.name??"";return sp({name:r},e.parent,e.providers,r)}}static \u0275prov=B({token:n,providedIn:"any",factory:()=>te(Ip)});static __NG_ELEMENT_ID__=-1},at=new U(""),Hn=(()=>{class n{static __NG_ELEMENT_ID__=DP;static __NG_ENV_ID__=t=>t}return n})(),Yu=class extends Hn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Ci(this._lView)}onDestroy(e){let t=this._lView;return Mp(t,e),()=>Bw(t,e)}};function DP(){return new Yu(Ie())}var Ht=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Kt=new U("",{providedIn:"root",factory:()=>{let n=M(Ge),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Ht),e.handleError(t))}}}),cT={provide:Tr,useValue:()=>void M(Ht),multi:!0};function Ce(n,e){let[t,r,i]=Of(n,e?.equal),o=t,s=o[bt];return o.set=r,o.update=i,o.asReadonly=zp.bind(o),o}function zp(){let n=this[bt];if(n.readonlyFn===void 0){let e=()=>this();e[bt]=n,n.readonlyFn=e}return n.readonlyFn}var Un=class{},Aa=new U("",{providedIn:"root",factory:()=>!1});var Wp=new U(""),Gp=new U(""),_n=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ze(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ie(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}return n})(),Ai=(()=>{class n{internalPendingTasks=M(_n);scheduler=M(Un);errorHandler=M(Kt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}return n})();function Fo(...n){}var gl=(()=>{class n{static \u0275prov=B({token:n,providedIn:"root",factory:()=>new ap})}return n})(),ap=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function La(n){return{toString:n}.toString()}var ml="__parameters__";function OP(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function LP(n,e,t){return La(()=>{let r=OP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return c.annotation=s,c;function c(u,l,h){let p=u.hasOwnProperty(ml)?u[ml]:Object.defineProperty(u,ml,{value:[]})[ml];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Ot=Rw(LP("Optional"),8);function FP(n){return typeof n=="function"}var El=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function jT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Eg=(()=>{let n=()=>UT;return n.ngInherit=!0,n})();function UT(n){return n.type.prototype.ngOnChanges&&(n.setInput=jP),VP}function VP(){let n=BT(this),e=n?.current;if(e){let t=n.previous;if(t===_i)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function jP(n,e,t,r,i){let o=this.declaredInputs[r],s=BT(n)||UP(n,{previous:_i,current:null}),c=s.current||(s.current={}),u=s.previous,l=u[o];c[o]=new El(l&&l.currentValue,t,u===_i),jT(n,e,i,t)}var $T="__ngSimpleChanges__";function BT(n){return n[$T]||null}function UP(n,e){return n[$T]=e}var uT=[];var Te=function(n,e=null,t){for(let r=0;r<uT.length;r++){let i=uT[r];i(n,e,t)}};function $P(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=UT(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function BP(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function yl(n,e,t){HT(n,e,3,t)}function vl(n,e,t,r){(n[Y]&3)===t&&HT(n,e,t,r)}function Kp(n,e){let t=n[Y];(t&3)===e&&(t&=16383,t+=1,n[Y]=t)}function HT(n,e,t,r){let i=r!==void 0?n[wi]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(n[wi]+=65536),(c<o||o==-1)&&(HP(n,t,e,u),n[wi]=(n[wi]&4294901760)+u+2),u++}function lT(n,e){Te(4,n,e);let t=z(null);try{e.call(n)}finally{z(t),Te(5,n,e)}}function HP(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],c=n[s];i?n[Y]>>14<n[wi]>>16&&(n[Y]&3)===e&&(n[Y]+=16384,lT(c,o)):lT(c,o)}var jo=-1,Pa=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function qP(n){return(n.flags&8)!==0}function zP(n){return(n.flags&16)!==0}function WP(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],c=t[r++];n.setAttribute(e,s,c,o)}else{let o=i,s=t[++r];KP(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function GP(n){return n===3||n===4||n===6}function KP(n){return n.charCodeAt(0)===64}function Fl(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?dT(n,t,i,null,e[++r]):dT(n,t,i,null,null))}}return n}function dT(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let c=n[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<n.length;){let c=n[o];if(typeof c=="number")break;if(c===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function qT(n){return n!==jo}function wl(n){return n&32767}function QP(n){return n>>16}function Tl(n,e){let t=QP(n),r=e;for(;t>0;)r=r[Ii],t--;return r}var Xp=!0;function hT(n){let e=Xp;return Xp=n,e}var YP=256,zT=YP-1,WT=5,JP=0,In={};function ZP(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(vi)&&(r=t[vi]),r==null&&(r=t[vi]=JP++);let i=r&zT,o=1<<i;e.data[n+(i>>WT)]|=o}function GT(n,e){let t=KT(n,e);if(t!==-1)return t;let r=e[Q];r.firstCreatePass&&(n.injectorIndex=e.length,Qp(r.data,n),Qp(e,null),Qp(r.blueprint,null));let i=wg(n,e),o=n.injectorIndex;if(qT(i)){let s=wl(i),c=Tl(i,e),u=c[Q].data;for(let l=0;l<8;l++)e[o+l]=c[s+l]|u[s+l]}return e[o+8]=i,o}function Qp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function KT(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function wg(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=XT(i),r===null)return jo;if(t++,i=i[Ii],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return jo}function XP(n,e,t){ZP(n,e,t)}function QT(n,e,t){if(t&8||n!==void 0)return n;el(e,"NodeInjector")}function YT(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[$n],o=xt(void 0);try{return i?i.get(e,r,t&8):vp(e,r,t&8)}finally{xt(o)}}return QT(r,e,t)}function JT(n,e,t,r=0,i){if(n!==null){if(e[Y]&2048&&!(r&2)){let s=ix(n,e,t,r,In);if(s!==In)return s}let o=ZT(n,e,t,r,In);if(o!==In)return o}return YT(e,t,r,i)}function ZT(n,e,t,r,i){let o=nx(t);if(typeof o=="function"){if(!$p(e,n,r))return r&1?QT(i,t,r):YT(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))el(t);else return s}finally{Bp()}}else if(typeof o=="number"){let s=null,c=KT(n,e),u=jo,l=r&1?e[Mt][zt]:null;for((c===-1||r&4)&&(u=c===-1?wg(n,e):e[c+8],u===jo||!pT(r,!1)?c=-1:(s=e[Q],c=wl(u),e=Tl(u,e)));c!==-1;){let h=e[Q];if(fT(o,c,h.data)){let p=ex(c,e,t,s,r,l);if(p!==In)return p}u=e[c+8],u!==jo&&pT(r,e[Q].data[c+8]===l)&&fT(o,c,e)?(s=h,c=wl(u),e=Tl(u,e)):c=-1}}return i}function ex(n,e,t,r,i,o){let s=e[Q],c=s.data[n+8],u=r==null?Cr(c)&&Xp:r!=s&&(c.type&3)!==0,l=i&1&&o===c,h=tx(c,s,t,u,l);return h!==null?eg(e,s,h,c,i):In}function tx(n,e,t,r,i){let o=n.providerIndexes,s=e.data,c=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?c:c+h,m=i?c+h:l;for(let y=p;y<m;y++){let D=s[y];if(y<u&&t===D||y>=u&&D.type===t)return y}if(i){let y=s[u];if(y&&Si(y)&&y.type===t)return u}return null}function eg(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Pa){let c=o;if(c.resolving){let y=Sw(s[t]);throw yp(y)}let u=hT(c.canSeeViewProviders);c.resolving=!0;let l=s[t].type||s[t],h,p=c.injectImpl?xt(c.injectImpl):null,m=$p(n,r,0);try{o=n[t]=c.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&$P(t,s[t],e)}finally{p!==null&&xt(p),hT(u),c.resolving=!1,Bp()}}return o}function nx(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(vi)?n[vi]:void 0;return typeof e=="number"?e>=0?e&zT:rx:e}function fT(n,e,t){let r=1<<n;return!!(t[e+(n>>WT)]&r)}function pT(n,e){return!(n&2)&&!(n&1&&e)}var Ri=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return JT(this._tNode,this._lView,e,fi(r),t)}};function rx(){return new Ri(Gt(),Ie())}function Vl(n){return La(()=>{let e=n.prototype.constructor,t=e[ga]||tg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[ga]||tg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function tg(n){return lp(n)?()=>{let e=tg(At(n));return e&&e()}:pi(n)}function ix(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Y]&2048&&!ko(s);){let c=ZT(o,s,t,r|2,In);if(c!==In)return c;let u=o.parent;if(!u){let l=s[Dp];if(l){let h=l.get(t,In,r);if(h!==In)return h}u=XT(s),s=s[Ii]}o=u}return i}function XT(n){let e=n[Q],t=e.type;return t===2?e.declTNode:t===1?n[zt]:null}function ox(){return Tg(Gt(),Ie())}function Tg(n,e){return new eb(yn(n,e))}var eb=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=ox}return n})();function tb(n){return(n.flags&128)===128}var bg=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(bg||{}),nb=new Map,sx=0;function ax(){return sx++}function cx(n){nb.set(n[wa],n)}function ng(n){nb.delete(n[wa])}var gT="__ngContext__";function Uo(n,e){Bn(e)?(n[gT]=e[wa],cx(e)):n[gT]=e}function rb(n){return ob(n[xo])}function ib(n){return ob(n[qt])}function ob(n){for(;n!==null&&!sn(n);)n=n[qt];return n}var rg;function Sg(n){rg=n}function sb(){if(rg!==void 0)return rg;if(typeof document<"u")return document;throw new j(210,!1)}var jl=new U("",{providedIn:"root",factory:()=>ux}),ux="ng",Ul=new U(""),Mi=new U("",{providedIn:"platform",factory:()=>"unknown"});var $l=new U("",{providedIn:"root",factory:()=>sb().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var lx="h",dx="b";var ab="r";var cb="di";var ub=!1,lb=new U("",{providedIn:"root",factory:()=>ub});var hx=(n,e,t,r)=>{};function fx(n,e,t,r){hx(n,e,t,r)}function Cg(n){return(n.flags&32)===32}var px=()=>null;function db(n,e,t=!1){return px(n,e,t)}function hb(n,e){let t=n.contentQueries;if(t!==null){let r=z(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let c=n.data[s];Up(o),c.contentQueries(2,e[s],s)}}}finally{z(r)}}}function ig(n,e,t){Up(0);let r=z(null);try{e(n,t)}finally{z(r)}}function fb(n,e,t){if(Rp(e)){let r=z(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=n.data[s];if(c.contentQueries){let u=t[s];c.contentQueries(1,u,s)}}}finally{z(r)}}}var qn=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(qn||{});var bl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ju})`}};function pb(n){return n instanceof bl?n.changingThisBreaksApplicationSecurity:n}function gb(n,e){let t=mb(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Ju})`)}return t===e}function mb(n){return n instanceof bl&&n.getTypeName()||null}var gx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function yb(n){return n=String(n),n.match(gx)?n:"unsafe:"+n}function mx(n,e){return n.createText(e)}function yx(n,e,t){n.setValue(e,t)}function vb(n,e,t){return n.createElement(e,t)}function Sl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function _b(n,e,t){n.appendChild(e,t)}function mT(n,e,t,r,i){r!==null?Sl(n,e,t,r,i):_b(n,e,t)}function Ib(n,e,t,r){n.removeChild(null,e,t,r)}function vx(n,e,t){n.setAttribute(e,"style",t)}function _x(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Eb(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&WP(n,e,r),i!==null&&_x(n,e,i),o!==null&&vx(n,e,o)}var Dg=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Dg||{});function Ag(n){let e=Ix();return e?e.sanitize(Dg.URL,n)||"":gb(n,"URL")?pb(n):yb(va(n))}function Ix(){let n=Ie();return n&&n[mn].sanitizer}function wb(n){return n instanceof Function?n():n}function Ex(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var Tb="ng-template";function wx(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Ex(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Rg(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Rg(n){return n.type===4&&n.value!==Tb}function Tx(n,e,t){let r=n.type===4&&!t?Tb:n.value;return e===r}function bx(n,e,t){let r=4,i=n.attrs,o=i!==null?Dx(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!un(r)&&!un(u))return!1;if(s&&un(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!Tx(n,u,t)||u===""&&e.length===1){if(un(r))return!1;s=!0}}else if(r&8){if(i===null||!wx(n,i,u,t)){if(un(r))return!1;s=!0}}else{let l=e[++c],h=Sx(u,i,Rg(n),t);if(h===-1){if(un(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(un(r))return!1;s=!0}}}}return un(r)||s}function un(n){return(n&1)===0}function Sx(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Ax(e,n)}function Cx(n,e,t=!1){for(let r=0;r<e.length;r++)if(bx(n,e[r],t))return!0;return!1}function Dx(n){for(let e=0;e<n.length;e++){let t=n[e];if(GP(t))return e}return n.length}function Ax(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function yT(n,e){return n?":not("+e.trim()+")":e}function Rx(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let c=n[++t];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!un(s)&&(e+=yT(o,i),i=""),r=s,o=o||!un(r);t++}return i!==""&&(e+=yT(o,i)),e}function Nx(n){return n.map(Rx).join(",")}function Px(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!un(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Ar={};function Ng(n,e,t,r,i,o,s,c,u,l,h){let p=et+r,m=p+i,y=xx(p,m),D=typeof l=="function"?l():l;return y[Q]={type:n,blueprint:y,template:t,queries:null,viewQuery:c,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:D,incompleteFirstPass:!1,ssrId:h}}function xx(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ar);return t}function Mx(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Ng(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Pg(n,e,t,r,i,o,s,c,u,l,h){let p=e.blueprint.slice();return p[on]=i,p[Y]=r|4|128|8|64|1024,(l!==null||n&&n[Y]&2048)&&(p[Y]|=2048),Pp(p),p[Xe]=p[Ii]=n,p[Fe]=t,p[mn]=s||n&&n[mn],p[je]=c||n&&n[je],p[$n]=u||n&&n[$n]||null,p[zt]=o,p[wa]=ax(),p[No]=h,p[Dp]=l,p[Mt]=e.type==2?n[Mt]:p,p}function kx(n,e,t){let r=yn(e,n),i=Mx(t),o=n[mn].rendererFactory,s=xg(n,Pg(n,i,null,bb(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function bb(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function Sb(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function xg(n,e){return n[xo]?n[Cp][qt]=e:n[xo]=e,n[Cp]=e,e}function Ae(n=1){Cb(cn(),Ie(),Da()+n,!1)}function Cb(n,e,t,r){if(!r)if((e[Y]&3)===3){let o=n.preOrderCheckHooks;o!==null&&yl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&vl(e,o,0,t)}Dr(t)}var Bl=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Bl||{});function og(n,e,t,r){let i=z(null);try{let[o,s,c]=n.inputs[t],u=null;(s&Bl.SignalBased)!==0&&(u=e[o][bt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):jT(e,u,o,r)}finally{z(i)}}var ki=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(ki||{}),Ox;function Mg(n,e){return Ox(n,e)}var Ni=new Set,kg=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(kg||{}),Fa=new U(""),vT=new Set;function Rr(n){vT.has(n)||(vT.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Db=!1,sg=class extends st{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Ow()&&(this.destroyRef=M(Hn,{optional:!0})??void 0,this.pendingTasks=M(_n,{optional:!0})??void 0)}emit(e){let t=z(null);try{super.next(e)}finally{z(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof Pe&&e.add(c),c}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},wt=sg;function Ab(n){let e,t;function r(){n=Fo;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function _T(n){return queueMicrotask(()=>n()),()=>{n=Fo}}var Og="isAngularZone",Cl=Og+"_ID",Lx=0,ve=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new wt(!1);onMicrotaskEmpty=new wt(!1);onStable=new wt(!1);onError=new wt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Db}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,jx(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Og)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new j(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Fx,Fo,Fo);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Fx={};function Lg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Vx(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Ab(()=>{n.callbackScheduled=!1,ag(n),n.isCheckStableRunning=!0,Lg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),ag(n)}function jx(n){let e=()=>{Vx(n)},t=Lx++;n._inner=n._inner.fork({name:"angular",properties:{[Og]:!0,[Cl]:t,[Cl+t]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(Ux(u))return r.invokeTask(o,s,c,u);try{return IT(n),r.invokeTask(o,s,c,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),ET(n)}},onInvoke:(r,i,o,s,c,u,l)=>{try{return IT(n),r.invoke(o,s,c,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!$x(u)&&e(),ET(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,ag(n),Lg(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function ag(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function IT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function ET(n){n._nesting--,Lg(n)}var Dl=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new wt;onMicrotaskEmpty=new wt;onStable=new wt;onError=new wt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Ux(n){return Rb(n,"__ignore_ng_zone__")}function $x(n){return Rb(n,"__scheduler_tick__")}function Rb(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Nb=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}return n})();var Pb=new U("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function xb(n,e,t){let r=n.get(Pb);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function Bx(n,e){let t=n.get(Pb);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)t.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function Hx(n,e){for(let[t,r]of e)xb(n,r.animateFns)}function wT(n,e,t,r){let i=n?.[bi]?.enter;e!==null&&i&&i.has(t.index)&&Hx(r,i)}function Vo(n,e,t,r,i,o,s,c){if(i!=null){let u,l=!1;sn(i)?u=i:Bn(i)&&(l=!0,i=i[on]);let h=Wt(i);n===0&&r!==null?(wT(c,r,o,t),s==null?_b(e,r,h):Sl(e,r,h,s||null,!0)):n===1&&r!==null?(wT(c,r,o,t),Sl(e,r,h,s||null,!0)):n===2?TT(c,o,t,p=>{Ib(e,h,l,p)}):n===3&&TT(c,o,t,()=>{e.destroyNode(h)}),u!=null&&nM(e,n,t,u,o,r,s)}}function qx(n,e){Mb(n,e),e[on]=null,e[zt]=null}function zx(n,e,t,r,i,o){r[on]=i,r[zt]=e,ql(n,r,t,1,i,o)}function Mb(n,e){e[mn].changeDetectionScheduler?.notify(9),ql(n,e,e[je],2,null,null)}function Wx(n){let e=n[xo];if(!e)return Yp(n[Q],n);for(;e;){let t=null;if(Bn(e))t=e[xo];else{let r=e[Ve];r&&(t=r)}if(!t){for(;e&&!e[qt]&&e!==n;)Bn(e)&&Yp(e[Q],e),e=e[Xe];e===null&&(e=n),Bn(e)&&Yp(e[Q],e),t=e&&e[qt]}e=t}}function Fg(n,e){let t=n[ba],r=t.indexOf(e);t.splice(r,1)}function Hl(n,e){if(Ci(e))return;let t=e[je];t.destroyNode&&ql(n,e,t,3,null,null),Wx(e)}function Yp(n,e){if(Ci(e))return;let t=z(null);try{e[Y]&=-129,e[Y]|=256,e[kt]&&ua(e[kt]),Qx(n,e),Kx(n,e),e[Q].type===1&&e[je].destroy();let r=e[Ei];if(r!==null&&sn(e[Xe])){r!==e[Xe]&&Fg(r,e);let i=e[Ti];i!==null&&i.detachView(n)}ng(e)}finally{z(t)}}function TT(n,e,t,r){let i=n?.[bi];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Ni.add(n),xb(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),c=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();c.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(c),Gx(n,r)}else n&&Ni.delete(n),r(!1)},i)}function Gx(n,e){let t=n[bi]?.running;if(t){t.then(()=>{n[bi].running=void 0,Ni.delete(n),e(!0)});return}e(!1)}function Kx(n,e){let t=n.cleanup,r=e[Po];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let c=t[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[t[s+1]];t[s].call(c)}r!==null&&(e[Po]=null);let i=e[jn];if(i!==null){e[jn]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[Mo];if(o!==null){e[Mo]=null;for(let s of o)s.destroy()}}function Qx(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Pa)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];Te(4,c,u);try{u.call(c)}finally{Te(5,c,u)}}else{Te(4,i,o);try{o.call(i)}finally{Te(5,i,o)}}}}}function Yx(n,e,t){return Jx(n,e.parent,t)}function Jx(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[on];if(Cr(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===qn.None||i===qn.Emulated)return null}return yn(r,t)}function Zx(n,e,t){return eM(n,e,t)}function Xx(n,e,t){return n.type&40?yn(n,t):null}var eM=Xx,bT;function Vg(n,e,t,r){let i=Yx(n,r,e),o=e[je],s=r.parent||e[zt],c=Zx(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)mT(o,i,t[u],c,!1);else mT(o,i,t,c,!1);bT!==void 0&&bT(o,r,e,t,i)}function Ra(n,e){if(e!==null){let t=e.type;if(t&3)return yn(e,n);if(t&4)return cg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ra(n,r);{let i=n[e.index];return sn(i)?cg(-1,i):Wt(i)}}else{if(t&128)return Ra(n,e.next);if(t&32)return Mg(e,n)()||Wt(n[e.index]);{let r=kb(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=wr(n[Mt]);return Ra(i,r)}else return Ra(n,e.next)}}}return null}function kb(n,e){if(e!==null){let r=n[Mt][zt],i=e.projection;return r.projection[i]}return null}function cg(n,e){let t=Ve+n+1;if(t<e.length){let r=e[t],i=r[Q].firstChild;if(i!==null)return Ra(r,i)}return e[Sr]}function jg(n,e,t,r,i,o,s){for(;t!=null;){let c=r[$n];if(t.type===128){t=t.next;continue}let u=r[t.index],l=t.type;if(s&&e===0&&(u&&Uo(Wt(u),r),t.flags|=2),!Cg(t))if(l&8)jg(n,e,t.child,r,i,o,!1),Vo(e,n,c,i,u,t,o,r);else if(l&32){let h=Mg(t,r),p;for(;p=h();)Vo(e,n,c,i,p,t,o,r);Vo(e,n,c,i,u,t,o,r)}else l&16?tM(n,e,r,t,i,o):Vo(e,n,c,i,u,t,o,r);t=s?t.projectionNext:t.next}}function ql(n,e,t,r,i,o){jg(t,r,n.firstChild,e,i,o,!1)}function tM(n,e,t,r,i,o){let s=t[Mt],u=s[zt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Vo(e,n,t[$n],i,h,r,o,t)}else{let l=u,h=s[Xe];tb(r)&&(l.flags|=128),jg(n,e,l,h,i,o,!0)}}function nM(n,e,t,r,i,o,s){let c=r[Sr],u=Wt(r);c!==u&&Vo(e,n,t,o,c,i,s);for(let l=Ve;l<r.length;l++){let h=r[l];ql(h[Q],h,n,e,o,c)}}function Ob(n,e,t,r,i){let o=Da(),s=r&2;try{Dr(-1),s&&e.length>et&&Cb(n,e,et,!1),Te(s?2:0,i,t),t(r,i)}finally{Dr(o),Te(s?3:1,i,t)}}function Lb(n,e,t){uM(n,e,t),(t.flags&64)===64&&lM(n,e,t)}function Ug(n,e,t=yn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?t(e,n):n[s];n[i++]=c}}}function rM(n,e,t,r){let o=r.get(lb,ub)||t===qn.ShadowDom,s=n.selectRootElement(e,o);return iM(s),s}function iM(n){oM(n)}var oM=()=>null;function sM(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function aM(n,e,t,r,i,o){let s=e[Q];if($g(n,s,e,t,r)){Cr(n)&&cM(e,n.index);return}n.type&3&&(t=sM(t)),Fb(n,e,t,r,i,o)}function Fb(n,e,t,r,i,o){if(n.type&3){let s=yn(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function cM(n,e){let t=an(e,n);t[Y]&16||(t[Y]|=64)}function uM(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Cr(t)&&kx(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||GT(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let c=n.data[s],u=eg(e,n,s,t);if(Uo(u,e),o!==null&&fM(e,s-r,u,c,t,o),Si(c)){let l=an(t.index,e);l[Fe]=eg(e,n,s,t)}}}function lM(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=tT();try{Dr(o);for(let c=r;c<i;c++){let u=n.data[c],l=e[c];cl(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&dM(u,l)}}finally{Dr(-1),cl(s)}}function dM(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function hM(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];Cx(e,o.selectors,!1)&&(r??=[],Si(o)?r.unshift(o):r.push(o))}return r}function fM(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1];og(r,t,u,l)}}function Vb(n,e,t,r,i){let o=et+t,s=e[Q],c=i(s,e,n,r,t);e[o]=c,Lo(n,!0);let u=n.type===2;return u?(Eb(e[je],c,n),(zw()===0||il(n))&&Uo(c,e),Ww()):Uo(c,e),fl()&&(!u||!Cg(n))&&Vg(s,e,c,n),n}function jb(n){let e=n;return Vp()?Yw():(e=e.parent,Lo(e,!1)),e}function pM(n,e){let t=n[$n];if(!t)return;let r;try{r=t.get(Kt,null)}catch{r=null}r?.(e)}function $g(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];og(p,t[l],h,i),c=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];og(h,l,r,i),c=!0}return c}function gM(n,e){let t=an(e,n),r=t[Q];mM(r,t);let i=t[on];i!==null&&t[No]===null&&(t[No]=db(i,t[$n])),Te(18),Bg(r,t,t[Fe]),Te(19,t[Fe])}function mM(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Bg(n,e,t){ul(e);try{let r=n.viewQuery;r!==null&&ig(1,r,t);let i=n.template;i!==null&&Ob(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ti]?.finishViewCreation(n),n.staticContentQueries&&hb(n,e),n.staticViewQueries&&ig(2,n.viewQuery,t);let o=n.components;o!==null&&yM(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Y]&=-5,ll()}}function yM(n,e){for(let t=0;t<e.length;t++)gM(n,e[t])}function Hg(n,e,t,r){let i=z(null);try{let o=e.tView,c=n[Y]&4096?4096:16,u=Pg(n,o,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Ei]=l;let h=n[Ti];return h!==null&&(u[Ti]=h.createEmbeddedView(o)),Bg(o,u,t),u}finally{z(i)}}function xa(n,e){return!e||e.firstChild===null||tb(n)}function Ma(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Wt(o)),sn(o)&&Ub(o,r);let s=t.type;if(s&8)Ma(n,e,t.child,r);else if(s&32){let c=Mg(t,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=kb(e,t);if(Array.isArray(c))r.push(...c);else{let u=wr(e[Mt]);Ma(u[Q],u,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function Ub(n,e){for(let t=Ve;t<n.length;t++){let r=n[t],i=r[Q].firstChild;i!==null&&Ma(r[Q],r,i,e)}n[Sr]!==n[on]&&e.push(n[Sr])}function $b(n){if(n[rl]!==null){for(let e of n[rl])e.impl.addSequence(e);n[rl].length=0}}var Bb=[];function vM(n){return n[kt]??_M(n)}function _M(n){let e=Bb.pop()??Object.create(EM);return e.lView=n,e}function IM(n){n.lView[kt]!==n&&(n.lView=null,Bb.push(n))}var EM=_e(F({},oa),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Oo(n.lView)},consumerOnSignalRead(){this.lView[kt]=this}});function wM(n){let e=n[kt]??Object.create(TM);return e.lView=n,e}var TM=_e(F({},oa),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=wr(n.lView);for(;e&&!Hb(e[Q]);)e=wr(e);e&&xp(e)},consumerOnSignalRead(){this.lView[kt]=this}});function Hb(n){return n.type!==2}function qb(n){if(n[Mo]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Mo])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Y]&8192)}}var bM=100;function zb(n,e=0){let r=n[mn].rendererFactory,i=!1;i||r.begin?.();try{SM(n,e)}finally{i||r.end?.()}}function SM(n,e){let t=jp();try{al(!0),ug(n,e);let r=0;for(;Ca(n);){if(r===bM)throw new j(103,!1);r++,ug(n,1)}}finally{al(t)}}function CM(n,e,t,r){if(Ci(e))return;let i=e[Y],o=!1,s=!1;ul(e);let c=!0,u=null,l=null;o||(Hb(n)?(l=vM(e),u=aa(l)):_u()===null?(c=!1,l=wM(e),u=aa(l)):e[kt]&&(ua(e[kt]),e[kt]=null));try{Pp(e),Zw(n.bindingStartIndex),t!==null&&Ob(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&yl(e,y,null)}else{let y=n.preOrderHooks;y!==null&&vl(e,y,0,null),Kp(e,0)}if(s||DM(e),qb(e),Wb(e,0),n.contentQueries!==null&&hb(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&yl(e,y)}else{let y=n.contentHooks;y!==null&&vl(e,y,1),Kp(e,1)}RM(n,e);let p=n.components;p!==null&&Kb(e,p,0);let m=n.viewQuery;if(m!==null&&ig(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&yl(e,y)}else{let y=n.viewHooks;y!==null&&vl(e,y,2),Kp(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[nl]){for(let y of e[nl])y();e[nl]=null}o||($b(e),e[Y]&=-73)}catch(h){throw o||Oo(e),h}finally{l!==null&&(Iu(l,u),c&&IM(l)),ll()}}function Wb(n,e){for(let t=rb(n);t!==null;t=ib(t))for(let r=Ve;r<t.length;r++){let i=t[r];Gb(i,e)}}function DM(n){for(let e=rb(n);e!==null;e=ib(e)){if(!(e[Y]&2))continue;let t=e[ba];for(let r=0;r<t.length;r++){let i=t[r];xp(i)}}}function AM(n,e,t){Te(18);let r=an(e,n);Gb(r,t),Te(19,r[Fe])}function Gb(n,e){ol(n)&&ug(n,e)}function ug(n,e){let r=n[Q],i=n[Y],o=n[kt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ca(o)),s||=!1,o&&(o.dirty=!1),n[Y]&=-9217,s)CM(r,n,r.template,n[Fe]);else if(i&8192){let c=z(null);try{qb(n),Wb(n,1);let u=r.components;u!==null&&Kb(n,u,1),$b(n)}finally{z(c)}}}function Kb(n,e,t){for(let r=0;r<e.length;r++)AM(n,e[r],t)}function RM(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Dr(~i);else{let o=i,s=t[++r],c=t[++r];eT(s,o);let u=e[o];Te(24,u),c(2,u),Te(25,u)}}}finally{Dr(-1)}}function qg(n,e){let t=jp()?64:1088;for(n[mn].changeDetectionScheduler?.notify(e);n;){n[Y]|=t;let r=wr(n);if(ko(n)&&!r)return n;n=r}return null}function Qb(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Yb(n,e){let t=Ve+e;if(t<n.length)return n[t]}function zl(n,e,t,r=!0){let i=e[Q];if(NM(i,e,n,t),r){let s=cg(t,n),c=e[je],u=c.parentNode(n[Sr]);u!==null&&zx(i,n[zt],c,e,u,s)}let o=e[No];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Jb(n,e){let t=ka(n,e);return t!==void 0&&Hl(t[Q],t),t}function ka(n,e){if(n.length<=Ve)return;let t=Ve+e,r=n[t];if(r){let i=r[Ei];i!==null&&i!==n&&Fg(i,r),e>0&&(n[t-1][qt]=r[qt]);let o=_a(n,Ve+e);qx(r[Q],r);let s=o[Ti];s!==null&&s.detachView(o[Q]),r[Xe]=null,r[qt]=null,r[Y]&=-129}return r}function NM(n,e,t,r){let i=Ve+r,o=t.length;r>0&&(t[i-1][qt]=e),r<o-Ve?(e[qt]=t[i],_p(t,Ve+r,e)):(t.push(e),e[qt]=null),e[Xe]=t;let s=e[Ei];s!==null&&t!==s&&Zb(s,e);let c=e[Ti];c!==null&&c.insertView(n),sl(e),e[Y]|=128}function Zb(n,e){let t=n[ba],r=e[Xe];if(Bn(r))n[Y]|=2;else{let i=r[Xe][Mt];e[Mt]!==i&&(n[Y]|=2)}t===null?n[ba]=[e]:t.push(e)}var Pi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Q];return Ma(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Fe]}set context(e){this._lView[Fe]=e}get destroyed(){return Ci(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Xe];if(sn(e)){let t=e[Ta],r=t?t.indexOf(this):-1;r>-1&&(ka(e,r),_a(t,r))}this._attachedToViewContainer=!1}Hl(this._lView[Q],this._lView)}onDestroy(e){Mp(this._lView,e)}markForCheck(){qg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Y]&=-129}reattach(){sl(this._lView),this._lView[Y]|=128}detectChanges(){this._lView[Y]|=1024,zb(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ko(this._lView),t=this._lView[Ei];t!==null&&!e&&Fg(t,this._lView),Mb(this._lView[Q],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let t=ko(this._lView),r=this._lView[Ei];r!==null&&!t&&Zb(r,this._lView),sl(this._lView)}};function Wl(n,e,t,r,i){let o=n.data[e];if(o===null)o=PM(n,e,t,r,i),Xw()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=Qw();o.injectorIndex=s===null?-1:s.injectorIndex}return Lo(o,!0),o}function PM(n,e,t,r,i){let o=Fp(),s=Vp(),c=s?o:o&&o.parent,u=n.data[e]=MM(n,c,t,e,r,i);return xM(n,u,o,s),u}function xM(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function MM(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,c=0;return Kw()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Q6=new RegExp(`^(\\d+)*(${dx}|${lx})*(.*)`);function kM(n){let e=n[Ap]??[],r=n[Xe][je],i=[];for(let o of e)o.data[cb]!==void 0?i.push(o):OM(o,r);n[Ap]=i}function OM(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[ab];for(;t<i;){let o=r.nextSibling;Ib(e,r,!1),r=o,t++}}}var LM=()=>null,FM=()=>null;function lg(n,e){return LM(n,e)}function Xb(n,e,t){return FM(n,e,t)}var eS=class{},Gl=class{},dg=class{resolveComponentFactory(e){throw new j(917,!1)}},Va=class{static NULL=new dg},xi=class{};var tS=(()=>{class n{static \u0275prov=B({token:n,providedIn:"root",factory:()=>null})}return n})();var _l={},hg=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,_l,r);return i!==_l||t===_l?i:this.parentInjector.get(e,t,r)}};function Al(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=up(i,c);else if(o==2){let u=c,l=e[++s];r=up(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Nr(n,e=0){let t=Ie();if(t===null)return te(n,e);let r=Gt();return JT(r,t,At(n),e)}function VM(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let c=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[c,u,l]=h.resolveHostDirectives(s);break}$M(n,e,t,c,o,u,l)}o!==null&&r!==null&&jM(t,r,o)}function jM(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new j(-301,!1);r.push(e[i],o)}}function UM(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function $M(n,e,t,r,i,o,s){let c=r.length,u=!1;for(let m=0;m<c;m++){let y=r[m];!u&&Si(y)&&(u=!0,UM(n,t,m)),XP(GT(t,e),n,y.type)}GM(t,n.data.length,c);for(let m=0;m<c;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=Sb(n,e,c,null);c>0&&(t.directiveToIndex=new Map);for(let m=0;m<c;m++){let y=r[m];if(t.mergedAttrs=Fl(t.mergedAttrs,y.hostAttrs),HM(n,t,e,p,y),WM(p,y,i),s!==null&&s.has(y)){let[N,R]=s.get(y);t.directiveToIndex.set(y.type,[p,N+t.directiveStart,R+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let D=y.type.prototype;!l&&(D.ngOnChanges||D.ngOnInit||D.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(D.ngOnChanges||D.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}BM(n,t,o)}function BM(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))ST(0,e,i,r),ST(1,e,i,r),DT(e,r,!1);else{let o=t.get(i);CT(0,e,o,r),CT(1,e,o,r),DT(e,r,!0)}}}function ST(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),nS(e,o)}}function CT(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;n===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),nS(e,s)}}function nS(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function DT(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Rg(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[c+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[c+1]);break}}c+=2}n.initialInputs??=[],n.initialInputs.push(s)}function HM(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=pi(i.type,!0)),s=new Pa(o,Si(i),Nr,null);n.blueprint[r]=s,t[r]=s,qM(n,e,r,Sb(n,t,i.hostVars,Ar),i)}function qM(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let c=~e.index;zM(s)!=c&&s.push(c),s.push(t,r,o)}}function zM(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function WM(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Si(e)&&(t[""]=n)}}function GM(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function rS(n,e,t,r,i,o,s,c){let u=e[Q],l=u.consts,h=vn(l,s),p=Wl(u,n,t,r,h);return o&&VM(u,e,p,vn(l,c),i),p.mergedAttrs=Fl(p.mergedAttrs,p.attrs),p.attrs!==null&&Al(p,p.attrs,!1),p.mergedAttrs!==null&&Al(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function iS(n,e){BP(n,e),Rp(e)&&n.queries.elementEnd(e)}function KM(n,e,t,r,i,o){let s=e.consts,c=vn(s,i),u=Wl(e,n,t,r,c);if(u.mergedAttrs=Fl(u.mergedAttrs,u.attrs),o!=null){let l=vn(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&Al(u,u.attrs,!1),u.mergedAttrs!==null&&Al(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Ho(n,e,t){if(t===Ar)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Il(n,e,t){return function r(i){let o=Cr(n)?an(n.index,e):e;qg(o,5);let s=e[Fe],c=AT(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)c=AT(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function AT(n,e,t,r){let i=z(null);try{return Te(6,e,t),t(r)!==!1}catch(o){return pM(n,o),!1}finally{Te(7,e,t),z(i)}}function oS(n,e,t,r,i,o,s,c){let u=il(n),l=!1,h=null;if(!r&&u&&(h=YM(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=yn(n,t),m=r?r(p):p;fx(t,m,o,c);let y=i.listen(m,o,c);if(!QM(o)){let D=r?N=>r(Wt(N[n.index])):n.index;sS(D,e,t,o,c,y,!1)}}return l}function QM(n){return n.startsWith("animation")||n.startsWith("transition")}function YM(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let c=e[Po],u=i[o+2];return c&&c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function sS(n,e,t,r,i,o,s){let c=e.firstCreatePass?qw(e):null,u=Hw(t),l=u.length;u.push(i,o),c&&c.push(r,n,l,(l+1)*(s?-1:1))}function RT(n,e,t,r,i,o){let s=e[t],c=e[Q],l=c.data[t].outputs[r],p=s[l].subscribe(o);sS(n.index,c,e,i,o,p,!0)}var fg=Symbol("BINDING");var Rl=class extends Va{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=br(e);return new $o(t,this.ngModule)}};function JM(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Bl.SignalBased)!==0};return i&&(o.transform=i),o})}function ZM(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function XM(n,e,t){let r=e instanceof Ge?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new hg(t,r):t}function ek(n){let e=n.get(xi,null);if(e===null)throw new j(407,!1);let t=n.get(tS,null),r=n.get(Un,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function tk(n,e){let t=aS(n);return vb(e,t,t==="svg"?Np:t==="math"?Fw:null)}function aS(n){return(n.selectors[0][0]||"div").toLowerCase()}var $o=class extends Gl{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=JM(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=ZM(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=Nx(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Te(22);let c=z(null);try{let u=this.componentDef,l=nk(r,u,s,o),h=XM(u,i||this.ngModule,e),p=ek(h),m=p.rendererFactory.createRenderer(null,u),y=r?rM(m,r,u.encapsulation,h):tk(u,m),D=s?.some(NT)||o?.some(O=>typeof O!="function"&&O.bindings.some(NT)),N=Pg(null,l,null,512|bb(u),null,null,p,m,h,null,db(y,h,!0));N[et]=y,ul(N);let R=null;try{let O=rS(et,N,2,"#host",()=>l.directiveRegistry,!0,0);Eb(m,y,O),Uo(y,N),Lb(l,N,O),fb(l,O,N),iS(l,O),t!==void 0&&ik(O,this.ngContentSelectors,t),R=an(O.index,N),N[Fe]=R[Fe],Bg(l,N,null)}catch(O){throw R!==null&&ng(R),ng(N),O}finally{Te(23),ll()}return new Nl(this.componentType,N,!!D)}finally{z(c)}}};function nk(n,e,t,r){let i=n?["ng-version","20.3.15"]:Px(e.selectors[0]),o=null,s=null,c=0;if(t)for(let h of t)c+=h[fg].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){c+=m[fg].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=Tp(p);u.push(m)}return Ng(0,null,rk(o,s),1,c,u,null,null,null,[i],null)}function rk(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function NT(n){let e=n[fg].kind;return e==="input"||e==="twoWay"}var Nl=class extends eS{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Sa(t[Q],et),this.location=Tg(this._tNode,t),this.instance=an(this._tNode.index,t)[Fe],this.hostView=this.changeDetectorRef=new Pi(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=$g(r,i[Q],i,e,t);this.previousInputValues.set(e,t);let s=an(r.index,i);qg(s,1)}get injector(){return new Ri(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function ik(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Kl=(()=>{class n{static __NG_ELEMENT_ID__=ok}return n})();function ok(){let n=Gt();return ak(n,Ie())}var sk=Kl,cS=class extends sk{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Tg(this._hostTNode,this._hostLView)}get injector(){return new Ri(this._hostTNode,this._hostLView)}get parentInjector(){let e=wg(this._hostTNode,this._hostLView);if(qT(e)){let t=Tl(e,this._hostLView),r=wl(e),i=t[Q].data[r+8];return new Ri(i,t)}else return new Ri(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=PT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ve}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=lg(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(c,i,xa(this._hostTNode,s)),c}createComponent(e,t,r,i,o,s,c){let u=e&&!FP(e),l;if(u)l=t;else{let R=t||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,c=R.bindings}let h=u?e:new $o(br(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let O=(u?p:this.parentInjector).get(Ge,null);O&&(o=O)}let m=br(h.componentType??{}),y=lg(this._lContainer,m?.id??null),D=y?.firstChild??null,N=h.create(p,i,D,o,s,c);return this.insertImpl(N.hostView,l,xa(this._hostTNode,y)),N}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Uw(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[Xe],l=new cS(u,u[zt],u[Xe]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return zl(s,i,o,r),e.attachToViewContainerRef(),_p(Jp(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=PT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=ka(this._lContainer,t);r&&(_a(Jp(this._lContainer),t),Hl(r[Q],r))}detach(e){let t=this._adjustIndex(e,-1),r=ka(this._lContainer,t);return r&&_a(Jp(this._lContainer),t)!=null?new Pi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function PT(n){return n[Ta]}function Jp(n){return n[Ta]||(n[Ta]=[])}function ak(n,e){let t,r=e[n.index];return sn(r)?t=r:(t=Qb(r,e,null,n),e[n.index]=t,xg(e,t)),uk(t,e,n,r),new cS(t,n,e)}function ck(n,e){let t=n[je],r=t.createComment(""),i=yn(e,n),o=t.parentNode(i);return Sl(t,o,r,t.nextSibling(i),!1),r}var uk=hk,lk=()=>!1;function dk(n,e,t){return lk(n,e,t)}function hk(n,e,t,r){if(n[Sr])return;let i;t.type&8?i=Wt(r):i=ck(e,t),n[Sr]=i}var Bo=class{},Ql=class{};var Pl=class extends Bo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Rl(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=wp(e);this._bootstrapComponents=wb(o.bootstrap),this._r3Injector=qp(e,t,[{provide:Bo,useValue:this},{provide:Va,useValue:this.componentFactoryResolver},...r],Er(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},xl=class extends Ql{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Pl(this.moduleType,e,[])}};var Oa=class extends Bo{injector;componentFactoryResolver=new Rl(this);instance=null;constructor(e){super();let t=new mi([...e.providers,{provide:Bo,useValue:this},{provide:Va,useValue:this.componentFactoryResolver}],e.parent||Ea(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ja(n,e,t=null){return new Oa({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var fk=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=bp(!1,t.type),i=r.length>0?ja([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=B({token:n,providedIn:"environment",factory:()=>new n(te(Ge))})}return n})();function Lt(n){return La(()=>{let e=uS(n),t=_e(F({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===bg.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(fk).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||qn.Emulated,styles:n.styles||gi,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Rr("NgStandalone"),lS(t);let r=n.dependencies;return t.directiveDefs=xT(r,pk),t.pipeDefs=xT(r,Nw),t.id=yk(t),t})}function pk(n){return br(n)||Tp(n)}function gk(n,e){if(n==null)return _i;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=Bl.None,u=null),t[o]=[r,c,u],e[o]=s}return t}function mk(n){if(n==null)return _i;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function zg(n){return La(()=>{let e=uS(n);return lS(e),e})}function uS(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||_i,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||gi,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:gk(n.inputs,e),outputs:mk(n.outputs),debugInfo:null}}function lS(n){n.features?.forEach(e=>e(n))}function xT(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function yk(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function vk(n,e,t,r,i,o,s,c){if(t.firstCreatePass){n.mergedAttrs=Fl(n.mergedAttrs,n.attrs);let h=n.tView=Ng(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}c&&(n.flags|=c),Lo(n,!1);let u=_k(t,e,n,r);fl()&&Vg(t,e,u,n),Uo(u,e);let l=Qb(u,e,u,n);e[r+et]=l,xg(e,l),dk(l,n,e)}function Ml(n,e,t,r,i,o,s,c,u,l,h){let p=t+et,m;if(e.firstCreatePass){if(m=Wl(e,p,4,s||null,c||null),l!=null){let y=vn(e.consts,l);m.localNames=[];for(let D=0;D<y.length;D+=2)m.localNames.push(y[D],-1)}}else m=e.data[p];return vk(m,n,e,t,r,i,o,u),l!=null&&Ug(n,m,h),m}var _k=Ik;function Ik(n,e,t,r){return pl(!0),e[je].createComment("")}var Wg=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Gg=new U("");function Ua(n){return!!n&&typeof n.then=="function"}function dS(n){return!!n&&typeof n.subscribe=="function"}var hS=new U("");var Kg=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=M(hS,{optional:!0})??[];injector=M(Ke);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Qe(this.injector,i);if(Ua(o))t.push(o);else if(dS(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Yl=new U("");function fS(){kf(()=>{let n="";throw new j(600,n)})}function pS(n){return n.isBoundToModule}var Ek=10;var Oi=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(Kt);afterRenderManager=M(Nb);zonelessEnabled=M(Aa);rootEffectScheduler=M(gl);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new st;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(_n);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(se(t=>!t))}constructor(){M(Fa,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=M(Ge);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Ke.NULL){return this._injector.get(ve).run(()=>{Te(10);let s=t instanceof Gl;if(!this._injector.get(Kg).done){let D="";throw new j(405,D)}let u;s?u=t:u=this._injector.get(Va).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=pS(u)?void 0:this._injector.get(Bo),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(Gg,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),Na(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),Te(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Te(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(kg.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);let t=z(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,z(t),this.afterTick.next(),Te(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(xi,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<Ek;)Te(14),this.synchronizeOnce(),Te(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Ca(i))continue;let o=r&&!this.zonelessEnabled?0:1;zb(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ca(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Na(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Yl,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Na(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new j(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Na(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var n3=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var pg=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function Zp(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function wk(n,e,t){let r,i,o=0,s=n.length-1,c=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=n.at(o),h=e[o],p=Zp(o,l,o,h,t);if(p!==0){p<0&&n.updateValue(o,h),o++;continue}let m=n.at(s),y=e[u],D=Zp(s,m,u,y,t);if(D!==0){D<0&&n.updateValue(s,y),s--,u--;continue}let N=t(o,l),R=t(s,m),O=t(o,h);if(Object.is(O,R)){let $=t(u,y);Object.is($,N)?(n.swap(o,s),n.updateValue(s,y),u--,s--):n.move(s,o),n.updateValue(o,h),o++;continue}if(r??=new kl,i??=kT(n,o,s,t),gg(n,r,o,O))n.updateValue(o,h),o++,s++;else if(i.has(O))r.set(N,n.detach(o)),s--;else{let $=n.create(o,e[o]);n.attach(o,$),o++,s++}}for(;o<=u;)MT(n,r,t,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=n.at(o),p=l.value,m=Zp(o,h,o,p,t);if(m!==0)m<0&&n.updateValue(o,p),o++,l=u.next();else{r??=new kl,i??=kT(n,o,s,t);let y=t(o,p);if(gg(n,r,o,y))n.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))n.attach(o,n.create(o,p)),o++,s++,l=u.next();else{let D=t(o,h);r.set(D,n.detach(o)),s--}}}for(;!l.done;)MT(n,r,t,n.length,l.value),l=u.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(u=>{n.destroy(u)})}function gg(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function MT(n,e,t,r,i){if(gg(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function kT(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var kl=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function $a(n,e,t,r,i,o,s,c){Rr("NgControlFlow");let u=Ie(),l=cn(),h=vn(l.consts,o);return Ml(u,l,n,e,t,r,i,h,256,s,c),Qg}function Qg(n,e,t,r,i,o,s,c){Rr("NgControlFlow");let u=Ie(),l=cn(),h=vn(l.consts,o);return Ml(u,l,n,e,t,r,i,h,512,s,c),Qg}function Ba(n,e){Rr("NgControlFlow");let t=Ie(),r=Di(),i=t[r]!==Ar?t[r]:-1,o=i!==-1?Ol(t,et+i):void 0,s=0;if(Ho(t,r,n)){let c=z(null);try{if(o!==void 0&&Jb(o,s),n!==-1){let u=et+n,l=Ol(t,u),h=_g(t[Q],u),p=Xb(l,h,t),m=Hg(t,h,e,{dehydratedView:p});zl(l,m,s,xa(h,p))}}finally{z(c)}}else if(o!==void 0){let c=Yb(o,s);c!==void 0&&(c[Fe]=e)}}var mg=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Ve}};function Yg(n){return n}var yg=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Jg(n,e,t,r,i,o,s,c,u,l,h,p,m){Rr("NgControlFlow");let y=Ie(),D=cn(),N=u!==void 0,R=Ie(),O=c?s.bind(R[Mt][Fe]):s,$=new yg(N,O);R[et+n]=$,Ml(y,D,n+1,e,t,r,i,vn(D.consts,o),256),N&&Ml(y,D,n+2,u,l,h,p,vn(D.consts,m),512)}var vg=class extends pg{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-Ve}at(e){return this.getLView(e)[Fe].$implicit}attach(e,t){let r=t[No];this.needsIndexUpdate||=e!==this.length,zl(this.lContainer,t,e,xa(this.templateTNode,r)),Tk(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,bk(this.lContainer,e),Sk(this.lContainer,e)}create(e,t){let r=lg(this.lContainer,this.templateTNode.tView.ssrId),i=Hg(this.hostLView,this.templateTNode,new mg(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Hl(e[Q],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[Fe].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Fe].$index=e}getLView(e){return Ck(this.lContainer,e)}};function Zg(n){let e=z(null),t=Da();try{let r=Ie(),i=r[Q],o=r[t],s=t+1,c=Ol(r,s);if(o.liveCollection===void 0){let l=_g(i,s);o.liveCollection=new vg(c,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(wk(u,n,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=Di(),h=u.length===0;if(Ho(r,l,h)){let p=t+2,m=Ol(r,p);if(h){let y=_g(i,p),D=Xb(m,y,r),N=Hg(r,y,void 0,{dehydratedView:D});zl(m,N,0,xa(y,D))}else i.firstUpdatePass&&kM(m),Jb(m,0)}}}finally{z(e)}}function Ol(n,e){return n[e]}function Tk(n,e){if(n.length<=Ve)return;let t=Ve+e,r=n[t],i=r?r[bi]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[$n];Bx(o,i),Ni.delete(r),i.detachedLeaveAnimationFns=void 0}}function bk(n,e){if(n.length<=Ve)return;let t=Ve+e,r=n[t],i=r?r[bi]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function Sk(n,e){return ka(n,e)}function Ck(n,e){return Yb(n,e)}function _g(n,e){return Sa(n,e)}function Jl(n,e,t){let r=Ie(),i=Di();if(Ho(r,i,e)){let o=cn(),s=Hp();aM(s,r,n,e,r[je],t)}return Jl}function OT(n,e,t,r,i){$g(e,n,t,i?"class":"style",r)}function Pr(n,e,t,r){let i=Ie(),o=i[Q],s=n+et,c=o.firstCreatePass?rS(s,i,2,e,hM,Gw(),t,r):o.data[s];if(Vb(c,i,n,e,gS),il(c)){let u=i[Q];Lb(u,i,c),fb(u,c,i)}return r!=null&&Ug(i,c),Pr}function zn(){let n=cn(),e=Gt(),t=jb(e);return n.firstCreatePass&&iS(n,t),Op(t)&&Lp(),kp(),t.classesWithoutHost!=null&&qP(t)&&OT(n,t,Ie(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&zP(t)&&OT(n,t,Ie(),t.stylesWithoutHost,!1),zn}function qo(n,e,t,r){return Pr(n,e,t,r),zn(),qo}function ne(n,e,t,r){let i=Ie(),o=i[Q],s=n+et,c=o.firstCreatePass?KM(s,o,2,e,t,r):o.data[s];return Vb(c,i,n,e,gS),r!=null&&Ug(i,c),ne}function re(){let n=Gt(),e=jb(n);return Op(e)&&Lp(),kp(),re}function zo(n,e,t,r){return ne(n,e,t,r),re(),zo}var gS=(n,e,t,r,i)=>(pl(!0),vb(e[je],r,sT()));function Wn(){return Ie()}function gt(n,e,t){let r=Ie(),i=Di();if(Ho(r,i,e)){let o=cn(),s=Hp();Fb(s,r,n,e,r[je],t)}return gt}var Ha="en-US";var Dk=Ha;function mS(n){typeof n=="string"&&(Dk=n.toLowerCase().replace(/_/g,"-"))}function Wo(n,e,t){let r=Ie(),i=cn(),o=Gt();return Ak(i,r,r[je],o,n,e,t),Wo}function Ue(n,e,t){let r=Ie(),i=cn(),o=Gt();return(o.type&3||t)&&oS(o,i,r,t,r[je],n,e,Il(o,r,e)),Ue}function Ak(n,e,t,r,i,o,s){let c=!0,u=null;if((r.type&3||s)&&(u??=Il(r,e,o),oS(r,n,e,s,t,i,o,u)&&(c=!1)),c){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=Il(r,e,o),RT(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=Il(r,e,o),RT(r,e,p,i,i,u)}}function xr(n=1){return oT(n)}function Ft(n){let e=Jw();return jw(e,et+n)}function be(n,e=""){let t=Ie(),r=cn(),i=n+et,o=r.firstCreatePass?Wl(r,i,1,e,null):r.data[i],s=Rk(r,t,o,e,n);t[i]=s,fl()&&Vg(r,t,s,o),Lo(o,!1)}var Rk=(n,e,t,r,i)=>(pl(!0),mx(e[je],r));function Nk(n,e,t,r=""){return Ho(n,Di(),t)?e+va(t)+r:Ar}function qa(n){return Go("",n),qa}function Go(n,e,t){let r=Ie(),i=Nk(r,n,e,t);return i!==Ar&&Pk(r,Da(),i),Go}function Pk(n,e,t){let r=Vw(e,n);yx(n[je],r,t)}function za(n){return Ho(Ie(),Di(),n)?va(n):Ar}var Ll=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Xg=(()=>{class n{compileModuleSync(t){return new xl(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=wp(t),o=wb(i.declarations).reduce((s,c)=>{let u=br(c);return u&&s.push(new $o(u)),s},[]);return new Ll(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var xk=(()=>{class n{zone=M(ve);changeDetectionScheduler=M(Un);applicationRef=M(Oi);applicationErrorHandler=M(Kt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yS=new U("",{factory:()=>!1});function em({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ve(_e(F({},nm()),{scheduleInRootZone:t})),[{provide:ve,useFactory:n},{provide:Tr,multi:!0,useFactory:()=>{let r=M(xk,{optional:!0});return()=>r.initialize()}},{provide:Tr,multi:!0,useFactory:()=>{let r=M(Mk);return()=>{r.initialize()}}},e===!0?{provide:Wp,useValue:!0}:[],{provide:Gp,useValue:t??Db},{provide:Kt,useFactory:()=>{let r=M(ve),i=M(Ge),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Ht),o.handleError(s))})}}}]}function tm(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=em({ngZoneFactory:()=>{let i=nm(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Rr("NgZone_CoalesceEvent"),new ve(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return rn([{provide:yS,useValue:!0},{provide:Aa,useValue:!1},r])}function nm(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Mk=(()=>{class n{subscription=new Pe;initialized=!1;zone=M(ve);pendingTasks=M(_n);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ve.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ve.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var vS=(()=>{class n{applicationErrorHandler=M(Kt);appRef=M(Oi);taskService=M(_n);ngZone=M(ve);zonelessEnabled=M(Aa);tracing=M(Fa,{optional:!0});disableScheduling=M(Wp,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Pe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Cl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(Gp,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Dl||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?_T:Ab;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Cl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,_T(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kk(){return typeof $localize<"u"&&$localize.locale||Ha}var rm=new U("",{providedIn:"root",factory:()=>M(rm,{optional:!0,skipSelf:!0})||kk()});var Zl=class{destroyed=!1;listeners=null;errorHandler=M(Ht,{optional:!0});destroyRef=M(Hn);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new j(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let t=this.listeners?.indexOf(e);t!==void 0&&t!==-1&&this.listeners?.splice(t,1)}}}emit(e){if(this.destroyed){console.warn(yi(953,!1));return}if(this.listeners===null)return;let t=z(null);try{for(let r of this.listeners)try{r(e)}catch(i){this.errorHandler?.handleError(i)}}finally{z(t)}}};function Mr(n){return Ew(n)}var _S=class{[bt];constructor(e){this[bt]=e}destroy(){this[bt].destroy()}};var wS=Symbol("InputSignalNode#UNSET"),qk=_e(F({},Eu),{transformFn:void 0,applyValueToInputSignal(n,e){fo(n,e)}});function TS(n,e){let t=Object.create(qk);t.value=n,t.transformFn=e?.transform;function r(){if(sa(t),t.value===wS){let i=null;throw new j(-950,i)}return t.value}return r[bt]=t,r}var zk=new U("");zk.__NG_ELEMENT_ID__=n=>{let e=Gt();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new j(204,!1)};function Gn(n){return new Zl}function IS(n,e){return TS(n,e)}function Wk(n){return TS(wS,n)}var Qt=(IS.required=Wk,IS);var im=new U(""),Gk=new U("");function Wa(n){return!n.moduleRef}function Kk(n){let e=Wa(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ve);return t.run(()=>{Wa(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Kt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Wa(n)){let o=()=>e.destroy(),s=n.platformInjector.get(im);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(im);s.add(o),n.moduleRef.onDestroy(()=>{Na(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return Yk(r,t,()=>{let o=e.get(_n),s=o.add(),c=e.get(Kg);return c.runInitializers(),c.donePromise.then(()=>{let u=e.get(rm,Ha);if(mS(u||Ha),!e.get(Gk,!0))return Wa(n)?e.get(Oi):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Wa(n)){let h=e.get(Oi);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return Qk?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var Qk;function Yk(n,e,t){try{let r=t();return Ua(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Xl=null;function Jk(n=[],e){return Ke.create({name:e,providers:[{provide:Ia,useValue:"platform"},{provide:im,useValue:new Set([()=>Xl=null])},...n]})}function Zk(n=[]){if(Xl)return Xl;let e=Jk(n);return Xl=e,fS(),Xk(e),e}function Xk(n){let e=n.get(Ul,null);Qe(n,()=>{e?.forEach(t=>t())})}function om(){return!1}var bS=(()=>{class n{static __NG_ELEMENT_ID__=eO}return n})();function eO(n){return tO(Gt(),Ie(),(n&16)===16)}function tO(n,e,t){if(Cr(n)&&!t){let r=an(n.index,e);return new Pi(r,r)}else if(n.type&175){let r=e[Mt];return new Pi(r,e)}return null}function SS(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Te(8);try{let o=i?.injector??Zk(r),s=[em({}),{provide:Un,useExisting:vS},cT,...t||[]],c=new Oa({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return Kk({r3Injector:c.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Te(9)}}var AS=null;function Kn(){return AS}function sm(n){AS??=n}var Ka=class{},am=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>M(RS),providedIn:"platform"})}return n})();var RS=(()=>{class n extends am{_location;_history;_doc=M(at);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Kn().getBaseHref(this._doc)}onPopState(t){let r=Kn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Kn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function NS(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function CS(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function kr(n){return n&&n[0]!=="?"?`?${n}`:n}var ed=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>M(xS),providedIn:"root"})}return n})(),PS=new U(""),xS=(()=>{class n extends ed{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(at).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return NS(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+kr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+kr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+kr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(te(am),te(PS,8))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ko=(()=>{class n{_subject=new st;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=iO(CS(DS(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+kr(r))}normalize(t){return n.stripTrailingSlash(rO(this._basePath,DS(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+kr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+kr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=kr;static joinWithSlash=NS;static stripTrailingSlash=CS;static \u0275fac=function(r){return new(r||n)(te(ed))};static \u0275prov=B({token:n,factory:()=>nO(),providedIn:"root"})}return n})();function nO(){return new Ko(te(ed))}function rO(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function DS(n){return n.replace(/\/index.html$/,"")}function iO(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function cm(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Qa=class{};var MS="browser";var Ya=class{_doc;constructor(e){this._doc=e}manager},td=(()=>{class n extends Ya{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(te(at))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),rd=new U(""),fm=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof td));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof td);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(te(rd),te(ve))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),um="ng-app-id";function kS(n){for(let e of n)e.remove()}function OS(n,e){let t=e.createElement("style");return t.textContent=n,t}function oO(n,e,t,r){let i=n.head?.querySelectorAll(`style[${um}="${e}"],link[${um}="${e}"]`);if(i)for(let o of i)o.removeAttribute(um),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function dm(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var pm=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,oO(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,OS);r?.forEach(i=>this.addUsage(i,this.external,dm))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(kS(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])kS(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,OS(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,dm(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(te(at),te(jl),te($l,8),te(Mi))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),lm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},gm=/%COMP%/g;var FS="%COMP%",sO=`_nghost-${FS}`,aO=`_ngcontent-${FS}`,cO=!0,uO=new U("",{providedIn:"root",factory:()=>cO});function lO(n){return aO.replace(gm,n)}function dO(n){return sO.replace(gm,n)}function VS(n,e){return e.map(t=>t.replace(gm,n))}var mm=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,c,u=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=c,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new Ja(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof nd?i.applyToHost(t):i instanceof Za&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case qn.Emulated:o=new nd(u,l,r,this.appId,h,s,c,p,m);break;case qn.ShadowDom:return new hm(u,l,t,r,s,c,this.nonce,p,m);default:o=new Za(u,l,r,h,s,c,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(te(fm),te(pm),te(jl),te(uO),te(at),te(ve),te($l),te(Fa,8))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),Ja=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(lm[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(LS(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(LS(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=lm[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=lm[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ki.DashCase|ki.Important)?e.style.setProperty(t,r,i&ki.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ki.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Kn().getGlobalEventTarget(this.doc,e),!e))throw new j(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function LS(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var hm=class extends Ja{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,c,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=VS(i.id,h);for(let m of h){let y=document.createElement("style");c&&y.setAttribute("nonce",c),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=dm(m,o);c&&y.setAttribute("nonce",c),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Za=class extends Ja{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,c,u,l){super(e,o,s,c,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?VS(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Ni.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},nd=class extends Za{contentAttr;hostAttr;constructor(e,t,r,i,o,s,c,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,c,u,l,h),this.contentAttr=lO(h),this.hostAttr=dO(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var id=class n extends Ka{supportsDOMEvents=!0;static makeCurrent(){sm(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=hO();return t==null?null:fO(t)}resetBaseElement(){Xa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return cm(document.cookie,e)}},Xa=null;function hO(){return Xa=Xa||document.head.querySelector("base"),Xa?Xa.getAttribute("href"):null}function fO(n){return new URL(n,document.baseURI).pathname}var pO=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),jS=["alt","control","meta","shift"],gO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},mO={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},US=(()=>{class n extends Ya{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),c=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Kn().onAndCancel(t,s.domEventName,c,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),jS.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=gO[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),jS.forEach(s=>{if(s!==i){let c=mO[s];c(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(te(at))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})();function ym(n,e,t){let r=F({rootComponent:n,platformRef:t?.platformRef},yO(e));return SS(r)}function yO(n){return{appProviders:[...wO,...n?.providers??[]],platformProviders:EO}}function vO(){id.makeCurrent()}function _O(){return new Ht}function IO(){return Sg(document),document}var EO=[{provide:Mi,useValue:MS},{provide:Ul,useValue:vO,multi:!0},{provide:at,useFactory:IO}];var wO=[{provide:Ia,useValue:"root"},{provide:Ht,useFactory:_O},{provide:rd,useClass:td,multi:!0,deps:[at]},{provide:rd,useClass:US,multi:!0,deps:[at]},mm,pm,fm,{provide:xi,useExisting:mm},{provide:Qa,useClass:pO},[]];var $S=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(te(at))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var X="primary",hc=Symbol("RouteTitle"),wm=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function es(n){return new wm(n)}function bO(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],c=n[o];if(s[0]===":")i[s.substring(1)]=c;else if(s!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function SO(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!En(n[t],e[t]))return!1;return!0}function En(n,e){let t=n?Tm(n):void 0,r=e?Tm(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!QS(n[i],e[i]))return!1;return!0}function Tm(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function QS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function YS(n){return n.length>0?n[n.length-1]:null}function Jn(n){return Qf(n)?n:Ua(n)?Le(Promise.resolve(n)):K(n)}var CO={exact:ZS,subset:XS},JS={exact:DO,subset:AO,ignored:()=>!0};function BS(n,e,t){return CO[t.paths](n.root,e.root,t.matrixParams)&&JS[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function DO(n,e){return En(n,e)}function ZS(n,e,t){if(!Fi(n.segments,e.segments)||!ad(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!ZS(n.children[r],e.children[r],t))return!1;return!0}function AO(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>QS(n[t],e[t]))}function XS(n,e,t){return eC(n,e,e.segments,t)}function eC(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Fi(i,t)||e.hasChildren()||!ad(i,t,r))}else if(n.segments.length===t.length){if(!Fi(n.segments,t)||!ad(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!XS(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Fi(n.segments,i)||!ad(n.segments,i,r)||!n.children[X]?!1:eC(n.children[X],e,o,r)}}function ad(n,e,t){return e.every((r,i)=>JS[t](n[i].parameters,r.parameters))}var Yn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ge([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=es(this.queryParams),this._queryParamMap}toString(){return PO.serialize(this)}},ge=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cd(this)}},Li=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=es(this.parameters),this._parameterMap}toString(){return nC(this)}};function RO(n,e){return Fi(n,e)&&n.every((t,r)=>En(t.parameters,e[r].parameters))}function Fi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function NO(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===X&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==X&&(t=t.concat(e(i,r)))}),t}var Id=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>new ts,providedIn:"root"})}return n})(),ts=class{parse(e){let t=new Sm(e);return new Yn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ec(e.root,!0)}`,r=kO(e.queryParams),i=typeof e.fragment=="string"?`#${xO(e.fragment)}`:"";return`${t}${r}${i}`}},PO=new ts;function cd(n){return n.segments.map(e=>nC(e)).join("/")}function ec(n,e){if(!n.hasChildren())return cd(n);if(e){let t=n.children[X]?ec(n.children[X],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==X&&r.push(`${i}:${ec(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=NO(n,(r,i)=>i===X?[ec(n.children[X],!1)]:[`${i}:${ec(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[X]!=null?`${cd(n)}/${t[0]}`:`${cd(n)}/(${t.join("//")})`}}function tC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function od(n){return tC(n).replace(/%3B/gi,";")}function xO(n){return encodeURI(n)}function bm(n){return tC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ud(n){return decodeURIComponent(n)}function HS(n){return ud(n.replace(/\+/g,"%20"))}function nC(n){return`${bm(n.path)}${MO(n.parameters)}`}function MO(n){return Object.entries(n).map(([e,t])=>`;${bm(e)}=${bm(t)}`).join("")}function kO(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${od(t)}=${od(i)}`).join("&"):`${od(t)}=${od(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var OO=/^[^\/()?;#]+/;function vm(n){let e=n.match(OO);return e?e[0]:""}var LO=/^[^\/()?;=#]+/;function FO(n){let e=n.match(LO);return e?e[0]:""}var VO=/^[^=?&#]+/;function jO(n){let e=n.match(VO);return e?e[0]:""}var UO=/^[^&#]+/;function $O(n){let e=n.match(UO);return e?e[0]:""}var Sm=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ge([],{}):new ge([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[X]=new ge(e,t)),r}parseSegment(){let e=vm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new Li(ud(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=FO(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=vm(this.remaining);i&&(r=i,this.capture(r))}e[ud(t)]=ud(r)}parseQueryParam(e){let t=jO(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=$O(this.remaining);s&&(r=s,this.capture(r))}let i=HS(t),o=HS(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=vm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=X);let s=this.parseChildren();t[o??X]=Object.keys(s).length===1&&s[X]?s[X]:new ge([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function rC(n){return n.segments.length>0?new ge([],{[X]:n}):n}function iC(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=iC(i);if(r===X&&o.segments.length===0&&o.hasChildren())for(let[s,c]of Object.entries(o.children))e[s]=c;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new ge(n.segments,e);return BO(t)}function BO(n){if(n.numberOfChildren===1&&n.children[X]){let e=n.children[X];return new ge(n.segments.concat(e.segments),e.children)}return n}function ns(n){return n instanceof Yn}function HO(n,e,t=null,r=null){let i=oC(n);return sC(i,e,t,r)}function oC(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let c=new ge(o.url,s);return o===n&&(e=c),c}let r=t(n.root),i=rC(r);return e??i}function sC(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return _m(i,i,i,t,r);let o=qO(e);if(o.toRoot())return _m(i,i,new ge([],{}),t,r);let s=zO(o,i,n),c=s.processChildren?nc(s.segmentGroup,s.index,o.commands):cC(s.segmentGroup,s.index,o.commands);return _m(i,s.segmentGroup,c,t,r)}function ld(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function oc(n){return typeof n=="object"&&n!=null&&n.outlets}function _m(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=aC(n,e,t);let c=rC(iC(s));return new Yn(c,o,i)}function aC(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=aC(o,e,t)}),new ge(n.segments,r)}var dd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ld(r[0]))throw new j(4003,!1);let i=r.find(oc);if(i&&i!==YS(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function qO(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new dd(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([u,l])=>{c[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,o]},[]);return new dd(t,e,r)}var Jo=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function zO(n,e,t){if(n.isAbsolute)return new Jo(e,!0,0);if(!t)return new Jo(e,!1,NaN);if(t.parent===null)return new Jo(t,!0,0);let r=ld(n.commands[0])?0:1,i=t.segments.length-1+r;return WO(t,i,n.numberOfDoubleDots)}function WO(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new Jo(r,!1,i-o)}function GO(n){return oc(n[0])?n[0].outlets:{[X]:n}}function cC(n,e,t){if(n??=new ge([],{}),n.segments.length===0&&n.hasChildren())return nc(n,e,t);let r=KO(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new ge(n.segments.slice(0,r.pathIndex),{});return o.children[X]=new ge(n.segments.slice(r.pathIndex),n.children),nc(o,0,i)}else return r.match&&i.length===0?new ge(n.segments,{}):r.match&&!n.hasChildren()?Cm(n,e,t):r.match?nc(n,0,i):Cm(n,e,t)}function nc(n,e,t){if(t.length===0)return new ge(n.segments,{});{let r=GO(t),i={};if(Object.keys(r).some(o=>o!==X)&&n.children[X]&&n.numberOfChildren===1&&n.children[X].segments.length===0){let o=nc(n.children[X],e,t);return new ge(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=cC(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ge(n.segments,i)}}function KO(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],c=t[r];if(oc(c))break;let u=`${c}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!zS(u,l,s))return o;r+=2}else{if(!zS(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Cm(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(oc(o)){let u=QO(o.outlets);return new ge(r,u)}if(i===0&&ld(t[0])){let u=n.segments[e];r.push(new Li(u.path,qS(t[0]))),i++;continue}let s=oc(o)?o.outlets[X]:`${o}`,c=i<t.length-1?t[i+1]:null;s&&c&&ld(c)?(r.push(new Li(s,qS(c))),i+=2):(r.push(new Li(s,{})),i++)}return new ge(r,{})}function QO(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Cm(new ge([],{}),0,r))}),e}function qS(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function zS(n,e,t){return n==t.path&&En(e,t.parameters)}var rc="imperative",ct=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(ct||{}),Jt=class{id;url;constructor(e,t){this.id=e,this.url=t}},rs=class extends Jt{type=ct.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Or=class extends Jt{urlAfterRedirects;type=ct.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Rt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Rt||{}),hd=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(hd||{}),Qn=class extends Jt{reason;code;type=ct.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Lr=class extends Jt{reason;code;type=ct.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},sc=class extends Jt{error;target;type=ct.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},fd=class extends Jt{urlAfterRedirects;state;type=ct.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dm=class extends Jt{urlAfterRedirects;state;type=ct.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Am=class extends Jt{urlAfterRedirects;state;shouldActivate;type=ct.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Rm=class extends Jt{urlAfterRedirects;state;type=ct.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nm=class extends Jt{urlAfterRedirects;state;type=ct.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pm=class{route;type=ct.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},xm=class{route;type=ct.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Mm=class{snapshot;type=ct.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},km=class{snapshot;type=ct.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Om=class{snapshot;type=ct.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Lm=class{snapshot;type=ct.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ac=class{},is=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function YO(n){return!(n instanceof ac)&&!(n instanceof is)}function JO(n,e){return n.providers&&!n._injector&&(n._injector=ja(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ln(n){return n.outlet||X}function ZO(n,e){let t=n.filter(r=>ln(r)===e);return t.push(...n.filter(r=>ln(r)!==e)),t}function ss(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Fm=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return ss(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new fc(this.rootInjector)}},fc=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Fm(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(te(Ge))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pd=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Vm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Vm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=jm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return jm(e,this._root).map(t=>t.value)}};function Vm(n,e){if(n===e.value)return e;for(let t of e.children){let r=Vm(n,t);if(r)return r}return null}function jm(n,e){if(n===e.value)return[e];for(let t of e.children){let r=jm(n,t);if(r.length)return r.unshift(e),r}return[]}var Vt=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Yo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var gd=class extends pd{snapshot;constructor(e,t){super(e),this.snapshot=t,Km(this,e)}toString(){return this.snapshot.toString()}};function uC(n){let e=XO(n),t=new ze([new Li("",{})]),r=new ze({}),i=new ze({}),o=new ze({}),s=new ze(""),c=new Vi(t,r,o,s,i,X,n,e.root);return c.snapshot=e.root,new gd(new Vt(c,[]),e)}function XO(n){let e={},t={},r={},o=new Zo([],e,r,"",t,X,n,null,{});return new yd("",new Vt(o,[]))}var Vi=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,c,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(se(l=>l[hc]))??K(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(se(e=>es(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(se(e=>es(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function md(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),n.params),data:F(F({},e.data),n.data),resolve:F(F(F(F({},n.data),e.data),i?.data),n._resolvedData)}:r={params:F({},n.params),data:F({},n.data),resolve:F(F({},n.data),n._resolvedData??{})},i&&dC(i)&&(r.resolve[hc]=i.title),r}var Zo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[hc]}constructor(e,t,r,i,o,s,c,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=c,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=es(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=es(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},yd=class extends pd{url;constructor(e,t){super(t),this.url=e,Km(this,t)}toString(){return lC(this._root)}};function Km(n,e){e.value._routerState=n,e.children.forEach(t=>Km(n,t))}function lC(n){let e=n.children.length>0?` { ${n.children.map(lC).join(", ")} } `:"";return`${n.value}${e}`}function Im(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,En(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),En(e.params,t.params)||n.paramsSubject.next(t.params),SO(e.url,t.url)||n.urlSubject.next(t.url),En(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Um(n,e){let t=En(n.params,e.params)&&RO(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Um(n.parent,e.parent))}function dC(n){return typeof n.title=="string"||n.title===null}var e1=new U(""),hC=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=X;activateEvents=new wt;deactivateEvents=new wt;attachEvents=new wt;detachEvents=new wt;routerOutletData=Qt();parentContexts=M(fc);location=M(Kl);changeDetector=M(bS);inputBinder=M(Ed,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new $m(t,c,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=zg({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Eg]})}return n})(),$m=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Vi?this.route:e===fc?this.childContexts:e===e1?this.outletData:this.parent.get(e,t)}},Ed=new U("");var fC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Lt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&qo(0,"router-outlet")},dependencies:[hC],encapsulation:2})}return n})();function Qm(n){let e=n.children&&n.children.map(Qm),t=e?_e(F({},n),{children:e}):F({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==X&&(t.component=fC),t}function t1(n,e,t){let r=cc(n,e._root,t?t._root:void 0);return new gd(r,e)}function cc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=n1(n,e,t);return new Vt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(c=>cc(n,c)),s}}let r=r1(e.value),i=e.children.map(o=>cc(n,o));return new Vt(r,i)}}function n1(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return cc(n,r,i);return cc(n,r)})}function r1(n){return new Vi(new ze(n.url),new ze(n.params),new ze(n.queryParams),new ze(n.fragment),new ze(n.data),n.outlet,n.component,n)}var uc=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},pC="ngNavigationCancelingError";function vd(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ns(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=gC(!1,Rt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function gC(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[pC]=!0,t.cancellationCode=e,t}function i1(n){return mC(n)&&ns(n.url)}function mC(n){return!!n&&n[pC]}var o1=(n,e,t,r)=>se(i=>(new Bm(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Bm=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Im(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Yo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Yo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Yo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Yo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Lm(o.value.snapshot))}),e.children.length&&this.forwardEvent(new km(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Im(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(c.contexts),s.attachRef=c.componentRef,s.route=c.route.value,s.outlet&&s.outlet.attach(c.componentRef,c.route.value),Im(c.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},_d=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Xo=class{component;route;constructor(e,t){this.component=e,this.route=t}};function s1(n,e,t){let r=n._root,i=e?e._root:null;return tc(r,i,t,[r.value])}function a1(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function as(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!dp(n)?n:e.get(n):r}function tc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Yo(e);return n.children.forEach(s=>{c1(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,c])=>ic(c,t.getContext(s),i)),i}function c1(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=u1(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new _d(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?tc(n,e,c?c.children:null,r,i):tc(n,e,t,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Xo(c.outlet.component,s))}else s&&ic(e,c,i),i.canActivateChecks.push(new _d(r)),o.component?tc(n,null,c?c.children:null,r,i):tc(n,null,t,r,i);return i}function u1(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Fi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Fi(n.url,e.url)||!En(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Um(n,e)||!En(n.queryParams,e.queryParams);case"paramsChange":default:return!Um(n,e)}}function ic(n,e,t){let r=Yo(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ic(s,e.children.getContext(o),t):ic(s,null,t):ic(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Xo(e.outlet.component,i)):t.canDeactivateChecks.push(new Xo(null,i)):t.canDeactivateChecks.push(new Xo(null,i))}function pc(n){return typeof n=="function"}function l1(n){return typeof n=="boolean"}function d1(n){return n&&pc(n.canLoad)}function h1(n){return n&&pc(n.canActivate)}function f1(n){return n&&pc(n.canActivateChild)}function p1(n){return n&&pc(n.canDeactivate)}function g1(n){return n&&pc(n.canMatch)}function yC(n){return n instanceof Ln||n?.name==="EmptyError"}var sd=Symbol("INITIAL_VALUE");function os(){return Dt(n=>$u(n.map(e=>e.pipe(Fn(1),qu(sd)))).pipe(se(e=>{for(let t of e)if(t!==!0){if(t===sd)return sd;if(t===!1||m1(t))return t}return!0}),pt(e=>e!==sd),Fn(1)))}function m1(n){return ns(n)||n instanceof uc}function y1(n,e){return We(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?K(_e(F({},t),{guardsResult:!0})):v1(s,r,i,n).pipe(We(c=>c&&l1(c)?_1(r,o,n,e):K(c)),se(c=>_e(F({},t),{guardsResult:c})))})}function v1(n,e,t,r){return Le(n).pipe(We(i=>b1(i.component,i.route,t,e,r)),Vn(i=>i!==!0,!0))}function _1(n,e,t,r){return Le(e).pipe(Co(i=>So(E1(i.route.parent,r),I1(i.route,r),T1(n,i.path,t),w1(n,i.route,t))),Vn(i=>i!==!0,!0))}function I1(n,e){return n!==null&&e&&e(new Om(n)),K(!0)}function E1(n,e){return n!==null&&e&&e(new Mm(n)),K(!0)}function w1(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return K(!0);let i=r.map(o=>ha(()=>{let s=ss(e)??t,c=as(o,s),u=h1(c)?c.canActivate(e,n):Qe(s,()=>c(e,n));return Jn(u).pipe(Vn())}));return K(i).pipe(os())}function T1(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>a1(s)).filter(s=>s!==null).map(s=>ha(()=>{let c=s.guards.map(u=>{let l=ss(s.node)??t,h=as(u,l),p=f1(h)?h.canActivateChild(r,n):Qe(l,()=>h(r,n));return Jn(p).pipe(Vn())});return K(c).pipe(os())}));return K(o).pipe(os())}function b1(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return K(!0);let s=o.map(c=>{let u=ss(e)??i,l=as(c,u),h=p1(l)?l.canDeactivate(n,e,t,r):Qe(u,()=>l(n,e,t,r));return Jn(h).pipe(Vn())});return K(s).pipe(os())}function S1(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return K(!0);let o=i.map(s=>{let c=as(s,n),u=d1(c)?c.canLoad(e,t):Qe(n,()=>c(e,t));return Jn(u)});return K(o).pipe(os(),vC(r))}function vC(n){return Cu(Ze(e=>{if(typeof e!="boolean")throw vd(n,e)}),se(e=>e===!0))}function C1(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return K(!0);let o=i.map(s=>{let c=as(s,n),u=g1(c)?c.canMatch(e,t):Qe(n,()=>c(e,t));return Jn(u)});return K(o).pipe(os(),vC(r))}var lc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},dc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Qo(n){return bo(new lc(n))}function D1(n){return bo(new j(4e3,!1))}function A1(n){return bo(gC(!1,Rt.GuardRejected))}var Hm=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return K(r);if(i.numberOfChildren>1||!i.children[X])return D1(`${e.redirectTo}`);i=i.children[X]}}applyRedirectCommands(e,t,r,i,o){return R1(t,i,o).pipe(se(s=>{if(s instanceof Yn)throw new dc(s);let c=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new dc(c);return c}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Yn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let c=o.substring(1);r[i]=t[c]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([c,u])=>{s[c]=this.createSegmentGroup(e,u,r,i)}),new ge(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function R1(n,e,t){if(typeof n=="string")return K(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,params:l,data:h,title:p}=e;return Jn(Qe(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,title:p})))}var qm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function N1(n,e,t,r,i){let o=_C(n,e,t);return o.matched?(r=JO(e,r),C1(r,e,t,i).pipe(se(s=>s===!0?o:F({},qm)))):K(o)}function _C(n,e,t){if(e.path==="**")return P1(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?F({},qm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||bO)(t,n,e);if(!i)return F({},qm);let o={};Object.entries(i.posParams??{}).forEach(([c,u])=>{o[c]=u.path});let s=i.consumed.length>0?F(F({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function P1(n){return{matched:!0,parameters:n.length>0?YS(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function WS(n,e,t,r){return t.length>0&&k1(n,t,r)?{segmentGroup:new ge(e,M1(r,new ge(t,n.children))),slicedSegments:[]}:t.length===0&&O1(n,t,r)?{segmentGroup:new ge(n.segments,x1(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ge(n.segments,n.children),slicedSegments:t}}function x1(n,e,t,r){let i={};for(let o of t)if(wd(n,e,o)&&!r[ln(o)]){let s=new ge([],{});i[ln(o)]=s}return F(F({},r),i)}function M1(n,e){let t={};t[X]=e;for(let r of n)if(r.path===""&&ln(r)!==X){let i=new ge([],{});t[ln(r)]=i}return t}function k1(n,e,t){return t.some(r=>wd(n,e,r)&&ln(r)!==X)}function O1(n,e,t){return t.some(r=>wd(n,e,r))}function wd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function L1(n,e,t){return e.length===0&&!n.children[t]}var zm=class{};function F1(n,e,t,r,i,o,s="emptyOnly"){return new Wm(n,e,t,r,i,s,o).recognize()}var V1=31,Wm=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=c,this.applyRedirects=new Hm(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=WS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(se(({children:t,rootSnapshot:r})=>{let i=new Vt(r,t),o=new yd("",i),s=HO(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Zo([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),X,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,X,t).pipe(se(r=>({children:r,rootSnapshot:t})),_r(r=>{if(r instanceof dc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof lc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(se(s=>s instanceof Vt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Le(o).pipe(Co(s=>{let c=r.children[s],u=ZO(t,s);return this.processSegmentGroup(e,u,c,s,i)}),Hu((s,c)=>(s.push(...c),s)),Ir(null),Yf(),We(s=>{if(s===null)return Qo(r);let c=IC(s);return j1(c),K(c)}))}processSegment(e,t,r,i,o,s,c){return Le(t).pipe(Co(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,c).pipe(_r(l=>{if(l instanceof lc)return K(null);throw l}))),Vn(u=>!!u),_r(u=>{if(yC(u))return L1(r,i,o)?K(new zm):Qo(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,c,u){return ln(r)!==s&&(s===X||!wd(i,o,r))?Qo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Qo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,c){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=_C(t,i,o);if(!u)return Qo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>V1&&(this.allowRedirects=!1));let y=new Zo(o,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,GS(i),ln(i),i.component??i._loadedComponent??null,i,KS(i)),D=md(y,c,this.paramsInheritanceStrategy);return y.params=Object.freeze(D.params),y.data=Object.freeze(D.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(Dt(R=>this.applyRedirects.lineralizeSegments(i,R)),We(R=>this.processSegment(e,r,t,R.concat(m),s,!1,c)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let c=N1(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),c.pipe(Dt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Dt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,D=new Zo(m,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,GS(r),ln(r),r.component??r._loadedComponent??null,r,KS(r)),N=md(D,s,this.paramsInheritanceStrategy);D.params=Object.freeze(N.params),D.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:O}=WS(t,m,y,l);if(O.length===0&&R.hasChildren())return this.processChildren(h,l,R,D).pipe(se(G=>new Vt(D,G)));if(l.length===0&&O.length===0)return K(new Vt(D,[]));let $=ln(r)===o;return this.processSegment(h,l,R,O,$?X:o,!0,D).pipe(se(G=>new Vt(D,G instanceof Vt?[G]:[])))}))):Qo(t)))}getChildConfig(e,t,r){return t.children?K({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?K({routes:t._loadedRoutes,injector:t._loadedInjector}):S1(e,t,r,this.urlSerializer).pipe(We(i=>i?this.configLoader.loadChildren(e,t).pipe(Ze(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):A1(t))):K({routes:[],injector:e})}};function j1(n){n.sort((e,t)=>e.value.outlet===X?-1:t.value.outlet===X?1:e.value.outlet.localeCompare(t.value.outlet))}function U1(n){let e=n.value.routeConfig;return e&&e.path===""}function IC(n){let e=[],t=new Set;for(let r of n){if(!U1(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=IC(r.children);e.push(new Vt(r.value,i))}return e.filter(r=>!t.has(r))}function GS(n){return n.data||{}}function KS(n){return n.resolve||{}}function $1(n,e,t,r,i,o){return We(s=>F1(n,e,t,r,s.extractedUrl,i,o).pipe(se(({state:c,tree:u})=>_e(F({},s),{targetSnapshot:c,urlAfterRedirects:u}))))}function B1(n,e){return We(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return K(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of EC(u))s.add(l);let c=0;return Le(s).pipe(Co(u=>o.has(u)?H1(u,r,n,e):(u.data=md(u,u.parent,n).resolve,K(void 0))),Ze(()=>c++),Do(1),We(u=>c===s.size?K(t):St))})}function EC(n){let e=n.children.map(t=>EC(t)).flat();return[n,...e]}function H1(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!dC(i)&&(o[hc]=i.title),ha(()=>(n.data=md(n,n.parent,t).resolve,q1(o,n,e,r).pipe(se(s=>(n._resolvedData=s,n.data=F(F({},n.data),s),null)))))}function q1(n,e,t,r){let i=Tm(n);if(i.length===0)return K({});let o={};return Le(i).pipe(We(s=>z1(n[s],e,t,r).pipe(Vn(),Ze(c=>{if(c instanceof uc)throw vd(new ts,c);o[s]=c}))),Do(1),se(()=>o),_r(s=>yC(s)?St:bo(s)))}function z1(n,e,t,r){let i=ss(e)??r,o=as(n,i),s=o.resolve?o.resolve(e,t):Qe(i,()=>o(e,t));return Jn(s)}function Em(n){return Dt(e=>{let t=n(e);return t?Le(t).pipe(se(()=>e)):K(e)})}var wC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===X);return r}getResolvedTitleForRoute(t){return t.data[hc]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>M(W1),providedIn:"root"})}return n})(),W1=(()=>{class n extends wC{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(te($S))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Td=new U("",{providedIn:"root",factory:()=>({})}),bd=new U(""),TC=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(Xg);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return K(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Jn(Qe(t,()=>r.loadComponent())).pipe(se(bC),Dt(SC),Ze(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),fa(()=>{this.componentLoaders.delete(r)})),o=new Io(i,()=>new st).pipe(_o());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return K({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=G1(r,this.compiler,t,this.onLoadEndListener).pipe(fa(()=>{this.childrenLoaders.delete(r)})),s=new Io(o,()=>new st).pipe(_o());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function G1(n,e,t,r){return Jn(Qe(t,()=>n.loadChildren())).pipe(se(bC),Dt(SC),We(i=>i instanceof Ql||Array.isArray(i)?K(i):Le(e.compileModuleAsync(i))),se(i=>{r&&r(n);let o,s,c=!1;return Array.isArray(i)?(s=i,c=!0):(o=i.create(t).injector,s=o.get(bd,[],{optional:!0,self:!0}).flat()),{routes:s.map(Qm),injector:o}}))}function K1(n){return n&&typeof n=="object"&&"default"in n}function bC(n){return K1(n)?n.default:n}function SC(n){return K(n)}var Ym=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>M(Q1),providedIn:"root"})}return n})(),Q1=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),CC=new U("");var DC=new U(""),AC=(()=>{class n{currentNavigation=Ce(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new st;transitionAbortWithErrorSubject=new st;configLoader=M(TC);environmentInjector=M(Ge);destroyRef=M(Hn);urlSerializer=M(Id);rootContexts=M(fc);location=M(Ko);inputBindingEnabled=M(Ed,{optional:!0})!==null;titleStrategy=M(wC);options=M(Td,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M(Ym);createViewTransition=M(CC,{optional:!0});navigationErrorHandler=M(DC,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>K(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Pm(i)),r=i=>this.events.next(new xm(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Mr(()=>{this.transitions?.next(_e(F({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new ze(null),this.transitions.pipe(pt(r=>r!==null),Dt(r=>{let i=!1;return K(r).pipe(Dt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Rt.SupersededByNewNavigation),St;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?_e(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&c!=="reload")return this.events.next(new Lr(o.id,this.urlSerializer.serialize(o.rawUrl),"",hd.IgnoredSameUrlNavigation)),o.resolve(!1),St;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return K(o).pipe(Dt(u=>(this.events.next(new rs(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?St:Promise.resolve(u))),$1(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ze(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let l=new fd(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:m}=o,y=new rs(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let D=uC(this.rootComponentType).snapshot;return this.currentTransition=r=_e(F({},o),{targetSnapshot:D,urlAfterRedirects:l,extras:_e(F({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(N=>(N.finalUrl=l,N)),K(r)}else return this.events.next(new Lr(o.id,this.urlSerializer.serialize(o.extractedUrl),"",hd.IgnoredByUrlHandlingStrategy)),o.resolve(!1),St}),Ze(o=>{let s=new Dm(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),se(o=>(this.currentTransition=r=_e(F({},o),{guards:s1(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),y1(this.environmentInjector,o=>this.events.next(o)),Ze(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw vd(this.urlSerializer,o.guardsResult);let s=new Am(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),pt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Rt.GuardRejected),!1)),Em(o=>{if(o.guards.canActivateChecks.length!==0)return K(o).pipe(Ze(s=>{let c=new Rm(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(c)}),Dt(s=>{let c=!1;return K(s).pipe(B1(this.paramsInheritanceStrategy,this.environmentInjector),Ze({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(s,"",Rt.NoDataFromResolver)}}))}),Ze(s=>{let c=new Nm(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(c)}))}),Em(o=>{let s=c=>{let u=[];if(c.routeConfig?.loadComponent){let l=ss(c)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,c.routeConfig).pipe(Ze(h=>{c.component=h}),se(()=>{})))}for(let l of c.children)u.push(...s(l));return u};return $u(s(o.targetSnapshot.root)).pipe(Ir(null),Fn(1))}),Em(()=>this.afterPreactivation()),Dt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,c=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return c?Le(c).pipe(se(()=>r)):K(r)}),se(o=>{let s=t1(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=_e(F({},o),{targetRouterState:s}),this.currentNavigation.update(c=>(c.targetRouterState=s,c)),r}),Ze(()=>{this.events.next(new ac)}),o1(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Fn(1),zu(new ie(o=>{let s=r.abortController.signal,c=()=>o.next();return s.addEventListener("abort",c),()=>s.removeEventListener("abort",c)}).pipe(pt(()=>!i&&!r.targetRouterState),Ze(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Rt.Aborted)}))),Ze({next:o=>{i=!0,this.lastSuccessfulNavigation=Mr(this.currentNavigation),this.events.next(new Or(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),zu(this.transitionAbortWithErrorSubject.pipe(Ze(o=>{throw o}))),fa(()=>{i||this.cancelNavigationTransition(r,"",Rt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),_r(o=>{if(this.destroyed)return r.resolve(!1),St;if(i=!0,mC(o))this.events.next(new Qn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),i1(o)?this.events.next(new is(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new sc(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let c=Qe(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(c instanceof uc){let{message:u,cancellationCode:l}=vd(this.urlSerializer,c);this.events.next(new Qn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new is(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return St}))}))}cancelNavigationTransition(t,r,i){let o=new Qn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Mr(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Y1(n){return n!==rc}var J1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>M(Z1),providedIn:"root"})}return n})(),Gm=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Z1=(()=>{class n extends Gm{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vl(n)))(i||n)}})();static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),RC=(()=>{class n{urlSerializer=M(Id);options=M(Td,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M(Ko);urlHandlingStrategy=M(Ym);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Yn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Yn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=uC(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:()=>M(X1),providedIn:"root"})}return n})(),X1=(()=>{class n extends RC{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof rs?this.updateStateMemento():t instanceof Lr?this.commitTransition(r):t instanceof fd?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof ac?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Qn&&t.code!==Rt.SupersededByNewNavigation&&t.code!==Rt.Redirect?this.restoreHistory(r):t instanceof sc?this.restoreHistory(r,!0):t instanceof Or&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let c=this.browserPageId,u=F(F({},s),this.generateNgRouterState(i,c));this.location.replaceState(t,"",u)}else{let c=F(F({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",c)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vl(n)))(i||n)}})();static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function NC(n,e){n.events.pipe(pt(t=>t instanceof Or||t instanceof Qn||t instanceof sc||t instanceof Lr),se(t=>t instanceof Or||t instanceof Lr?0:(t instanceof Qn?t.code===Rt.Redirect||t.code===Rt.SupersededByNewNavigation:!1)?2:1),pt(t=>t!==2),Fn(1)).subscribe(()=>{e()})}var eL={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},tL={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Jm=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(Wg);stateManager=M(RC);options=M(Td,{optional:!0})||{};pendingTasks=M(_n);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(AC);urlSerializer=M(Id);location=M(Ko);urlHandlingStrategy=M(Ym);injector=M(Ge);_events=new st;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(J1);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(bd,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(Ed,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Pe;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Mr(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Qn&&r.code!==Rt.Redirect&&r.code!==Rt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Or)this.navigated=!0;else if(r instanceof is){let s=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Y1(i.source)},s);this.scheduleNavigation(c,rc,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}YO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),rc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=F({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(t);this.scheduleNavigation(c,r,s,o).catch(u=>{this.disposed||this.injector.get(Kt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Mr(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Qm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:c,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":h=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=oC(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return sC(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ns(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,rc,null,r)}navigate(t,r={skipLocationChange:!1}){return nL(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(yi(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=F({},eL):r===!1?i=F({},tL):i=r,ns(t))return BS(this.currentUrlTree,t,i);let o=this.parseUrl(t);return BS(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let c,u,l;s?(c=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{c=p,u=m});let h=this.pendingTasks.add();return NC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nL(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new j(4008,!1)}var rL=new U("");function Zm(n,...e){return rn([{provide:bd,multi:!0,useValue:n},[],{provide:Vi,useFactory:iL,deps:[Jm]},{provide:Yl,multi:!0,useFactory:oL},e.map(t=>t.\u0275providers)])}function iL(n){return n.routerState.root}function oL(){let n=M(Ke);return e=>{let t=n.get(Oi);if(e!==t.components[0])return;let r=n.get(Jm),i=n.get(sL);n.get(aL)===1&&r.initialNavigation(),n.get(cL,null,{optional:!0})?.setUpPreloading(),n.get(rL,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var sL=new U("",{factory:()=>new st}),aL=new U("",{providedIn:"root",factory:()=>1});var cL=new U("");var PC=[];var xC=()=>{};var OC=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},lL=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],c=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Sd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,c=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|c>>4,m=(c&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(t[h],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(OC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):lL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||l==null||p==null)throw new ey;let m=o<<2|c>>4;if(r.push(m),l!==64){let y=c<<4&240|l>>2;if(r.push(y),p!==64){let D=l<<6&192|p;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},ey=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},dL=function(n){let e=OC(n);return Sd.encodeByteArray(e,!0)},mc=function(n){return dL(n).replace(/\./g,"")},Cd=function(n){try{return Sd.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ny(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var hL=()=>ny().__FIREBASE_DEFAULTS__,fL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},pL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Cd(n[1]);return e&&JSON.parse(e)},Dd=()=>{try{return xC()||hL()||fL()||pL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ry=n=>{var e,t;return(t=(e=Dd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},LC=n=>{let e=ry(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},iy=()=>{var n;return(n=Dd())===null||n===void 0?void 0:n.config},oy=n=>{var e;return(e=Dd())===null||e===void 0?void 0:e[`_${n}`]};var ji=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Fr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Ad(n){return E(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function FC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[mc(JSON.stringify(t)),mc(JSON.stringify(s)),""].join(".")}var gc={};function gL(){let n={prod:[],emulator:[]};for(let e of Object.keys(gc))gc[e]?n.emulator.push(e):n.prod.push(e);return n}function mL(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var MC=!1;function Rd(n,e){if(typeof window>"u"||typeof document>"u"||!Fr(window.location.host)||gc[n]===e||gc[n]||MC)return;gc[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=gL().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{MC=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=mL(r),y=t("text"),D=document.getElementById(y)||document.createElement("span"),N=t("learnmore"),R=document.getElementById(N)||document.createElement("a"),O=t("preprendIcon"),$=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let G=m.element;c(G),h(R,N);let Ee=l();u($,O),G.append($,D,R,Ee),document.body.appendChild(G)}o?(D.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tt())}function yL(){var n;let e=(n=Dd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UC(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function $C(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BC(){let n=tt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function HC(){return!yL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yc(){try{return typeof indexedDB=="object"}catch{return!1}}function qC(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var vL="FirebaseError",jt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=vL,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dn.prototype.create)}},dn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?_L(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new jt(i,c,r)}};function _L(n,e){return n.replace(IL,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var IL=/\{\$([^}]+)}/g;function zC(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function wn(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(kC(o)&&kC(s)){if(!wn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function kC(n){return n!==null&&typeof n=="object"}function vc(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function WC(n,e){let t=new ty(n,e);return t.subscribe.bind(t)}var ty=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");EL(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Xm),i.error===void 0&&(i.error=Xm),i.complete===void 0&&(i.complete=Xm);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function EL(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Xm(){}var eZ=14400*1e3;function nt(n){return n&&n._delegate?n._delegate:n}var Tt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ui="[DEFAULT]";var sy=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ji;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TL(e))try{this.getOrInitializeService({instanceIdentifier:Ui})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ui){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return E(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ui){return this.instances.has(e)}getOptions(e=Ui){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ui){return this.component?this.component.multipleInstances?e:Ui:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function wL(n){return n===Ui?void 0:n}function TL(n){return n.instantiationMode==="EAGER"}var Nd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new sy(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var bL=[],ce=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(ce||{}),SL={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},CL=ce.INFO,DL={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},AL=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=DL[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Tn=class{constructor(e){this.name=e,this._logLevel=CL,this._logHandler=AL,this._userLogHandler=null,bL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}};var RL=(n,e)=>e.some(t=>n instanceof t),GC,KC;function NL(){return GC||(GC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PL(){return KC||(KC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var QC=new WeakMap,cy=new WeakMap,YC=new WeakMap,ay=new WeakMap,ly=new WeakMap;function xL(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(bn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&QC.set(t,n)}).catch(()=>{}),ly.set(e,n),e}function ML(n){if(cy.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});cy.set(n,e)}var uy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return cy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||YC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return bn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function JC(n){uy=n(uy)}function kL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Pd(this),e,...t);return YC.set(r,e.sort?e.sort():[e]),bn(r)}:PL().includes(n)?function(...e){return n.apply(Pd(this),e),bn(QC.get(this))}:function(...e){return bn(n.apply(Pd(this),e))}}function OL(n){return typeof n=="function"?kL(n):(n instanceof IDBTransaction&&ML(n),RL(n,NL())?new Proxy(n,uy):n)}function bn(n){if(n instanceof IDBRequest)return xL(n);if(ay.has(n))return ay.get(n);let e=OL(n);return e!==n&&(ay.set(n,e),ly.set(e,n)),e}var Pd=n=>ly.get(n);function XC(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),c=bn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(bn(s.result),u.oldVersion,u.newVersion,bn(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var LL=["get","getKey","getAll","getAllKeys","count"],FL=["put","add","delete","clear"],dy=new Map;function ZC(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(dy.get(e))return dy.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=FL.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||LL.includes(t)))return;let o=function(s,...c){return E(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[t](...c),i&&u.done]))[0]})};return dy.set(e,o),o}JC(n=>_e(F({},n),{get:(e,t,r)=>ZC(e,t)||n.get(e,t,r),has:(e,t)=>!!ZC(e,t)||n.has(e,t)}));var fy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(VL(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function VL(n){let e=n.getComponent();return e?.type==="VERSION"}var py="@firebase/app",eD="0.13.2";var Zn=new Tn("@firebase/app"),jL="@firebase/app-compat",UL="@firebase/analytics-compat",$L="@firebase/analytics",BL="@firebase/app-check-compat",HL="@firebase/app-check",qL="@firebase/auth",zL="@firebase/auth-compat",WL="@firebase/database",GL="@firebase/data-connect",KL="@firebase/database-compat",QL="@firebase/functions",YL="@firebase/functions-compat",JL="@firebase/installations",ZL="@firebase/installations-compat",XL="@firebase/messaging",eF="@firebase/messaging-compat",tF="@firebase/performance",nF="@firebase/performance-compat",rF="@firebase/remote-config",iF="@firebase/remote-config-compat",oF="@firebase/storage",sF="@firebase/storage-compat",aF="@firebase/firestore",cF="@firebase/ai",uF="@firebase/firestore-compat",lF="firebase",dF="11.10.0";var gy="[DEFAULT]",hF={[py]:"fire-core",[jL]:"fire-core-compat",[$L]:"fire-analytics",[UL]:"fire-analytics-compat",[HL]:"fire-app-check",[BL]:"fire-app-check-compat",[qL]:"fire-auth",[zL]:"fire-auth-compat",[WL]:"fire-rtdb",[GL]:"fire-data-connect",[KL]:"fire-rtdb-compat",[QL]:"fire-fn",[YL]:"fire-fn-compat",[JL]:"fire-iid",[ZL]:"fire-iid-compat",[XL]:"fire-fcm",[eF]:"fire-fcm-compat",[tF]:"fire-perf",[nF]:"fire-perf-compat",[rF]:"fire-rc",[iF]:"fire-rc-compat",[oF]:"fire-gcs",[sF]:"fire-gcs-compat",[aF]:"fire-fst",[uF]:"fire-fst-compat",[cF]:"fire-vertex","fire-js":"fire-js",[lF]:"fire-js-all"};var _c=new Map,fF=new Map,my=new Map;function tD(n,e){try{n.container.addComponent(e)}catch(t){Zn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function hn(n){let e=n.name;if(my.has(e))return Zn.debug(`There were multiple attempts to register component ${e}.`),!1;my.set(e,n);for(let t of _c.values())tD(t,n);for(let t of fF.values())tD(t,n);return!0}function cs(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Zt(n){return n==null?!1:n.settings!==void 0}var pF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vr=new dn("app","Firebase",pF);var yy=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Tt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vr.create("app-deleted",{appName:this._name})}};var jr=dF;function Iy(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:gy,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Vr.create("bad-app-name",{appName:String(i)});if(t||(t=iy()),!t)throw Vr.create("no-options");let o=_c.get(i);if(o){if(wn(t,o.options)&&wn(r,o.config))return o;throw Vr.create("duplicate-app",{appName:i})}let s=new Nd(i);for(let u of my.values())s.addComponent(u);let c=new yy(t,r,s);return _c.set(i,c),c}function $i(n=gy){let e=_c.get(n);if(!e&&n===gy&&iy())return Iy();if(!e)throw Vr.create("no-app",{appName:n});return e}function xd(){return Array.from(_c.values())}function ke(n,e,t){var r;let i=(r=hF[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zn.warn(c.join(" "));return}hn(new Tt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var gF="firebase-heartbeat-database",mF=1,Ic="firebase-heartbeat-store",hy=null;function oD(){return hy||(hy=XC(gF,mF,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ic)}catch(t){console.warn(t)}}}}).catch(n=>{throw Vr.create("idb-open",{originalErrorMessage:n.message})})),hy}function yF(n){return E(this,null,function*(){try{let t=(yield oD()).transaction(Ic),r=yield t.objectStore(Ic).get(sD(n));return yield t.done,r}catch(e){if(e instanceof jt)Zn.warn(e.message);else{let t=Vr.create("idb-get",{originalErrorMessage:e?.message});Zn.warn(t.message)}}})}function nD(n,e){return E(this,null,function*(){try{let r=(yield oD()).transaction(Ic,"readwrite");yield r.objectStore(Ic).put(e,sD(n)),yield r.done}catch(t){if(t instanceof jt)Zn.warn(t.message);else{let r=Vr.create("idb-set",{originalErrorMessage:t?.message});Zn.warn(r.message)}}})}function sD(n){return`${n.name}!${n.options.appId}`}var vF=1024,_F=30,vy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new _y(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return E(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=rD();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>_F){let s=EF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Zn.warn(r)}})}getHeartbeatsHeader(){return E(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=rD(),{heartbeatsToSend:r,unsentEntries:i}=IF(this._heartbeatsCache.heartbeats),o=mc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Zn.warn(t),""}})}};function rD(){return new Date().toISOString().substring(0,10)}function IF(n,e=vF){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),iD(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),iD(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var _y=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return E(this,null,function*(){return yc()?qC().then(()=>!0).catch(()=>!1):!1})}read(){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield yF(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return nD(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return E(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return nD(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function iD(n){return mc(JSON.stringify({version:2,heartbeats:n})).length}function EF(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function wF(n){hn(new Tt("platform-logger",e=>new fy(e),"PRIVATE")),hn(new Tt("heartbeat",e=>new vy(e),"PRIVATE")),ke(py,eD,n),ke(py,eD,"esm2017"),ke("fire-js","")}wF("");var TF="firebase",bF="11.10.0";ke(TF,bF,"app");function aD(n){n===void 0&&(n=M(Ke));let e=n.get(Ai);return t=>new ie(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let c=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return c.add(()=>{r.unsubscribe(),s()}),c})}var Ur=new Ro("ANGULARFIRE2_VERSION");function Ec(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ls=(n,e)=>{let t=e?[e]:xd(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},us=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(us||{}),cD=om()&&typeof Zone<"u"?us.WARN:us.SILENT;var Md=class{zone;delegate;constructor(e,t=Gf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},$r=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=M(ve);this.outsideAngular=t.runOutsideAngular(()=>new Md(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Md(typeof Zone>"u"?void 0:Zone.current,Wf))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uD=!1;function SF(n,e){!uD&&(cD>us.SILENT||om())&&(uD=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),cD>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function CF(n){let e=M(ve,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Bi(n){let e=M(ve,{optional:!0});return e?e.run(()=>n()):n()}var DF=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Qe(t,()=>Bi(()=>n.apply(void 0,r)))),Ut=(n,e,t)=>(t||=e?us.WARN:us.VERBOSE,function(){let r,i=arguments,o,s,c;try{o=M($r),s=M(Ai),c=M(Ge)}catch{return SF(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Bi(()=>s.add())),i[l]=DF(i[l],r,c));let u=CF(()=>n.apply(this,i));return e?u instanceof ie?u.pipe(vr(o.outsideAngular),yr(o.insideAngular),aD(c)):u instanceof Promise?Bi(()=>{let l=s.add();return new Promise((h,p)=>{u.then(m=>Qe(c,()=>Bi(()=>h(m))),m=>Qe(c,()=>Bi(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Bi(()=>u):u instanceof ie?u.pipe(vr(o.outsideAngular),yr(o.insideAngular)):Bi(()=>u)});var Xn=class{constructor(e){return e}},Hi=class{constructor(){return xd()}};function AF(n){return n&&n.length===1?n[0]:new Xn($i())}var Ey=new U("angularfire2._apps"),RF={provide:Xn,useFactory:AF,deps:[[new Ot,Ey]]},NF={provide:Hi,deps:[[new Ot,Ey]]};function PF(n){return(e,t)=>{let r=t.get(Mi);ke("angularfire",Ur.full,"core"),ke("angularfire",Ur.full,"app"),ke("angular",cp.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Xn(i)}}function lD(n,...e){return rn([RF,NF,{provide:Ey,useFactory:PF(n),multi:!0,deps:[ve,Ke,$r,...e]}])}var dD=Ut(Iy,!0);var xF=new Map,MF={activated:!1,tokenObservers:[]},kF={initialized:!1,enabled:!1};function fn(n){return xF.get(n)||Object.assign({},MF)}function gD(){return kF}var OF="https://content-firebaseappcheck.googleapis.com/v1";var LF="exchangeDebugToken",hD={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},rX=1440*60*1e3;var by=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return E(this,null,function*(){this.stop();try{this.pending=new ji,this.pending.promise.catch(t=>{}),yield FF(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new ji,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function FF(n){return new Promise(e=>{setTimeout(e,n)})}var VF={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Br=new dn("appCheck","AppCheck",VF);function mD(n){if(!fn(n).activated)throw Br.create("use-before-activation",{appName:n.name})}function yD(r,i){return E(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let c={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,c)}catch(y){throw Br.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Br.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Br.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Br.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function vD(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${OF}/projects/${t}/apps/${r}:${LF}?key=${i}`,body:{debug_token:e}}}var jF="firebase-app-check-database",UF=1,Sy="firebase-app-check-store";var kd=null;function $F(){return kd||(kd=new Promise((n,e)=>{try{let t=indexedDB.open(jF,UF);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Br.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Sy,{keyPath:"compositeKey"})}}}catch(t){e(Br.create("storage-open",{originalErrorMessage:t?.message}))}}),kd)}function BF(n,e){return HF(qF(n),e)}function HF(n,e){return E(this,null,function*(){let r=(yield $F()).transaction(Sy,"readwrite"),o=r.objectStore(Sy).put({compositeKey:n,value:e});return new Promise((s,c)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;c(Br.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function qF(n){return`${n.options.appId}-${n.name}`}var wc=new Tn("@firebase/app-check");function wy(n,e){return yc()?BF(n,e).catch(t=>{wc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function _D(){return gD().enabled}function ID(){return E(this,null,function*(){let n=gD();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var zF={error:"UNKNOWN_ERROR"};function WF(n){return Sd.encodeString(JSON.stringify(n),!1)}function Cy(n,e=!1,t=!1){return E(this,null,function*(){let r=n.app;mD(r);let i=fn(r),o=i.token,s;if(o&&!Tc(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Tc(l)?o=l:yield wy(r,void 0))}if(!e&&o&&Tc(o))return{token:o.token};let c=!1;if(_D())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=yD(vD(r,yield ID()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);let l=yield i.exchangeTokenPromise;return yield wy(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?wc.warn(l.message):t&&wc.error(l),Ty(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),o=yield fn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?wc.warn(l.message):t&&wc.error(l),s=l}let u;return o?s?Tc(o)?u={token:o.token,internalError:s}:u=Ty(s):(u={token:o.token},i.token=o,yield wy(r,o)):u=Ty(s),c&&YF(r,u),u})}function GF(n){return E(this,null,function*(){let e=n.app;mD(e);let{provider:t}=fn(e);if(_D()){let r=yield ID(),{token:i}=yield yD(vD(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function KF(n,e,t,r){let{app:i}=n,o=fn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Tc(o.token)){let c=o.token;Promise.resolve().then(()=>{t({token:c.token}),fD(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>fD(n))}function ED(n,e){let t=fn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function fD(n){let{app:e}=n,t=fn(e),r=t.tokenRefresher;r||(r=QF(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function QF(n){let{app:e}=n;return new by(()=>E(null,null,function*(){let t=fn(e),r;if(t.token?r=yield Cy(n,!0):r=yield Cy(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=fn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},hD.RETRIAL_MIN_WAIT,hD.RETRIAL_MAX_WAIT)}function YF(n,e){let t=fn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Tc(n){return n.expireTimeMillis-Date.now()>0}function Ty(n){return{token:WF(zF),error:n}}var Dy=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=fn(this.app);for(let t of e)ED(this.app,t.next);return Promise.resolve()}};function JF(n,e){return new Dy(n,e)}function ZF(n){return{getToken:e=>Cy(n,e),getLimitedUseToken:()=>GF(n),addTokenListener:e=>KF(n,"INTERNAL",e),removeTokenListener:e=>ED(n.app,e)}}var XF="@firebase/app-check",eV="0.10.1";var tV="app-check",pD="app-check-internal";function nV(){hn(new Tt(tV,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return JF(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(pD).initialize()})),hn(new Tt(pD,n=>{let e=n.getProvider("app-check").getImmediate();return ZF(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ke(XF,eV)}nV();var rV="app-check";var ds=class{constructor(){return ls(rV)}};var iV=["localhost","0.0.0.0","127.0.0.1"],mX=typeof window<"u"&&iV.includes(window.location.hostname);function LD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var FD=LD,VD=new dn("auth","Firebase",LD());var Ud=new Tn("@firebase/auth");function oV(n,...e){Ud.logLevel<=ce.WARN&&Ud.warn(`Auth (${jr}): ${n}`,...e)}function Ld(n,...e){Ud.logLevel<=ce.ERROR&&Ud.error(`Auth (${jr}): ${n}`,...e)}function zr(n,...e){throw Gy(n,...e)}function zi(n,...e){return Gy(n,...e)}function jD(n,e,t){let r=Object.assign(Object.assign({},FD()),{[e]:t});return new dn("auth","Firebase",r).create(e,{appName:n.name})}function qi(n){return jD(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gy(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return VD.create(n,...e)}function W(n,e,...t){if(!n)throw Gy(e,...t)}function er(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Ld(e),new Error(e)}function Wr(n,e){n||er(e)}function Py(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function sV(){return wD()==="http:"||wD()==="https:"}function wD(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function aV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sV()||UC()||"connection"in navigator)?navigator.onLine:!0}function cV(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Wi=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wr(t>e,"Short delay should be less than long delay!"),this.isMobile=VC()||$C()}get(){return aV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Ky(n,e){Wr(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var $d=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var uV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var lV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],dV=new Wi(3e4,6e4);function Qy(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function hs(o,s,c,u){return E(this,arguments,function*(n,e,t,r,i={}){return UD(n,i,()=>E(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=vc(Object.assign({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:m},l);return jC()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&Fr(n.emulatorConfig.host)&&(y.credentials="include"),$d.fetch()(yield $D(n,n.config.apiHost,t,p),y)}))})}function UD(n,e,t){return E(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},uV),e);try{let i=new xy(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Od(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Od(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Od(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw Od(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw jD(n,h,l);zr(n,h)}}catch(i){if(i instanceof jt)throw i;zr(n,"network-request-failed",{message:String(i)})}})}function hV(o,s,c,u){return E(this,arguments,function*(n,e,t,r,i={}){let l=yield hs(n,e,t,r,i);return"mfaPendingCredential"in l&&zr(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function $D(n,e,t,r){return E(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?Ky(n.config,i):`${n.config.apiScheme}://${i}`;return lV.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var xy=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(zi(this.auth,"network-request-failed")),dV.get())})}};function Od(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=zi(n,e,r);return i.customData._tokenResponse=t,i}function fV(n,e){return E(this,null,function*(){return hs(n,"POST","/v1/accounts:delete",e)})}function Bd(n,e){return E(this,null,function*(){return hs(n,"POST","/v1/accounts:lookup",e)})}function bc(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Yy(n,e=!1){return E(this,null,function*(){let t=nt(n),r=yield t.getIdToken(e),i=Jy(r);W(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:bc(Ay(i.auth_time)),issuedAtTime:bc(Ay(i.iat)),expirationTime:bc(Ay(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Ay(n){return Number(n)*1e3}function Jy(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ld("JWT malformed, contained fewer than 3 sections"),null;try{let i=Cd(t);return i?JSON.parse(i):(Ld("Failed to decode base64 JWT payload"),null)}catch(i){return Ld("Caught error parsing JWT payload as JSON",i?.toString()),null}}function TD(n){let e=Jy(n);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Cc(n,e,t=!1){return E(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof jt&&pV(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function pV({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var My=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>E(this,null,function*(){yield this.iteration()}),t)}iteration(){return E(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Dc=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=bc(this.lastLoginAt),this.creationTime=bc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Hd(n){return E(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Cc(n,Bd(t,{idToken:r}));W(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?BD(o.providerUserInfo):[],c=gV(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!c?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Dc(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function Zy(n){return E(this,null,function*(){let e=nt(n);yield Hd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function gV(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function BD(n){return n.map(e=>{var{providerId:t}=e,r=Kf(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function mV(n,e){return E(this,null,function*(){let t=yield UD(n,{},()=>E(null,null,function*(){let r=vc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield $D(n,i,"/v1/token",`key=${o}`),c=yield n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:c,body:r};return n.emulatorConfig&&Fr(n.emulatorConfig.host)&&(u.credentials="include"),$d.fetch()(s,u)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function yV(n,e){return E(this,null,function*(){return hs(n,"POST","/v2/accounts:revokeToken",Qy(n,e))})}var Sc=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):TD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){W(e.length!==0,"internal-error");let t=TD(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return E(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return E(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield mV(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(W(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(W(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return er("not implemented")}};function Hr(n,e){W(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var qr=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Kf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new My(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Dc(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return E(this,null,function*(){let t=yield Cc(this,this.stsTokenManager.getToken(this.auth,e));return W(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Yy(this,e)}reload(){return Zy(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return E(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Hd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return E(this,null,function*(){if(Zt(this.auth.app))return Promise.reject(qi(this.auth));let e=yield this.getIdToken();return yield Cc(this,fV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,c,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,D=(s=t.photoURL)!==null&&s!==void 0?s:void 0,N=(c=t.tenantId)!==null&&c!==void 0?c:void 0,R=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,O=(l=t.createdAt)!==null&&l!==void 0?l:void 0,$=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:G,emailVerified:Ee,isAnonymous:_t,providerData:ye,stsTokenManager:T}=t;W(G&&T,e,"internal-error");let v=Sc.fromJSON(this.name,T);W(typeof G=="string",e,"internal-error"),Hr(p,e.name),Hr(m,e.name),W(typeof Ee=="boolean",e,"internal-error"),W(typeof _t=="boolean",e,"internal-error"),Hr(y,e.name),Hr(D,e.name),Hr(N,e.name),Hr(R,e.name),Hr(O,e.name),Hr($,e.name);let I=new n({uid:G,auth:e,email:m,emailVerified:Ee,displayName:p,isAnonymous:_t,photoURL:D,phoneNumber:y,tenantId:N,stsTokenManager:v,createdAt:O,lastLoginAt:$});return ye&&Array.isArray(ye)&&(I.providerData=ye.map(w=>Object.assign({},w))),R&&(I._redirectEventId=R),I}static _fromIdTokenResponse(e,t,r=!1){return E(this,null,function*(){let i=new Sc;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Hd(o),o})}static _fromGetAccountInfoResponse(e,t,r){return E(this,null,function*(){let i=t.users[0];W(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?BD(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new Sc;c.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Dc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var bD=new Map;function tr(n){Wr(n instanceof Function,"Expected a class definition");let e=bD.get(n);return e?(Wr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,bD.set(n,e),e)}var vV=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return E(this,null,function*(){return!0})}_set(t,r){return E(this,null,function*(){this.storage[t]=r})}_get(t){return E(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return E(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),ky=vV;function Fd(n,e,t){return`firebase:${n}:${e}:${t}`}var qd=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Fd(this.userKey,i.apiKey,o),this.fullPersistenceKey=Fd("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return E(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Bd(this.auth,{idToken:e}).catch(()=>{});return t?qr._fromGetAccountInfoResponse(this.auth,t,e):null}return qr._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return E(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return E(this,null,function*(){if(!t.length)return new n(tr(ky),e,r);let i=(yield Promise.all(t.map(l=>E(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||tr(ky),s=Fd(r,e.config.apiKey,e.name),c=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield Bd(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield qr._fromGetAccountInfoResponse(e,m,h)}else p=qr._fromJSON(e,h);l!==o&&(c=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],c&&(yield o._set(s,c.toJSON())),yield Promise.all(t.map(l=>E(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function SD(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(KD(e))return"Blackberry";if(QD(e))return"Webos";if(qD(e))return"Safari";if((e.includes("chrome/")||zD(e))&&!e.includes("edge/"))return"Chrome";if(GD(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function HD(n=tt()){return/firefox\//i.test(n)}function qD(n=tt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zD(n=tt()){return/crios\//i.test(n)}function WD(n=tt()){return/iemobile/i.test(n)}function GD(n=tt()){return/android/i.test(n)}function KD(n=tt()){return/blackberry/i.test(n)}function QD(n=tt()){return/webos/i.test(n)}function Xy(n=tt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function _V(n=tt()){var e;return Xy(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function IV(){return BC()&&document.documentMode===10}function YD(n=tt()){return Xy(n)||GD(n)||QD(n)||KD(n)||/windows phone/i.test(n)||WD(n)}function JD(n,e=[]){let t;switch(n){case"Browser":t=SD(tt());break;case"Worker":t=`${SD(tt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${jr}/${r}`}var Oy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,c)=>{try{let u=e(o);s(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return E(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function EV(t){return E(this,arguments,function*(n,e={}){return hs(n,"GET","/v2/passwordPolicy",Qy(n,e))})}var wV=6,Ly=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:wV,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,c;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Fy=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zd(this),this.idTokenSubscription=new zd(this),this.beforeStateQueue=new Oy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=tr(t)),this._initializationPromise=this.queue(()=>E(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield qd.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return E(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return E(this,null,function*(){try{let t=yield Bd(this,{idToken:e}),r=yield qr._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return E(this,null,function*(){var t;if(Zt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===c)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return E(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return E(this,null,function*(){try{yield Hd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=cV()}_delete(){return E(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return E(this,null,function*(){if(Zt(this.app))return Promise.reject(qi(this));let t=e?nt(e):null;return t&&W(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return E(this,null,function*(){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>E(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return E(this,null,function*(){return Zt(this.app)?Promise.reject(qi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Zt(this.app)?Promise.reject(qi(this)):this.queue(()=>E(this,null,function*(){yield this.assertedPersistence.setPersistence(tr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return E(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return E(this,null,function*(){let e=yield EV(this),t=new Ly(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new dn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return E(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield yV(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return E(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return E(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&tr(e)||this._popupRedirectResolver;W(t,this,"argument-error"),this.redirectPersistenceManager=yield qd.create(this,[tr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return E(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>E(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return E(this,null,function*(){if(e===this.currentUser)return this.queue(()=>E(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return E(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=JD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return E(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return E(this,null,function*(){var e;if(Zt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&oV(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function ev(n){return nt(n)}var zd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=WC(t=>this.observer=t)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var tv={loadJS(){return E(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TV(n){tv=n}function bV(n){return tv.loadJS(n)}function SV(){return tv.gapiScript}function ZD(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function nv(n,e){let t=cs(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(wn(o,e??{}))return i;zr(i,"already-initialized")}return t.initialize({options:e})}function CV(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(tr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function rv(n,e,t){let r=ev(n);W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=XD(e),{host:s,port:c}=DV(e),u=c===null?"":`:${c}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){W(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),W(wn(l,r.config.emulator)&&wn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Fr(s)?(Ad(`${o}//${s}${u}`),Rd("Auth",!0)):i||AV()}function XD(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function DV(n){let e=XD(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:CD(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:CD(s)}}}function CD(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function AV(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Wd=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return er("not implemented")}_getIdTokenResponse(e){return er("not implemented")}_linkToIdToken(e,t){return er("not implemented")}_getReauthenticationResolver(e){return er("not implemented")}};function Ry(n,e){return E(this,null,function*(){return hV(n,"POST","/v1/accounts:signInWithIdp",Qy(n,e))})}var Gd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Vy=class extends Gd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Ac=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return E(this,null,function*(){let o=yield qr._fromIdTokenResponse(e,r,i),s=DD(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return E(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=DD(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function DD(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var jy=class n extends jt{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function eA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?jy._fromErrorAndOperation(n,o,e,r):o})}function RV(n,e,t=!1){return E(this,null,function*(){let r=yield Cc(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ac._forOperation(n,"link",r)})}function NV(n,e,t=!1){return E(this,null,function*(){let{auth:r}=n;if(Zt(r.app))return Promise.reject(qi(r));let i="reauthenticate";try{let o=yield Cc(n,eA(r,i,e,n),t);W(o.idToken,r,"internal-error");let s=Jy(o.idToken);W(s,r,"internal-error");let{sub:c}=s;return W(n.uid===c,r,"user-mismatch"),Ac._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&zr(r,"user-mismatch"),o}})}function PV(n,e,t=!1){return E(this,null,function*(){if(Zt(n.app))return Promise.reject(qi(n));let r="signIn",i=yield eA(n,r,e),o=yield Ac._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function iv(n,e,t,r){return nt(n).onIdTokenChanged(e,t,r)}function ov(n,e,t){return nt(n).beforeAuthStateChanged(e,t)}var Kd="__sak";var Qd=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Kd,"1"),this.storage.removeItem(Kd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var xV=1e3,MV=10,kV=(()=>{class n extends Qd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YD(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,u,l)=>{this.notifyListeners(c,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},s=this.storage.getItem(i);IV()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,MV):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},xV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return E(this,null,function*(){yield gr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return E(this,null,function*(){let r=yield gr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return E(this,null,function*(){yield gr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),tA=kV;var OV=(()=>{class n extends Qd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),sv=OV;function LV(n){return Promise.all(n.map(e=>E(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var FV=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return E(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,c=this.handlersMap[o];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(c).map(h=>E(this,null,function*(){return h(r.origin,s)})),l=yield LV(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function nA(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Uy=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return E(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((c,u)=>{let l=nA("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Sn(){return window}function VV(n){Sn().location.href=n}function rA(){return typeof Sn().WorkerGlobalScope<"u"&&typeof Sn().importScripts=="function"}function jV(){return E(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function UV(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function $V(){return rA()?self:null}var iA="firebaseLocalStorageDb",BV=1,Yd="firebaseLocalStorage",oA="fbase_key",Gi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Zd(n,e){return n.transaction([Yd],e?"readwrite":"readonly").objectStore(Yd)}function HV(){let n=indexedDB.deleteDatabase(iA);return new Gi(n).toPromise()}function $y(){let n=indexedDB.open(iA,BV);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Yd,{keyPath:oA})}catch(i){t(i)}}),n.addEventListener("success",()=>E(null,null,function*(){let r=n.result;r.objectStoreNames.contains(Yd)?e(r):(r.close(),yield HV(),e(yield $y()))}))})}function AD(n,e,t){return E(this,null,function*(){let r=Zd(n,!0).put({[oA]:e,value:t});return new Gi(r).toPromise()})}function qV(n,e){return E(this,null,function*(){let t=Zd(n,!1).get(e),r=yield new Gi(t).toPromise();return r===void 0?null:r.value})}function RD(n,e){let t=Zd(n,!0).delete(e);return new Gi(t).toPromise()}var zV=800,WV=3,GV=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return E(this,null,function*(){return this.db?this.db:(this.db=yield $y(),this.db)})}_withRetries(t){return E(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>WV)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return E(this,null,function*(){return rA()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return E(this,null,function*(){this.receiver=FV._getInstance($V()),this.receiver._subscribe("keyChanged",(t,r)=>E(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>E(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return E(this,null,function*(){var t,r;if(this.activeServiceWorker=yield jV(),!this.activeServiceWorker)return;this.sender=new Uy(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return E(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||UV()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return E(this,null,function*(){try{if(!indexedDB)return!1;let t=yield $y();return yield AD(t,Kd,"1"),yield RD(t,Kd),!0}catch{}return!1})}_withPendingWrite(t){return E(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(i=>AD(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return E(this,null,function*(){let r=yield this._withRetries(i=>qV(i,t));return this.localCache[t]=r,r})}_remove(t){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(r=>RD(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return E(this,null,function*(){let t=yield this._withRetries(o=>{let s=Zd(o,!1).getAll();return new Gi(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>E(this,null,function*(){return this._poll()}),zV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),sA=GV;var CX=ZD("rcb"),DX=new Wi(3e4,6e4);function KV(n,e){return e?tr(e):(W(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Rc=class extends Wd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ry(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ry(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ry(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function QV(n){return PV(n.auth,new Rc(n),n.bypassAuthState)}function YV(n){let{auth:e,user:t}=n;return W(t,e,"internal-error"),NV(t,new Rc(n),n.bypassAuthState)}function JV(n){return E(this,null,function*(){let{auth:e,user:t}=n;return W(t,e,"internal-error"),RV(t,new Rc(n),n.bypassAuthState)})}var By=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>E(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return E(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:c}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QV;case"linkViaPopup":case"linkViaRedirect":return JV;case"reauthViaPopup":case"reauthViaRedirect":return YV;default:zr(this.auth,"internal-error")}}resolve(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var AX=new Wi(2e3,1e4);var ZV="pendingRedirect",Vd=new Map,Hy=class n extends By{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return E(this,null,function*(){let e=Vd.get(this.auth._key());if(!e){try{let r=(yield XV(this.resolver,this.auth))?yield gr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Vd.set(this.auth._key(),e)}return this.bypassAuthState||Vd.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return E(this,null,function*(){if(e.type==="signInViaRedirect")return gr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,gr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return E(this,null,function*(){})}cleanUp(){}};function XV(n,e){return E(this,null,function*(){let t=nj(e),r=tj(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function ej(n,e){Vd.set(n._key(),e)}function tj(n){return tr(n._redirectPersistence)}function nj(n){return Fd(ZV,n.config.apiKey,n.name)}function rj(n,e,t=!1){return E(this,null,function*(){if(Zt(n.app))return Promise.reject(qi(n));let r=ev(n),i=KV(r,e),s=yield new Hy(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var ij=600*1e3,qy=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!aA(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(zi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ij&&this.cachedEventUids.clear(),this.cachedEventUids.has(ND(e))}saveEventToCache(e){this.cachedEventUids.add(ND(e)),this.lastProcessedEventTime=Date.now()}};function ND(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function aA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function oj(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aA(n);default:return!1}}function sj(t){return E(this,arguments,function*(n,e={}){return hs(n,"GET","/v1/projects",e)})}var aj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cj=/^https?/;function uj(n){return E(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield sj(n);for(let t of e)try{if(lj(t))return}catch{}zr(n,"unauthorized-domain")})}function lj(n){let e=Py(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!cj.test(t))return!1;if(aj.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var dj=new Wi(3e4,6e4);function PD(){let n=Sn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function hj(n){return new Promise((e,t)=>{var r,i,o;function s(){PD(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{PD(),t(zi(n,"network-request-failed"))},timeout:dj.get()})}if(!((i=(r=Sn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Sn().gapi)===null||o===void 0)&&o.load)s();else{let c=ZD("iframefcb");return Sn()[c]=()=>{gapi.load?s():t(zi(n,"network-request-failed"))},bV(`${SV()}?onload=${c}`).catch(u=>t(u))}}).catch(e=>{throw jd=null,e})}var jd=null;function fj(n){return jd=jd||hj(n),jd}var pj=new Wi(5e3,15e3),gj="__/auth/iframe",mj="emulator/auth/iframe",yj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _j(n){let e=n.config;W(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Ky(e,mj):`https://${n.config.authDomain}/${gj}`,r={apiKey:e.apiKey,appName:n.name,v:jr},i=vj.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${vc(r).slice(1)}`}function Ij(n){return E(this,null,function*(){let e=yield fj(n),t=Sn().gapi;return W(t,n,"internal-error"),e.open({where:document.body,url:_j(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yj,dontclear:!0},r=>new Promise((i,o)=>E(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=zi(n,"network-request-failed"),c=Sn().setTimeout(()=>{o(s)},pj.get());function u(){Sn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var Ej={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wj=500,Tj=600,bj="_blank",Sj="http://localhost",Jd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Cj(n,e,t,r=wj,i=Tj){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=Object.assign(Object.assign({},Ej),{width:r.toString(),height:i.toString(),top:o,left:s}),l=tt().toLowerCase();t&&(c=zD(l)?bj:t),HD(l)&&(e=e||Sj,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,D])=>`${m}${y}=${D},`,"");if(_V(l)&&c!=="_self")return Dj(e||"",c),new Jd(null);let p=window.open(e||"",c,h);W(p,n,"popup-blocked");try{p.focus()}catch{}return new Jd(p)}function Dj(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Aj="__/auth/handler",Rj="emulator/auth/handler",Nj=encodeURIComponent("fac");function xD(n,e,t,r,i,o){return E(this,null,function*(){W(n.config.authDomain,n,"auth-domain-config-required"),W(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:jr,eventId:i};if(e instanceof Gd){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",zC(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Vy){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let c=s;for(let h of Object.keys(c))c[h]===void 0&&delete c[h];let u=yield n._getAppCheckToken(),l=u?`#${Nj}=${encodeURIComponent(u)}`:"";return`${Pj(n)}?${vc(c).slice(1)}${l}`})}function Pj({config:n}){return n.emulator?Ky(n,Rj):`https://${n.authDomain}/${Aj}`}var Ny="webStorageSupport",zy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sv,this._completeRedirectFn=rj,this._overrideRedirectResult=ej}_openPopup(e,t,r,i){return E(this,null,function*(){var o;Wr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield xD(e,t,r,Py(),i);return Cj(e,s,nA())})}_openRedirect(e,t,r,i){return E(this,null,function*(){yield this._originValidation(e);let o=yield xD(e,t,r,Py(),i);return VV(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Wr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return E(this,null,function*(){let t=yield Ij(e),r=new qy(e);return t.register("authEvent",i=>(W(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ny,{type:Ny},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Ny];s!==void 0&&t(!!s),zr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=uj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return YD()||qD()||Xy()}},cA=zy;var MD="@firebase/auth",kD="1.10.8";var Wy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return E(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function xj(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Mj(n){hn(new Tt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;W(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JD(n)},l=new Fy(r,i,o,u);return CV(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),hn(new Tt("auth-internal",e=>{let t=ev(e.getProvider("auth").getImmediate());return(r=>new Wy(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ke(MD,kD,xj(n)),ke(MD,kD,"esm2017")}var kj=300,Oj=oy("authIdTokenMaxAge")||kj,OD=null,Lj=n=>e=>E(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Oj)return;let i=t?.token;OD!==i&&(OD=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function av(n=$i()){let e=cs(n,"auth");if(e.isInitialized())return e.getImmediate();let t=nv(n,{popupRedirectResolver:cA,persistence:[sA,tA,sv]}),r=oy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=Lj(o.toString());ov(t,s,()=>s(t.currentUser)),iv(t,c=>s(c))}}let i=ry("auth");return i&&rv(t,`http://${i}`),t}function Fj(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}TV({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=zi("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",Fj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Mj("Browser");var uA="auth",Nc=class{constructor(e){return e}},Pc=class{constructor(){return ls(uA)}};var cv=new U("angularfire2.auth-instances");function NU(n,e){let t=Ec(uA,n,e);return t&&new Nc(t)}function PU(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Nc(r)}}var xU={provide:Pc,deps:[[new Ot,cv]]},MU={provide:Nc,useFactory:NU,deps:[[new Ot,cv],Xn]};function lA(n,...e){return ke("angularfire",Ur.full,"auth"),rn([MU,xU,{provide:cv,useFactory:PU(n),multi:!0,deps:[ve,Ke,$r,Hi,[new Ot,ds],...e]}])}var dA=Ut(av,!0);var hA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fA={};var nr,uv;(function(){var n;function e(T,v){function I(){}I.prototype=v.prototype,T.D=v.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(w,b,C){for(var _=Array(arguments.length-2),Mn=2;Mn<arguments.length;Mn++)_[Mn-2]=arguments[Mn];return v.prototype[b].apply(w,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,I){I||(I=0);var w=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)w[b]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(b=0;16>b;++b)w[b]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=T.g[0],I=T.g[1],b=T.g[2];var C=T.g[3],_=v+(C^I&(b^C))+w[0]+3614090360&4294967295;v=I+(_<<7&4294967295|_>>>25),_=C+(b^v&(I^b))+w[1]+3905402710&4294967295,C=v+(_<<12&4294967295|_>>>20),_=b+(I^C&(v^I))+w[2]+606105819&4294967295,b=C+(_<<17&4294967295|_>>>15),_=I+(v^b&(C^v))+w[3]+3250441966&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(C^I&(b^C))+w[4]+4118548399&4294967295,v=I+(_<<7&4294967295|_>>>25),_=C+(b^v&(I^b))+w[5]+1200080426&4294967295,C=v+(_<<12&4294967295|_>>>20),_=b+(I^C&(v^I))+w[6]+2821735955&4294967295,b=C+(_<<17&4294967295|_>>>15),_=I+(v^b&(C^v))+w[7]+4249261313&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(C^I&(b^C))+w[8]+1770035416&4294967295,v=I+(_<<7&4294967295|_>>>25),_=C+(b^v&(I^b))+w[9]+2336552879&4294967295,C=v+(_<<12&4294967295|_>>>20),_=b+(I^C&(v^I))+w[10]+4294925233&4294967295,b=C+(_<<17&4294967295|_>>>15),_=I+(v^b&(C^v))+w[11]+2304563134&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(C^I&(b^C))+w[12]+1804603682&4294967295,v=I+(_<<7&4294967295|_>>>25),_=C+(b^v&(I^b))+w[13]+4254626195&4294967295,C=v+(_<<12&4294967295|_>>>20),_=b+(I^C&(v^I))+w[14]+2792965006&4294967295,b=C+(_<<17&4294967295|_>>>15),_=I+(v^b&(C^v))+w[15]+1236535329&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(b^C&(I^b))+w[1]+4129170786&4294967295,v=I+(_<<5&4294967295|_>>>27),_=C+(I^b&(v^I))+w[6]+3225465664&4294967295,C=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(C^v))+w[11]+643717713&4294967295,b=C+(_<<14&4294967295|_>>>18),_=I+(C^v&(b^C))+w[0]+3921069994&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(b^C&(I^b))+w[5]+3593408605&4294967295,v=I+(_<<5&4294967295|_>>>27),_=C+(I^b&(v^I))+w[10]+38016083&4294967295,C=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(C^v))+w[15]+3634488961&4294967295,b=C+(_<<14&4294967295|_>>>18),_=I+(C^v&(b^C))+w[4]+3889429448&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(b^C&(I^b))+w[9]+568446438&4294967295,v=I+(_<<5&4294967295|_>>>27),_=C+(I^b&(v^I))+w[14]+3275163606&4294967295,C=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(C^v))+w[3]+4107603335&4294967295,b=C+(_<<14&4294967295|_>>>18),_=I+(C^v&(b^C))+w[8]+1163531501&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(b^C&(I^b))+w[13]+2850285829&4294967295,v=I+(_<<5&4294967295|_>>>27),_=C+(I^b&(v^I))+w[2]+4243563512&4294967295,C=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(C^v))+w[7]+1735328473&4294967295,b=C+(_<<14&4294967295|_>>>18),_=I+(C^v&(b^C))+w[12]+2368359562&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(I^b^C)+w[5]+4294588738&4294967295,v=I+(_<<4&4294967295|_>>>28),_=C+(v^I^b)+w[8]+2272392833&4294967295,C=v+(_<<11&4294967295|_>>>21),_=b+(C^v^I)+w[11]+1839030562&4294967295,b=C+(_<<16&4294967295|_>>>16),_=I+(b^C^v)+w[14]+4259657740&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(I^b^C)+w[1]+2763975236&4294967295,v=I+(_<<4&4294967295|_>>>28),_=C+(v^I^b)+w[4]+1272893353&4294967295,C=v+(_<<11&4294967295|_>>>21),_=b+(C^v^I)+w[7]+4139469664&4294967295,b=C+(_<<16&4294967295|_>>>16),_=I+(b^C^v)+w[10]+3200236656&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(I^b^C)+w[13]+681279174&4294967295,v=I+(_<<4&4294967295|_>>>28),_=C+(v^I^b)+w[0]+3936430074&4294967295,C=v+(_<<11&4294967295|_>>>21),_=b+(C^v^I)+w[3]+3572445317&4294967295,b=C+(_<<16&4294967295|_>>>16),_=I+(b^C^v)+w[6]+76029189&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(I^b^C)+w[9]+3654602809&4294967295,v=I+(_<<4&4294967295|_>>>28),_=C+(v^I^b)+w[12]+3873151461&4294967295,C=v+(_<<11&4294967295|_>>>21),_=b+(C^v^I)+w[15]+530742520&4294967295,b=C+(_<<16&4294967295|_>>>16),_=I+(b^C^v)+w[2]+3299628645&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(b^(I|~C))+w[0]+4096336452&4294967295,v=I+(_<<6&4294967295|_>>>26),_=C+(I^(v|~b))+w[7]+1126891415&4294967295,C=v+(_<<10&4294967295|_>>>22),_=b+(v^(C|~I))+w[14]+2878612391&4294967295,b=C+(_<<15&4294967295|_>>>17),_=I+(C^(b|~v))+w[5]+4237533241&4294967295,I=b+(_<<21&4294967295|_>>>11),_=v+(b^(I|~C))+w[12]+1700485571&4294967295,v=I+(_<<6&4294967295|_>>>26),_=C+(I^(v|~b))+w[3]+2399980690&4294967295,C=v+(_<<10&4294967295|_>>>22),_=b+(v^(C|~I))+w[10]+4293915773&4294967295,b=C+(_<<15&4294967295|_>>>17),_=I+(C^(b|~v))+w[1]+2240044497&4294967295,I=b+(_<<21&4294967295|_>>>11),_=v+(b^(I|~C))+w[8]+1873313359&4294967295,v=I+(_<<6&4294967295|_>>>26),_=C+(I^(v|~b))+w[15]+4264355552&4294967295,C=v+(_<<10&4294967295|_>>>22),_=b+(v^(C|~I))+w[6]+2734768916&4294967295,b=C+(_<<15&4294967295|_>>>17),_=I+(C^(b|~v))+w[13]+1309151649&4294967295,I=b+(_<<21&4294967295|_>>>11),_=v+(b^(I|~C))+w[4]+4149444226&4294967295,v=I+(_<<6&4294967295|_>>>26),_=C+(I^(v|~b))+w[11]+3174756917&4294967295,C=v+(_<<10&4294967295|_>>>22),_=b+(v^(C|~I))+w[2]+718787259&4294967295,b=C+(_<<15&4294967295|_>>>17),_=I+(C^(b|~v))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(b+(_<<21&4294967295|_>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+C&4294967295}r.prototype.u=function(T,v){v===void 0&&(v=T.length);for(var I=v-this.blockSize,w=this.B,b=this.h,C=0;C<v;){if(b==0)for(;C<=I;)i(this,T,C),C+=this.blockSize;if(typeof T=="string"){for(;C<v;)if(w[b++]=T.charCodeAt(C++),b==this.blockSize){i(this,w),b=0;break}}else for(;C<v;)if(w[b++]=T[C++],b==this.blockSize){i(this,w),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;var I=8*this.o;for(v=T.length-8;v<T.length;++v)T[v]=I&255,I/=256;for(this.u(T),T=Array(16),v=I=0;4>v;++v)for(var w=0;32>w;w+=8)T[I++]=this.g[v]>>>w&255;return T};function o(T,v){var I=c;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=v(T)}function s(T,v){this.h=v;for(var I=[],w=!0,b=T.length-1;0<=b;b--){var C=T[b]|0;w&&C==v||(I[b]=C,w=!1)}this.g=I}var c={};function u(T){return-128<=T&&128>T?o(T,function(v){return new s([v|0],0>v?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return R(l(-T));for(var v=[],I=1,w=0;T>=I;w++)v[w]=T/I|0,I*=4294967296;return new s(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return R(h(T.substring(1),v));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),w=p,b=0;b<T.length;b+=8){var C=Math.min(8,T.length-b),_=parseInt(T.substring(b,b+C),v);8>C?(C=l(Math.pow(v,C)),w=w.j(C).add(l(_))):(w=w.j(I),w=w.add(l(_)))}return w}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(N(this))return-R(this).m();for(var T=0,v=1,I=0;I<this.g.length;I++){var w=this.i(I);T+=(0<=w?w:4294967296+w)*v,v*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(D(this))return"0";if(N(this))return"-"+R(this).toString(T);for(var v=l(Math.pow(T,6)),I=this,w="";;){var b=Ee(I,v).g;I=O(I,b.j(v));var C=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=b,D(I))return C+w;for(;6>C.length;)C="0"+C;w=C+w}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function D(T){if(T.h!=0)return!1;for(var v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function N(T){return T.h==-1}n.l=function(T){return T=O(this,T),N(T)?-1:D(T)?0:1};function R(T){for(var v=T.g.length,I=[],w=0;w<v;w++)I[w]=~T.g[w];return new s(I,~T.h).add(m)}n.abs=function(){return N(this)?R(this):this},n.add=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0,b=0;b<=v;b++){var C=w+(this.i(b)&65535)+(T.i(b)&65535),_=(C>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);w=_>>>16,C&=65535,_&=65535,I[b]=_<<16|C}return new s(I,I[I.length-1]&-2147483648?-1:0)};function O(T,v){return T.add(R(v))}n.j=function(T){if(D(this)||D(T))return p;if(N(this))return N(T)?R(this).j(R(T)):R(R(this).j(T));if(N(T))return R(this.j(R(T)));if(0>this.l(y)&&0>T.l(y))return l(this.m()*T.m());for(var v=this.g.length+T.g.length,I=[],w=0;w<2*v;w++)I[w]=0;for(w=0;w<this.g.length;w++)for(var b=0;b<T.g.length;b++){var C=this.i(w)>>>16,_=this.i(w)&65535,Mn=T.i(b)>>>16,Us=T.i(b)&65535;I[2*w+2*b]+=_*Us,$(I,2*w+2*b),I[2*w+2*b+1]+=C*Us,$(I,2*w+2*b+1),I[2*w+2*b+1]+=_*Mn,$(I,2*w+2*b+1),I[2*w+2*b+2]+=C*Mn,$(I,2*w+2*b+2)}for(w=0;w<v;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=v;w<2*v;w++)I[w]=0;return new s(I,0)};function $(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function G(T,v){this.g=T,this.h=v}function Ee(T,v){if(D(v))throw Error("division by zero");if(D(T))return new G(p,p);if(N(T))return v=Ee(R(T),v),new G(R(v.g),R(v.h));if(N(v))return v=Ee(T,R(v)),new G(R(v.g),v.h);if(30<T.g.length){if(N(T)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var I=m,w=v;0>=w.l(T);)I=_t(I),w=_t(w);var b=ye(I,1),C=ye(w,1);for(w=ye(w,2),I=ye(I,2);!D(w);){var _=C.add(w);0>=_.l(T)&&(b=b.add(I),C=_),w=ye(w,1),I=ye(I,1)}return v=O(T,b.j(v)),new G(b,v)}for(b=p;0<=T.l(v);){for(I=Math.max(1,Math.floor(T.m()/v.m())),w=Math.ceil(Math.log(I)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),C=l(I),_=C.j(v);N(_)||0<_.l(T);)I-=w,C=l(I),_=C.j(v);D(C)&&(C=m),b=b.add(C),T=O(T,_)}return new G(b,T)}n.A=function(T){return Ee(this,T).h},n.and=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)&T.i(w);return new s(I,this.h&T.h)},n.or=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)|T.i(w);return new s(I,this.h|T.h)},n.xor=function(T){for(var v=Math.max(this.g.length,T.g.length),I=[],w=0;w<v;w++)I[w]=this.i(w)^T.i(w);return new s(I,this.h^T.h)};function _t(T){for(var v=T.g.length+1,I=[],w=0;w<v;w++)I[w]=T.i(w)<<1|T.i(w-1)>>>31;return new s(I,T.h)}function ye(T,v){var I=v>>5;v%=32;for(var w=T.g.length-I,b=[],C=0;C<w;C++)b[C]=0<v?T.i(C+I)>>>v|T.i(C+I+1)<<32-v:T.i(C+I);return new s(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,uv=fA.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,nr=fA.Integer=s}).apply(typeof hA<"u"?hA:typeof self<"u"?self:typeof window<"u"?window:{});var Xd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rr={};var lv,kU,fs,dv,xc,eh,hv,fv,pv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xd=="object"&&Xd];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var S=a[g];if(!(S in f))break e;f=f[S]}a=a[a.length-1],g=f[a],d=d(g),d!=g&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function o(a,d){a instanceof String&&(a+="");var f=0,g=!1,S={next:function(){if(!g&&f<a.length){var A=f++;return{value:d(A,a[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return S[Symbol.iterator]=function(){return S},S}i("Array.prototype.values",function(a){return a||function(){return o(this,function(d,f){return f})}});var s=s||{},c=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function l(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function h(a,d,f){return a.call.apply(a.bind,arguments)}function p(a,d,f){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var S=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(S,g),a.apply(d,S)}}return function(){return a.apply(d,arguments)}}function m(a,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function D(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(g,S,A){for(var k=Array(arguments.length-2),we=2;we<arguments.length;we++)k[we-2]=arguments[we];return d.prototype[S].apply(g,k)}}function N(a){let d=a.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=a[g];return f}return[]}function R(a,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let S=a.length||0,A=g.length||0;a.length=S+A;for(let k=0;k<A;k++)a[S+k]=g[k]}else a.push(g)}}class O{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function $(a){return/^[\s\xa0]*$/.test(a)}function G(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function Ee(a){return Ee[" "](a),a}Ee[" "]=function(){};var _t=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function ye(a,d,f){for(let g in a)d.call(f,a[g],g,a)}function T(a,d){for(let f in a)d.call(void 0,a[f],f,a)}function v(a){let d={};for(let f in a)d[f]=a[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,d){let f,g;for(let S=1;S<arguments.length;S++){g=arguments[S];for(f in g)a[f]=g[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function b(a){var d=1;a=a.split(":");let f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function C(a){c.setTimeout(()=>{throw a},0)}function _(){var a=ef;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Mn{constructor(){this.h=this.g=null}add(d,f){let g=Us.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Us=new O(()=>new KN,a=>a.reset());class KN{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let $s,Bs=!1,ef=new Mn,MI=()=>{let a=c.Promise.resolve(void 0);$s=()=>{a.then(QN)}};var QN=()=>{for(var a;a=_();){try{a.h.call(a.g)}catch(f){C(f)}var d=Us;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}Bs=!1};function dr(){this.s=this.s,this.C=this.C}dr.prototype.s=!1,dr.prototype.ma=function(){this.s||(this.s=!0,this.N())},dr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ut(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}ut.prototype.h=function(){this.defaultPrevented=!0};var YN=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let f=()=>{};c.addEventListener("test",f,d),c.removeEventListener("test",f,d)}catch{}return a})();function Hs(a,d){if(ut.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(_t){e:{try{Ee(d.nodeName);var S=!0;break e}catch{}S=!1}S||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:JN[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Hs.aa.h.call(this)}}D(Hs,ut);var JN={2:"touch",3:"pen",4:"mouse"};Hs.prototype.h=function(){Hs.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var qs="closure_listenable_"+(1e6*Math.random()|0),ZN=0;function XN(a,d,f,g,S){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=S,this.key=++ZN,this.da=this.fa=!1}function Zc(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Xc(a){this.src=a,this.g={},this.h=0}Xc.prototype.add=function(a,d,f,g,S){var A=a.toString();a=this.g[A],a||(a=this.g[A]=[],this.h++);var k=nf(a,d,g,S);return-1<k?(d=a[k],f||(d.fa=!1)):(d=new XN(d,this.src,A,!!g,S),d.fa=f,a.push(d)),d};function tf(a,d){var f=d.type;if(f in a.g){var g=a.g[f],S=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=S)&&Array.prototype.splice.call(g,S,1),A&&(Zc(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function nf(a,d,f,g){for(var S=0;S<a.length;++S){var A=a[S];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return S}return-1}var rf="closure_lm_"+(1e6*Math.random()|0),of={};function kI(a,d,f,g,S){if(g&&g.once)return LI(a,d,f,g,S);if(Array.isArray(d)){for(var A=0;A<d.length;A++)kI(a,d[A],f,g,S);return null}return f=uf(f),a&&a[qs]?a.K(d,f,l(g)?!!g.capture:!!g,S):OI(a,d,f,!1,g,S)}function OI(a,d,f,g,S,A){if(!d)throw Error("Invalid event type");var k=l(S)?!!S.capture:!!S,we=af(a);if(we||(a[rf]=we=new Xc(a)),f=we.add(d,f,g,k,A),f.proxy)return f;if(g=e0(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)YN||(S=k),S===void 0&&(S=!1),a.addEventListener(d.toString(),g,S);else if(a.attachEvent)a.attachEvent(VI(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function e0(){function a(f){return d.call(a.src,a.listener,f)}let d=t0;return a}function LI(a,d,f,g,S){if(Array.isArray(d)){for(var A=0;A<d.length;A++)LI(a,d[A],f,g,S);return null}return f=uf(f),a&&a[qs]?a.L(d,f,l(g)?!!g.capture:!!g,S):OI(a,d,f,!0,g,S)}function FI(a,d,f,g,S){if(Array.isArray(d))for(var A=0;A<d.length;A++)FI(a,d[A],f,g,S);else g=l(g)?!!g.capture:!!g,f=uf(f),a&&a[qs]?(a=a.i,d=String(d).toString(),d in a.g&&(A=a.g[d],f=nf(A,f,g,S),-1<f&&(Zc(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete a.g[d],a.h--)))):a&&(a=af(a))&&(d=a.g[d.toString()],a=-1,d&&(a=nf(d,f,g,S)),(f=-1<a?d[a]:null)&&sf(f))}function sf(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[qs])tf(d.i,a);else{var f=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(f,g,a.capture):d.detachEvent?d.detachEvent(VI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=af(d))?(tf(f,a),f.h==0&&(f.src=null,d[rf]=null)):Zc(a)}}}function VI(a){return a in of?of[a]:of[a]="on"+a}function t0(a,d){if(a.da)a=!0;else{d=new Hs(d,this);var f=a.listener,g=a.ha||a.src;a.fa&&sf(a),a=f.call(g,d)}return a}function af(a){return a=a[rf],a instanceof Xc?a:null}var cf="__closure_events_fn_"+(1e9*Math.random()>>>0);function uf(a){return typeof a=="function"?a:(a[cf]||(a[cf]=function(d){return a.handleEvent(d)}),a[cf])}function lt(){dr.call(this),this.i=new Xc(this),this.M=this,this.F=null}D(lt,dr),lt.prototype[qs]=!0,lt.prototype.removeEventListener=function(a,d,f,g){FI(this,a,d,f,g)};function It(a,d){var f,g=a.F;if(g)for(f=[];g;g=g.F)f.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new ut(d,a);else if(d instanceof ut)d.target=d.target||a;else{var S=d;d=new ut(g,a),w(d,S)}if(S=!0,f)for(var A=f.length-1;0<=A;A--){var k=d.g=f[A];S=eu(k,g,!0,d)&&S}if(k=d.g=a,S=eu(k,g,!0,d)&&S,S=eu(k,g,!1,d)&&S,f)for(A=0;A<f.length;A++)k=d.g=f[A],S=eu(k,g,!1,d)&&S}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],g=0;g<f.length;g++)Zc(f[g]);delete a.g[d],a.h--}}this.F=null},lt.prototype.K=function(a,d,f,g){return this.i.add(String(a),d,!1,f,g)},lt.prototype.L=function(a,d,f,g){return this.i.add(String(a),d,!0,f,g)};function eu(a,d,f,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var S=!0,A=0;A<d.length;++A){var k=d[A];if(k&&!k.da&&k.capture==f){var we=k.listener,ot=k.ha||k.src;k.fa&&tf(a.i,k),S=we.call(ot,g)!==!1&&S}}return S&&!g.defaultPrevented}function jI(a,d,f){if(typeof a=="function")f&&(a=m(a,f));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(a,d||0)}function UI(a){a.g=jI(()=>{a.g=null,a.i&&(a.i=!1,UI(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class n0 extends dr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:UI(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zs(a){dr.call(this),this.h=a,this.g={}}D(zs,dr);var $I=[];function BI(a){ye(a.g,function(d,f){this.g.hasOwnProperty(f)&&sf(d)},a),a.g={}}zs.prototype.N=function(){zs.aa.N.call(this),BI(this)},zs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lf=c.JSON.stringify,r0=c.JSON.parse,i0=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function df(){}df.prototype.h=null;function HI(a){return a.h||(a.h=a.i())}function qI(){}var Ws={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hf(){ut.call(this,"d")}D(hf,ut);function ff(){ut.call(this,"c")}D(ff,ut);var ii={},zI=null;function tu(){return zI=zI||new lt}ii.La="serverreachability";function WI(a){ut.call(this,ii.La,a)}D(WI,ut);function Gs(a){let d=tu();It(d,new WI(d))}ii.STAT_EVENT="statevent";function GI(a,d){ut.call(this,ii.STAT_EVENT,a),this.stat=d}D(GI,ut);function Et(a){let d=tu();It(d,new GI(d,a))}ii.Ma="timingevent";function KI(a,d){ut.call(this,ii.Ma,a),this.size=d}D(KI,ut);function Ks(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},d)}function Qs(){this.g=!0}Qs.prototype.xa=function(){this.g=!1};function o0(a,d,f,g,S,A){a.info(function(){if(a.g)if(A)for(var k="",we=A.split("&"),ot=0;ot<we.length;ot++){var fe=we[ot].split("=");if(1<fe.length){var dt=fe[0];fe=fe[1];var ht=dt.split("_");k=2<=ht.length&&ht[1]=="type"?k+(dt+"="+fe+"&"):k+(dt+"=redacted&")}}else k=null;else k=A;return"XMLHTTP REQ ("+g+") [attempt "+S+"]: "+d+`
`+f+`
`+k})}function s0(a,d,f,g,S,A,k){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+S+"]: "+d+`
`+f+`
`+A+" "+k})}function so(a,d,f,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+c0(a,f)+(g?" "+g:"")})}function a0(a,d){a.info(function(){return"TIMEOUT: "+d})}Qs.prototype.info=function(){};function c0(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var g=f[a];if(!(2>g.length)){var S=g[1];if(Array.isArray(S)&&!(1>S.length)){var A=S[0];if(A!="noop"&&A!="stop"&&A!="close")for(var k=1;k<S.length;k++)S[k]=""}}}}return lf(f)}catch{return d}}var nu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},QI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pf;function ru(){}D(ru,df),ru.prototype.g=function(){return new XMLHttpRequest},ru.prototype.i=function(){return{}},pf=new ru;function hr(a,d,f,g){this.j=a,this.i=d,this.l=f,this.R=g||1,this.U=new zs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new YI}function YI(){this.i=null,this.g="",this.h=!1}var JI={},gf={};function mf(a,d,f){a.L=1,a.v=au(kn(d)),a.m=f,a.P=!0,ZI(a,null)}function ZI(a,d){a.F=Date.now(),iu(a),a.A=kn(a.v);var f=a.A,g=a.R;Array.isArray(g)||(g=[String(g)]),hE(f.i,"t",g),a.C=0,f=a.j.J,a.h=new YI,a.g=NE(a.j,f?d:null,!a.m),0<a.O&&(a.M=new n0(m(a.Y,a,a.g),a.O)),d=a.U,f=a.g,g=a.ca;var S="readystatechange";Array.isArray(S)||(S&&($I[0]=S.toString()),S=$I);for(var A=0;A<S.length;A++){var k=kI(f,S[A],g||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Gs(),o0(a.i,a.u,a.A,a.l,a.R,a.m)}hr.prototype.ca=function(a){a=a.target;let d=this.M;d&&On(a)==3?d.j():this.Y(a)},hr.prototype.Y=function(a){try{if(a==this.g)e:{let ht=On(this.g);var d=this.g.Ba();let uo=this.g.Z();if(!(3>ht)&&(ht!=3||this.g&&(this.h.h||this.g.oa()||_E(this.g)))){this.J||ht!=4||d==7||(d==8||0>=uo?Gs(3):Gs(2)),yf(this);var f=this.g.Z();this.X=f;t:if(XI(this)){var g=_E(this.g);a="";var S=g.length,A=On(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){oi(this),Ys(this);var k="";break t}this.h.i=new c.TextDecoder}for(d=0;d<S;d++)this.h.h=!0,a+=this.h.i.decode(g[d],{stream:!(A&&d==S-1)});g.length=0,this.h.g+=a,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=f==200,s0(this.i,this.u,this.A,this.l,this.R,ht,f),this.o){if(this.T&&!this.K){t:{if(this.g){var we,ot=this.g;if((we=ot.g?ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(we)){var fe=we;break t}}fe=null}if(f=fe)so(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vf(this,f);else{this.o=!1,this.s=3,Et(12),oi(this),Ys(this);break e}}if(this.P){f=!0;let tn;for(;!this.J&&this.C<k.length;)if(tn=u0(this,k),tn==gf){ht==4&&(this.s=4,Et(14),f=!1),so(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==JI){this.s=4,Et(15),so(this.i,this.l,k,"[Invalid Chunk]"),f=!1;break}else so(this.i,this.l,tn,null),vf(this,tn);if(XI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ht!=4||k.length!=0||this.h.h||(this.s=1,Et(16),f=!1),this.o=this.o&&f,!f)so(this.i,this.l,k,"[Invalid Chunked Response]"),oi(this),Ys(this);else if(0<k.length&&!this.W){this.W=!0;var dt=this.j;dt.g==this&&dt.ba&&!dt.M&&(dt.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),bf(dt),dt.M=!0,Et(11))}}else so(this.i,this.l,k,null),vf(this,k);ht==4&&oi(this),this.o&&!this.J&&(ht==4?CE(this.j,this):(this.o=!1,iu(this)))}else C0(this.g),f==400&&0<k.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),oi(this),Ys(this)}}}catch{}finally{}};function XI(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function u0(a,d){var f=a.C,g=d.indexOf(`
`,f);return g==-1?gf:(f=Number(d.substring(f,g)),isNaN(f)?JI:(g+=1,g+f>d.length?gf:(d=d.slice(g,g+f),a.C=g+f,d)))}hr.prototype.cancel=function(){this.J=!0,oi(this)};function iu(a){a.S=Date.now()+a.I,eE(a,a.I)}function eE(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Ks(m(a.ba,a),d)}function yf(a){a.B&&(c.clearTimeout(a.B),a.B=null)}hr.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(a0(this.i,this.A),this.L!=2&&(Gs(),Et(17)),oi(this),this.s=2,Ys(this)):eE(this,this.S-a)};function Ys(a){a.j.G==0||a.J||CE(a.j,a)}function oi(a){yf(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,BI(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function vf(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||_f(f.h,a))){if(!a.K&&_f(f.h,a)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var S=g;if(S[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)hu(f),lu(f);else break e;Tf(f),Et(18)}}else f.za=S[1],0<f.za-f.T&&37500>S[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ks(m(f.Za,f),6e3));if(1>=rE(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ai(f,11)}else if((a.K||f.g==a)&&hu(f),!$(d))for(S=f.Da.g.parse(d),d=0;d<S.length;d++){let fe=S[d];if(f.T=fe[0],fe=fe[1],f.G==2)if(fe[0]=="c"){f.K=fe[1],f.ia=fe[2];let dt=fe[3];dt!=null&&(f.la=dt,f.j.info("VER="+f.la));let ht=fe[4];ht!=null&&(f.Aa=ht,f.j.info("SVER="+f.Aa));let uo=fe[5];uo!=null&&typeof uo=="number"&&0<uo&&(g=1.5*uo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let tn=a.g;if(tn){let pu=tn.g?tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pu){var A=g.h;A.g||pu.indexOf("spdy")==-1&&pu.indexOf("quic")==-1&&pu.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(If(A,A.h),A.h=null))}if(g.D){let Sf=tn.g?tn.g.getResponseHeader("X-HTTP-Session-Id"):null;Sf&&(g.ya=Sf,Se(g.I,g.D,Sf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var k=a;if(g.qa=RE(g,g.J?g.ia:null,g.W),k.K){iE(g.h,k);var we=k,ot=g.L;ot&&(we.I=ot),we.B&&(yf(we),iu(we)),g.g=k}else bE(g);0<f.i.length&&du(f)}else fe[0]!="stop"&&fe[0]!="close"||ai(f,7);else f.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?ai(f,7):wf(f):fe[0]!="noop"&&f.l&&f.l.ta(fe),f.v=0)}}Gs(4)}catch{}}var l0=class{constructor(a,d){this.g=a,this.map=d}};function tE(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function nE(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function rE(a){return a.h?1:a.g?a.g.size:0}function _f(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function If(a,d){a.g?a.g.add(d):a.h=d}function iE(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}tE.prototype.cancel=function(){if(this.i=oE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function oE(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let f of a.g.values())d=d.concat(f.D);return d}return N(a.i)}function d0(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],f=a.length,g=0;g<f;g++)d.push(a[g]);return d}d=[],f=0;for(g in a)d[f++]=a[g];return d}function h0(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(let g in a)d[f++]=g;return d}}}function sE(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=h0(a),g=d0(a),S=g.length,A=0;A<S;A++)d.call(void 0,g[A],f&&f[A],a)}var aE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function f0(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var g=a[f].indexOf("="),S=null;if(0<=g){var A=a[f].substring(0,g);S=a[f].substring(g+1)}else A=a[f];d(A,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function si(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof si){this.h=a.h,ou(this,a.j),this.o=a.o,this.g=a.g,su(this,a.s),this.l=a.l;var d=a.i,f=new Xs;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),cE(this,f),this.m=a.m}else a&&(d=String(a).match(aE))?(this.h=!1,ou(this,d[1]||"",!0),this.o=Js(d[2]||""),this.g=Js(d[3]||"",!0),su(this,d[4]),this.l=Js(d[5]||"",!0),cE(this,d[6]||"",!0),this.m=Js(d[7]||"")):(this.h=!1,this.i=new Xs(null,this.h))}si.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Zs(d,uE,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Zs(d,uE,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Zs(f,f.charAt(0)=="/"?m0:g0,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Zs(f,v0)),a.join("")};function kn(a){return new si(a)}function ou(a,d,f){a.j=f?Js(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function su(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function cE(a,d,f){d instanceof Xs?(a.i=d,_0(a.i,a.h)):(f||(d=Zs(d,y0)),a.i=new Xs(d,a.h))}function Se(a,d,f){a.i.set(d,f)}function au(a){return Se(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Js(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Zs(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,p0),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function p0(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var uE=/[#\/\?@]/g,g0=/[#\?:]/g,m0=/[#\?]/g,y0=/[#\?@]/g,v0=/#/g;function Xs(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function fr(a){a.g||(a.g=new Map,a.h=0,a.i&&f0(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Xs.prototype,n.add=function(a,d){fr(this),this.i=null,a=ao(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function lE(a,d){fr(a),d=ao(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function dE(a,d){return fr(a),d=ao(a,d),a.g.has(d)}n.forEach=function(a,d){fr(this),this.g.forEach(function(f,g){f.forEach(function(S){a.call(d,S,g,this)},this)},this)},n.na=function(){fr(this);let a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let S=a[g];for(let A=0;A<S.length;A++)f.push(d[g])}return f},n.V=function(a){fr(this);let d=[];if(typeof a=="string")dE(this,a)&&(d=d.concat(this.g.get(ao(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},n.set=function(a,d){return fr(this),this.i=null,a=ao(this,a),dE(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},n.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function hE(a,d,f){lE(a,d),0<f.length&&(a.i=null,a.g.set(ao(a,d),N(f)),a.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),k=this.V(g);for(g=0;g<k.length;g++){var S=A;k[g]!==""&&(S+="="+encodeURIComponent(String(k[g]))),a.push(S)}}return this.i=a.join("&")};function ao(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function _0(a,d){d&&!a.j&&(fr(a),a.i=null,a.g.forEach(function(f,g){var S=g.toLowerCase();g!=S&&(lE(this,g),hE(this,S,f))},a)),a.j=d}function I0(a,d){let f=new Qs;if(c.Image){let g=new Image;g.onload=y(pr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(pr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(pr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(pr,f,"TestLoadImage: timeout",!1,d,g),c.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function E0(a,d){let f=new Qs,g=new AbortController,S=setTimeout(()=>{g.abort(),pr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(A=>{clearTimeout(S),A.ok?pr(f,"TestPingServer: ok",!0,d):pr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(S),pr(f,"TestPingServer: error",!1,d)})}function pr(a,d,f,g,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),g(f)}catch{}}function w0(){this.g=new i0}function T0(a,d,f){let g=f||"";try{sE(a,function(S,A){let k=S;l(S)&&(k=lf(S)),d.push(g+A+"="+encodeURIComponent(k))})}catch(S){throw d.push(g+"type="+encodeURIComponent("_badmap")),S}}function ea(a){this.l=a.Ub||null,this.j=a.eb||!1}D(ea,df),ea.prototype.g=function(){return new cu(this.l,this.j)},ea.prototype.i=(function(a){return function(){return a}})({});function cu(a,d){lt.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(cu,lt),n=cu.prototype,n.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,na(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ta(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,na(this)),this.g&&(this.readyState=3,na(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fE(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function fE(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?ta(this):na(this),this.readyState==3&&fE(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,ta(this))},n.Qa=function(a){this.g&&(this.response=a,ta(this))},n.ga=function(){this.g&&ta(this)};function ta(a){a.readyState=4,a.l=null,a.j=null,a.v=null,na(a)}n.setRequestHeader=function(a,d){this.u.append(a,d)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function na(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(cu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function pE(a){let d="";return ye(a,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Ef(a,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=pE(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Se(a,d,f))}function Ne(a){lt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Ne,lt);var b0=/^https?$/i,S0=["POST","PUT"];n=Ne.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pf.g(),this.v=this.o?HI(this.o):HI(pf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(A){gE(this,A);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var S in g)f.set(S,g[S]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),S=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(S0,d,void 0))||g||S||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,k]of f)this.g.setRequestHeader(A,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vE(this),this.u=!0,this.g.send(a),this.u=!1}catch(A){gE(this,A)}};function gE(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,mE(a),uu(a)}function mE(a){a.A||(a.A=!0,It(a,"complete"),It(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,It(this,"complete"),It(this,"abort"),uu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),uu(this,!0)),Ne.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?yE(this):this.bb())},n.bb=function(){yE(this)};function yE(a){if(a.h&&typeof s<"u"&&(!a.v[1]||On(a)!=4||a.Z()!=2)){if(a.u&&On(a)==4)jI(a.Ea,0,a);else if(It(a,"readystatechange"),On(a)==4){a.h=!1;try{let k=a.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=k===0){var S=String(a.D).match(aE)[1]||null;!S&&c.self&&c.self.location&&(S=c.self.location.protocol.slice(0,-1)),g=!b0.test(S?S.toLowerCase():"")}f=g}if(f)It(a,"complete"),It(a,"success");else{a.m=6;try{var A=2<On(a)?a.g.statusText:""}catch{A=""}a.l=A+" ["+a.Z()+"]",mE(a)}}finally{uu(a)}}}}function uu(a,d){if(a.g){vE(a);let f=a.g,g=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||It(a,"ready");try{f.onreadystatechange=g}catch{}}}function vE(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function On(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<On(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),r0(d)}};function _E(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function C0(a){let d={};a=(a.g&&2<=On(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if($(a[g]))continue;var f=b(a[g]);let S=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[S]||[];d[S]=A,A.push(f)}T(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ra(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function IE(a){this.Aa=0,this.i=[],this.j=new Qs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ra("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ra("baseRetryDelayMs",5e3,a),this.cb=ra("retryDelaySeedMs",1e4,a),this.Wa=ra("forwardChannelMaxRetries",2,a),this.wa=ra("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new tE(a&&a.concurrentRequestLimit),this.Da=new w0,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=IE.prototype,n.la=8,n.G=1,n.connect=function(a,d,f,g){Et(0),this.W=a,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=RE(this,null,this.W),du(this)};function wf(a){if(EE(a),a.G==3){var d=a.U++,f=kn(a.I);if(Se(f,"SID",a.K),Se(f,"RID",d),Se(f,"TYPE","terminate"),ia(a,f),d=new hr(a,a.j,d),d.L=2,d.v=au(kn(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=d.v,f=!0),f||(d.g=NE(d.j,null),d.g.ea(d.v)),d.F=Date.now(),iu(d)}AE(a)}function lu(a){a.g&&(bf(a),a.g.cancel(),a.g=null)}function EE(a){lu(a),a.u&&(c.clearTimeout(a.u),a.u=null),hu(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function du(a){if(!nE(a.h)&&!a.s){a.s=!0;var d=a.Ga;$s||MI(),Bs||($s(),Bs=!0),ef.add(d,a),a.B=0}}function D0(a,d){return rE(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Ks(m(a.Ga,a,d),DE(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let S=new hr(this,this.j,a),A=this.o;if(this.S&&(A?(A=v(A),w(A,this.S)):A=this.S),this.m!==null||this.O||(S.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=TE(this,S,d),f=kn(this.I),Se(f,"RID",a),Se(f,"CVER",22),this.D&&Se(f,"X-HTTP-Session-Id",this.D),ia(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(pE(A)))+"&"+d:this.m&&Ef(f,this.m,A)),If(this.h,S),this.Ua&&Se(f,"TYPE","init"),this.P?(Se(f,"$req",d),Se(f,"SID","null"),S.T=!0,mf(S,f,null)):mf(S,f,d),this.G=2}}else this.G==3&&(a?wE(this,a):this.i.length==0||nE(this.h)||wE(this))};function wE(a,d){var f;d?f=d.l:f=a.U++;let g=kn(a.I);Se(g,"SID",a.K),Se(g,"RID",f),Se(g,"AID",a.T),ia(a,g),a.m&&a.o&&Ef(g,a.m,a.o),f=new hr(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=TE(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),If(a.h,f),mf(f,g,d)}function ia(a,d){a.H&&ye(a.H,function(f,g){Se(d,g,f)}),a.l&&sE({},function(f,g){Se(d,g,f)})}function TE(a,d,f){f=Math.min(a.i.length,f);var g=a.l?m(a.l.Na,a.l,a):null;e:{var S=a.i;let A=-1;for(;;){let k=["count="+f];A==-1?0<f?(A=S[0].g,k.push("ofs="+A)):A=0:k.push("ofs="+A);let we=!0;for(let ot=0;ot<f;ot++){let fe=S[ot].g,dt=S[ot].map;if(fe-=A,0>fe)A=Math.max(0,S[ot].g-100),we=!1;else try{T0(dt,k,"req"+fe+"_")}catch{g&&g(dt)}}if(we){g=k.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,g}function bE(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;$s||MI(),Bs||($s(),Bs=!0),ef.add(d,a),a.v=0}}function Tf(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Ks(m(a.Fa,a),DE(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,SE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Ks(m(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),lu(this),SE(this))};function bf(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function SE(a){a.g=new hr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=kn(a.qa);Se(d,"RID","rpc"),Se(d,"SID",a.K),Se(d,"AID",a.T),Se(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Se(d,"TO",a.ja),Se(d,"TYPE","xmlhttp"),ia(a,d),a.m&&a.o&&Ef(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=au(kn(d)),f.m=null,f.P=!0,ZI(f,a)}n.Za=function(){this.C!=null&&(this.C=null,lu(this),Tf(this),Et(19))};function hu(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function CE(a,d){var f=null;if(a.g==d){hu(a),bf(a),a.g=null;var g=2}else if(_f(a.h,d))f=d.D,iE(a.h,d),g=1;else return;if(a.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var S=a.B;g=tu(),It(g,new KI(g,f)),du(a)}else bE(a);else if(S=d.s,S==3||S==0&&0<d.X||!(g==1&&D0(a,d)||g==2&&Tf(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),S){case 1:ai(a,5);break;case 4:ai(a,10);break;case 3:ai(a,6);break;default:ai(a,2)}}}function DE(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function ai(a,d){if(a.j.info("Error code "+d),d==2){var f=m(a.fb,a),g=a.Xa;let S=!g;g=new si(g||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ou(g,"https"),au(g),S?I0(g.toString(),f):E0(g.toString(),f)}else Et(2);a.G=0,a.l&&a.l.sa(d),AE(a),EE(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function AE(a){if(a.G=0,a.ka=[],a.l){let d=oE(a.h);(d.length!=0||a.i.length!=0)&&(R(a.ka,d),R(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function RE(a,d,f){var g=f instanceof si?kn(f):new si(f);if(g.g!="")d&&(g.g=d+"."+g.g),su(g,g.s);else{var S=c.location;g=S.protocol,d=d?d+"."+S.hostname:S.hostname,S=+S.port;var A=new si(null);g&&ou(A,g),d&&(A.g=d),S&&su(A,S),f&&(A.l=f),g=A}return f=a.D,d=a.ya,f&&d&&Se(g,f,d),Se(g,"VER",a.la),ia(a,g),g}function NE(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Ne(new ea({eb:f})):new Ne(a.pa),d.Ha(a.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function PE(){}n=PE.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function fu(){}fu.prototype.g=function(a,d){return new Nt(a,d)};function Nt(a,d){lt.call(this),this.g=new IE(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!$(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!$(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new co(this)}D(Nt,lt),Nt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nt.prototype.close=function(){wf(this.g)},Nt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=lf(a),a=f);d.i.push(new l0(d.Ya++,a)),d.G==3&&du(d)},Nt.prototype.N=function(){this.g.l=null,delete this.j,wf(this.g),delete this.g,Nt.aa.N.call(this)};function xE(a){hf.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}D(xE,hf);function ME(){ff.call(this),this.status=1}D(ME,ff);function co(a){this.g=a}D(co,PE),co.prototype.ua=function(){It(this.g,"a")},co.prototype.ta=function(a){It(this.g,new xE(a))},co.prototype.sa=function(a){It(this.g,new ME)},co.prototype.ra=function(){It(this.g,"b")},fu.prototype.createWebChannel=fu.prototype.g,Nt.prototype.send=Nt.prototype.o,Nt.prototype.open=Nt.prototype.m,Nt.prototype.close=Nt.prototype.close,pv=rr.createWebChannelTransport=function(){return new fu},fv=rr.getStatEventTarget=function(){return tu()},hv=rr.Event=ii,eh=rr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},nu.NO_ERROR=0,nu.TIMEOUT=8,nu.HTTP_ERROR=6,xc=rr.ErrorCode=nu,QI.COMPLETE="complete",dv=rr.EventType=QI,qI.EventType=Ws,Ws.OPEN="a",Ws.CLOSE="b",Ws.ERROR="c",Ws.MESSAGE="d",lt.prototype.listen=lt.prototype.K,fs=rr.WebChannel=qI,kU=rr.FetchXmlHttpFactory=ea,Ne.prototype.listenOnce=Ne.prototype.L,Ne.prototype.getLastError=Ne.prototype.Ka,Ne.prototype.getLastErrorCode=Ne.prototype.Ba,Ne.prototype.getStatus=Ne.prototype.Z,Ne.prototype.getResponseJson=Ne.prototype.Oa,Ne.prototype.getResponseText=Ne.prototype.oa,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Ha,lv=rr.XhrIo=Ne}).apply(typeof Xd<"u"?Xd:typeof self<"u"?self:typeof window<"u"?window:{});var pA="@firebase/firestore",gA="4.8.0";var rt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};rt.UNAUTHENTICATED=new rt(null),rt.GOOGLE_CREDENTIALS=new rt("google-credentials-uid"),rt.FIRST_PARTY=new rt("first-party-uid"),rt.MOCK_USER=new rt("mock-user");var Ls="11.10.0";var Zi=new Tn("@firebase/firestore");function ps(){return Zi.logLevel}function L(n,...e){if(Zi.logLevel<=ce.DEBUG){let t=e.map(tI);Zi.debug(`Firestore (${Ls}): ${n}`,...t)}}function sr(n,...e){if(Zi.logLevel<=ce.ERROR){let t=e.map(tI);Zi.error(`Firestore (${Ls}): ${n}`,...t)}}function Zr(n,...e){if(Zi.logLevel<=ce.WARN){let t=e.map(tI);Zi.warn(`Firestore (${Ls}): ${n}`,...t)}}function tI(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function q(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,oR(n,r,t)}function oR(n,e,t){let r=`FIRESTORE (${Ls}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw sr(r),new Error(r)}function me(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||oR(e,i,r)}function J(n,e){return n}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends jt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ir=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var ah=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},_v=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(rt.UNAUTHENTICATED))}shutdown(){}},Iv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Ev=class{constructor(e){this.t=e,this.currentUser=rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){me(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new ir;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ir,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>E(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},c=u=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ir)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string",31837,{l:r}),new ah(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string",2055,{h:e}),new rt(e)}},wv=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=rt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Tv=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new wv(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ch=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},bv=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){me(this.o===void 0,3512);let r=o=>{o.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,L("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ch(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(me(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new ch(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function OU(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function sR(){return new TextEncoder}var Vc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=OU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function oe(n,e){return n<e?-1:n>e?1:0}function Sv(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return oe(r,i);{let o=sR(),s=LU(o.encode(mA(n,t)),o.encode(mA(e,t)));return s!==0?s:oe(r,i)}}t+=r>65535?2:1}return oe(n.length,e.length)}function mA(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function LU(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return oe(n[t],e[t]);return oe(n.length,e.length)}function ws(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var yA="__name__",uh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&q(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&q(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return oe(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Sv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return nr.fromString(e.substring(4,e.length-2))}},Re=class n extends uh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},FU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Bt=class n extends uh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return FU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yA}static keyField(){return new n([yA])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new V(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new V(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new V(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new V(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var H=class n{constructor(e){this.path=e}static fromPath(e){return new n(Re.fromString(e))}static fromName(e){return new n(Re.fromString(e).popFirst(5))}static empty(){return new n(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Re.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Re(e.slice()))}};function aR(n,e,t){if(!t)throw new V(P.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function VU(n,e,t,r){if(e===!0&&r===!0)throw new V(P.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vA(n){if(!H.isDocumentKey(n))throw new V(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function _A(n){if(H.isDocumentKey(n))throw new V(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function cR(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function nI(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":q(12329,{type:typeof n})}function Gr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new V(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=nI(n);throw new V(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function He(n,e){let t={typeString:n};return e&&(t.value=e),t}function Qc(n,e){if(!cR(n))throw new V(P.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new V(P.INVALID_ARGUMENT,t);return!0}var IA=-62135596800,EA=1e6,qe=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*EA);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new V(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new V(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<IA)throw new V(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/EA}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Qc(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-IA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};qe._jsonSchemaVersion="firestore/timestamp/1.0",qe._jsonSchema={type:He("string",qe._jsonSchemaVersion),seconds:He("number"),nanoseconds:He("number")};var ee=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new qe(0,0))}static max(){return new n(new qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var jc=-1,Cv=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Cv.UNKNOWN_ID=-1;function jU(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new qe(t+1,0):new qe(t,r));return new Xi(i,H.empty(),e)}function UU(n){return new Xi(n.readTime,n.key,jc)}var Xi=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ee.min(),H.empty(),jc)}static max(){return new n(ee.max(),H.empty(),jc)}};function $U(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=H.comparator(n.documentKey,e.documentKey),t!==0?t:oe(n.largestBatchId,e.largestBatchId))}var BU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Dv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Fs(n){return E(this,null,function*(){if(n.code!==P.FAILED_PRECONDITION||n.message!==BU)throw n;L("LocalStore","Unexpectedly lost primary lease")})}var x=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++c,c===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function HU(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Vs(n){return n.name==="IndexedDbTransactionError"}var rI=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),iI=-1;function Uh(n){return n==null}function Uc(n){return n===0&&1/n==-1/0}function qU(n){return typeof n=="number"&&Number.isInteger(n)&&!Uc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var uR="";function zU(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=wA(e)),e=WU(n.get(t),e);return wA(e)}function WU(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case uR:t+="";break;default:t+=o}}return t}function wA(n){return n+uR+""}var GU="remoteDocuments",lR="owner";var dR="mutationQueues";var hR="mutations";var fR="documentMutations",KU="remoteDocumentsV14";var pR="remoteDocumentGlobal";var gR="targets";var mR="targetDocuments";var yR="targetGlobal",vR="collectionParents";var _R="clientMetadata";var IR="bundles";var ER="namedQueries";var QU="indexConfiguration";var YU="indexState";var JU="indexEntries";var wR="documentOverlays";var ZU="globals";var XU=[dR,hR,fR,GU,gR,lR,yR,mR,_R,pR,vR,IR,ER],Pee=[...XU,wR],e2=[dR,hR,fR,KU,gR,lR,yR,mR,_R,pR,vR,IR,ER,wR],t2=e2,n2=[...t2,QU,YU,JU];var xee=[...n2,ZU];function TA(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ri(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function TR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Oe=class n{constructor(e,t){this.comparator=e,this.root=t||Cn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Cn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vs(this.root,e,this.comparator,!1)}getReverseIterator(){return new vs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vs(this.root,e,this.comparator,!0)}},vs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Cn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw q(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw q(27949);return e+(this.isRed()?0:1)}};Cn.EMPTY=null,Cn.RED=!0,Cn.BLACK=!1;Cn.EMPTY=new class{constructor(){this.size=0}get key(){throw q(57766)}get value(){throw q(16141)}get color(){throw q(16727)}get left(){throw q(29726)}get right(){throw q(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Cn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var it=class n{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lh(this.data.getIterator())}getIteratorFrom(e){return new lh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},lh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var en=class n{constructor(e){this.fields=e,e.sort(Bt.comparator)}static empty(){return new n([])}unionWith(e){let t=new it(Bt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ws(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var dh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var vt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new dh("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};vt.EMPTY_BYTE_STRING=new vt("");var r2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(n){if(me(!!n,39018),typeof n=="string"){let e=0,t=r2.exec(n);if(me(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(n.seconds),nanos:De(n.nanos)}}function De(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function cr(n){return typeof n=="string"?vt.fromBase64String(n):vt.fromUint8Array(n)}var bR="server_timestamp",SR="__type__",CR="__previous_value__",DR="__local_write_time__";function oI(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[SR])===null||t===void 0?void 0:t.stringValue)===bR}function $h(n){let e=n.mapValue.fields[CR];return oI(e)?$h(e):e}function $c(n){let e=ar(n.mapValue.fields[DR].timestampValue);return new qe(e.seconds,e.nanos)}var Av=class{constructor(e,t,r,i,o,s,c,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},hh="(default)",fh=class n{constructor(e,t){this.projectId=e,this.database=t||hh}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===hh}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var sI="__type__",AR="__max__",th={mapValue:{fields:{__type__:{stringValue:AR}}}},aI="__vector__",Ts="value";function Xr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?oI(n)?4:NR(n)?9007199254740991:RR(n)?10:11:q(28295,{value:n})}function Rn(n,e){if(n===e)return!0;let t=Xr(n);if(t!==Xr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $c(n).isEqual($c(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=ar(i.timestampValue),c=ar(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return cr(i.bytesValue).isEqual(cr(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return De(i.geoPointValue.latitude)===De(o.geoPointValue.latitude)&&De(i.geoPointValue.longitude)===De(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return De(i.integerValue)===De(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=De(i.doubleValue),c=De(o.doubleValue);return s===c?Uc(s)===Uc(c):isNaN(s)&&isNaN(c)}return!1})(n,e);case 9:return ws(n.arrayValue.values||[],e.arrayValue.values||[],Rn);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(TA(s)!==TA(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!Rn(s[u],c[u])))return!1;return!0})(n,e);default:return q(52216,{left:n})}}function Bc(n,e){return(n.values||[]).find(t=>Rn(t,e))!==void 0}function bs(n,e){if(n===e)return 0;let t=Xr(n),r=Xr(e);if(t!==r)return oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return oe(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let c=De(o.integerValue||o.doubleValue),u=De(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(n,e);case 3:return bA(n.timestampValue,e.timestampValue);case 4:return bA($c(n),$c(e));case 5:return Sv(n.stringValue,e.stringValue);case 6:return(function(o,s){let c=cr(o),u=cr(s);return c.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let c=o.split("/"),u=s.split("/");for(let l=0;l<c.length&&l<u.length;l++){let h=oe(c[l],u[l]);if(h!==0)return h}return oe(c.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let c=oe(De(o.latitude),De(s.latitude));return c!==0?c:oe(De(o.longitude),De(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return SA(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var c,u,l,h;let p=o.fields||{},m=s.fields||{},y=(c=p[Ts])===null||c===void 0?void 0:c.arrayValue,D=(u=m[Ts])===null||u===void 0?void 0:u.arrayValue,N=oe(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=D?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:SA(y,D)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===th.mapValue&&s===th.mapValue)return 0;if(o===th.mapValue)return 1;if(s===th.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=Sv(u[p],h[p]);if(m!==0)return m;let y=bs(c[u[p]],l[h[p]]);if(y!==0)return y}return oe(u.length,h.length)})(n.mapValue,e.mapValue);default:throw q(23264,{le:t})}}function bA(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return oe(n,e);let t=ar(n),r=ar(e),i=oe(t.seconds,r.seconds);return i!==0?i:oe(t.nanos,r.nanos)}function SA(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=bs(t[i],r[i]);if(o)return o}return oe(t.length,r.length)}function Ss(n){return Rv(n)}function Rv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=ar(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return cr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return H.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Rv(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Rv(t.fields[s])}`;return i+"}"})(n.mapValue):q(61005,{value:n})}function ih(n){switch(Xr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=$h(n);return e?16+ih(e):16;case 5:return 2*n.stringValue.length;case 6:return cr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+ih(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return ri(r.fields,(o,s)=>{i+=o.length+ih(s)}),i})(n.mapValue);default:throw q(13486,{value:n})}}function Nv(n){return!!n&&"integerValue"in n}function cI(n){return!!n&&"arrayValue"in n}function CA(n){return!!n&&"nullValue"in n}function DA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function oh(n){return!!n&&"mapValue"in n}function RR(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[sI])===null||t===void 0?void 0:t.stringValue)===aI}function kc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ri(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=kc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=kc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function NR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===AR}var kee={mapValue:{fields:{[sI]:{stringValue:aI},[Ts]:{arrayValue:{}}}}};var $t=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!oh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kc(t)}setAll(e){let t=Bt.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!t.isImmediateParentOf(c)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}s?r[c.lastSegment()]=kc(s):i.push(c.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());oh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Rn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];oh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ri(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(kc(this.value))}};function PR(n){let e=[];return ri(n.fields,(t,r)=>{let i=new Bt([t]);if(oh(r)){let o=PR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new en(e)}var pn=class n{constructor(e,t,r,i,o,s,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new n(e,0,ee.min(),ee.min(),ee.min(),$t.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ee.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ee.min(),ee.min(),$t.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ee.min(),ee.min(),$t.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Cs=class{constructor(e,t){this.position=e,this.inclusive=t}};function AA(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=H.comparator(H.fromName(s.referenceValue),t.key):r=bs(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function RA(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Rn(n.position[t],e.position[t]))return!1;return!0}var Ds=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function i2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var ph=class{},Ye=class n extends ph{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new xv(e,t,r):t==="array-contains"?new Ov(e,r):t==="in"?new Lv(e,r):t==="not-in"?new Fv(e,r):t==="array-contains-any"?new Vv(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Mv(e,r):new kv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(bs(t,this.value)):t!==null&&Xr(this.value)===Xr(t)&&this.matchesComparison(bs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Nn=class n extends ph{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return xR(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function xR(n){return n.op==="and"}function MR(n){return o2(n)&&xR(n)}function o2(n){for(let e of n.filters)if(e instanceof Nn)return!1;return!0}function Pv(n){if(n instanceof Ye)return n.field.canonicalString()+n.op.toString()+Ss(n.value);if(MR(n))return n.filters.map(e=>Pv(e)).join(",");{let e=n.filters.map(t=>Pv(t)).join(",");return`${n.op}(${e})`}}function kR(n,e){return n instanceof Ye?(function(r,i){return i instanceof Ye&&r.op===i.op&&r.field.isEqual(i.field)&&Rn(r.value,i.value)})(n,e):n instanceof Nn?(function(r,i){return i instanceof Nn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&kR(s,i.filters[c]),!0):!1})(n,e):void q(19439)}function OR(n){return n instanceof Ye?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ss(t.value)}`})(n):n instanceof Nn?(function(t){return t.op.toString()+" {"+t.getFilters().map(OR).join(" ,")+"}"})(n):"Filter"}var xv=class extends Ye{constructor(e,t,r){super(e,t,r),this.key=H.fromName(r.referenceValue)}matches(e){let t=H.comparator(e.key,this.key);return this.matchesComparison(t)}},Mv=class extends Ye{constructor(e,t){super(e,"in",t),this.keys=LR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},kv=class extends Ye{constructor(e,t){super(e,"not-in",t),this.keys=LR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function LR(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>H.fromName(r.referenceValue))}var Ov=class extends Ye{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return cI(t)&&Bc(t.arrayValue,this.value)}},Lv=class extends Ye{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Bc(this.value.arrayValue,t)}},Fv=class extends Ye{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Bc(this.value.arrayValue,t)}},Vv=class extends Ye{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!cI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Bc(this.value.arrayValue,r))}};var jv=class{constructor(e,t=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Pe=null}};function NA(n,e=null,t=[],r=[],i=null,o=null,s=null){return new jv(n,e,t,r,i,o,s)}function uI(n){let e=J(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Pv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Uh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ss(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ss(r)).join(",")),e.Pe=t}return e.Pe}function lI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!i2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!kR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!RA(n.startAt,e.startAt)&&RA(n.endAt,e.endAt)}function Uv(n){return H.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var As=class{constructor(e,t=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function s2(n,e,t,r,i,o,s,c){return new As(n,e,t,r,i,o,s,c)}function dI(n){return new As(n)}function PA(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function a2(n){return n.collectionGroup!==null}function Oc(n){let e=J(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new it(Bt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Ds(o,r))}),t.has(Bt.keyField().canonicalString())||e.Te.push(new Ds(Bt.keyField(),r))}return e.Te}function Dn(n){let e=J(n);return e.Ie||(e.Ie=c2(e,Oc(n))),e.Ie}function c2(n,e){if(n.limitType==="F")return NA(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ds(i.field,o)});let t=n.endAt?new Cs(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Cs(n.startAt.position,n.startAt.inclusive):null;return NA(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function $v(n,e,t){return new As(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Bh(n,e){return lI(Dn(n),Dn(e))&&n.limitType===e.limitType}function FR(n){return`${uI(Dn(n))}|lt:${n.limitType}`}function gs(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>OR(i)).join(", ")}]`),Uh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ss(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ss(i)).join(",")),`Target(${r})`})(Dn(n))}; limitType=${n.limitType})`}function Hh(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):H.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Oc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,c,u){let l=AA(s,c,u);return s.inclusive?l<=0:l<0})(r.startAt,Oc(r),i)||r.endAt&&!(function(s,c,u){let l=AA(s,c,u);return s.inclusive?l>=0:l>0})(r.endAt,Oc(r),i))})(n,e)}function u2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function VR(n){return(e,t)=>{let r=!1;for(let i of Oc(n)){let o=l2(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function l2(n,e,t){let r=n.field.isKeyField()?H.comparator(e.key,t.key):(function(o,s,c){let u=s.data.field(o),l=c.data.field(o);return u!==null&&l!==null?bs(u,l):q(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return q(19790,{direction:n.dir})}}var ur=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ri(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return TR(this.inner)}size(){return this.innerSize}};var d2=new Oe(H.comparator);function lr(){return d2}var jR=new Oe(H.comparator);function Mc(...n){let e=jR;for(let t of n)e=e.insert(t.key,t);return e}function UR(n){let e=jR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ki(){return Lc()}function $R(){return Lc()}function Lc(){return new ur(n=>n.toString(),(n,e)=>n.isEqual(e))}var h2=new Oe(H.comparator),f2=new it(H.comparator);function ue(...n){let e=f2;for(let t of n)e=e.add(t);return e}var p2=new it(oe);function g2(){return p2}function hI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uc(e)?"-0":e}}function BR(n){return{integerValue:""+n}}function m2(n,e){return qU(e)?BR(e):hI(n,e)}var Rs=class{constructor(){this._=void 0}};function y2(n,e,t){return n instanceof Ns?(function(i,o){let s={fields:{[SR]:{stringValue:bR},[DR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&oI(o)&&(o=$h(o)),o&&(s.fields[CR]=o),{mapValue:s}})(t,e):n instanceof eo?qR(n,e):n instanceof to?zR(n,e):(function(i,o){let s=HR(i,o),c=xA(s)+xA(i.Ee);return Nv(s)&&Nv(i.Ee)?BR(c):hI(i.serializer,c)})(n,e)}function v2(n,e,t){return n instanceof eo?qR(n,e):n instanceof to?zR(n,e):t}function HR(n,e){return n instanceof Ps?(function(r){return Nv(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Ns=class extends Rs{},eo=class extends Rs{constructor(e){super(),this.elements=e}};function qR(n,e){let t=WR(e);for(let r of n.elements)t.some(i=>Rn(i,r))||t.push(r);return{arrayValue:{values:t}}}var to=class extends Rs{constructor(e){super(),this.elements=e}};function zR(n,e){let t=WR(e);for(let r of n.elements)t=t.filter(i=>!Rn(i,r));return{arrayValue:{values:t}}}var Ps=class extends Rs{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function xA(n){return De(n.integerValue||n.doubleValue)}function WR(n){return cI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function _2(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof eo&&i instanceof eo||r instanceof to&&i instanceof to?ws(r.elements,i.elements,Rn):r instanceof Ps&&i instanceof Ps?Rn(r.Ee,i.Ee):r instanceof Ns&&i instanceof Ns})(n.transform,e.transform)}var Bv=class{constructor(e,t){this.version=e,this.transformResults=t}},or=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function sh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var xs=class{};function GR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Hc(n.key,or.none()):new no(n.key,n.data,or.none());{let t=n.data,r=$t.empty(),i=new it(Bt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Pn(n.key,r,new en(i.toArray()),or.none())}}function I2(n,e,t){n instanceof no?(function(i,o,s){let c=i.value.clone(),u=kA(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):n instanceof Pn?(function(i,o,s){if(!sh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=kA(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(KR(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Fc(n,e,t,r){return n instanceof no?(function(o,s,c,u){if(!sh(o.precondition,s))return c;let l=o.value.clone(),h=OA(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof Pn?(function(o,s,c,u){if(!sh(o.precondition,s))return c;let l=OA(o.fieldTransforms,u,s),h=s.data;return h.setAll(KR(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,c){return sh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(n,e,t)}function E2(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=HR(r.transform,i||null);o!=null&&(t===null&&(t=$t.empty()),t.set(r.field,o))}return t||null}function MA(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ws(r,i,(o,s)=>_2(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var no=class extends xs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Pn=class extends xs{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function KR(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function kA(n,e,t){let r=new Map;me(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,v2(s,c,t[i]))}return r}function OA(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,y2(o,s,e))}return r}var Hc=class extends xs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Hv=class extends xs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var qv=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&I2(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Fc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=$R();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=t.has(i.key)?null:c;let u=GR(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ue())}isEqual(e){return this.batchId===e.batchId&&ws(this.mutations,e.mutations,(t,r)=>MA(t,r))&&ws(this.baseMutations,e.baseMutations,(t,r)=>MA(t,r))}},zv=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){me(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return h2})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Wv=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Gv=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var $e,he;function w2(n){switch(n){case P.OK:return q(64938);case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0;default:return q(15467,{code:n})}}function QR(n){if(n===void 0)return sr("GRPC error has no .code"),P.UNKNOWN;switch(n){case $e.OK:return P.OK;case $e.CANCELLED:return P.CANCELLED;case $e.UNKNOWN:return P.UNKNOWN;case $e.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case $e.INTERNAL:return P.INTERNAL;case $e.UNAVAILABLE:return P.UNAVAILABLE;case $e.UNAUTHENTICATED:return P.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case $e.NOT_FOUND:return P.NOT_FOUND;case $e.ALREADY_EXISTS:return P.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return P.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case $e.ABORTED:return P.ABORTED;case $e.OUT_OF_RANGE:return P.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return P.UNIMPLEMENTED;case $e.DATA_LOSS:return P.DATA_LOSS;default:return q(39323,{code:n})}}(he=$e||($e={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";var LA=null;var T2=new nr([4294967295,4294967295],0);function FA(n){let e=sR().encode(n),t=new uv;return t.update(e),new Uint8Array(t.digest())}function VA(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new nr([t,r],0),new nr([i,o],0)]}var Kv=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Qi(`Invalid padding: ${t}`);if(r<0)throw new Qi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Qi(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=nr.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(nr.fromNumber(r)));return i.compare(T2)===1&&(i=new nr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=FA(e),[r,i]=VA(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.fe===0)return;let t=FA(e),[r,i]=VA(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Qi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var gh=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,qc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ee.min(),i,new Oe(oe),lr(),ue())}},qc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ue(),ue(),ue())}};var _s=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},mh=class{constructor(e,t){this.targetId=e,this.De=t}},yh=class{constructor(e,t,r=vt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},vh=class{constructor(){this.ve=0,this.Ce=jA(),this.Fe=vt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ue(),t=ue(),r=ue();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:q(38017,{changeType:o})}}),new qc(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=jA()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,me(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},Qv=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=lr(),this.je=nh(),this.Je=nh(),this.He=new Oe(oe)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:q(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(Uv(o))if(r===0){let s=new H(o.path);this.Xe(t,s,pn.newNoDocument(s,ee.min()))}else me(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let c=this._t(e),u=c?this.ut(c,e,s):1;if(u!==0){this.rt(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}LA?.ct((function(h,p,m,y,D){var N,R,O,$,G,Ee;let _t={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},ye=p.unchangedNames;return ye&&(_t.bloomFilter={applied:D===0,hashCount:(N=ye?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:($=(O=(R=ye?.bits)===null||R===void 0?void 0:R.bitmap)===null||O===void 0?void 0:O.length)!==null&&$!==void 0?$:0,padding:(Ee=(G=ye?.bits)===null||G===void 0?void 0:G.padding)!==null&&Ee!==void 0?Ee:0,mightContain:T=>{var v;return(v=y?.mightContain(T))!==null&&v!==void 0&&v}}),_t})(s,e.De,this.We.lt(),c,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,c;try{s=cr(r).toUint8Array()}catch(u){if(u instanceof dh)return Zr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Kv(s,i,o)}catch(u){return Zr(u instanceof Qi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.fe===0?null:c}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let c=this.st(s);if(c){if(o.current&&Uv(c.target)){let u=new H(c.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,pn.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=ue();this.Je.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new gh(e,t,this.He,this.ze,r);return this.ze=lr(),this.je=nh(),this.Je=nh(),this.He=new Oe(oe),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new vh,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new it(oe),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new it(oe),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||L("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new vh),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function nh(){return new Oe(H.comparator)}function jA(){return new Oe(H.comparator)}var b2={asc:"ASCENDING",desc:"DESCENDING"},S2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},C2={and:"AND",or:"OR"},Yv=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Jv(n,e){return n.useProto3Json||Uh(e)?e:{value:e}}function _h(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function D2(n,e){return _h(n,e.toTimestamp())}function An(n){return me(!!n,49232),ee.fromTimestamp((function(t){let r=ar(t);return new qe(r.seconds,r.nanos)})(n))}function fI(n,e){return Zv(n,e).canonicalString()}function Zv(n,e){let t=(function(i){return new Re(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function JR(n){let e=Re.fromString(n);return me(nN(e),10190,{key:e.toString()}),e}function Xv(n,e){return fI(n.databaseId,e.path)}function gv(n,e){let t=JR(e);if(t.get(1)!==n.databaseId.projectId)throw new V(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new V(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new H(XR(t))}function ZR(n,e){return fI(n.databaseId,e)}function A2(n){let e=JR(n);return e.length===4?Re.emptyPath():XR(e)}function e_(n){return new Re(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function XR(n){return me(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function UA(n,e,t){return{name:Xv(n,e),fields:t.value.mapValue.fields}}function R2(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:q(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(me(h===void 0||typeof h=="string",58123),vt.fromBase64String(h||"")):(me(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),vt.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(l){let h=l.code===void 0?P.UNKNOWN:QR(l.code);return new V(h,l.message||"")})(s);t=new yh(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=gv(n,r.document.name),o=An(r.document.updateTime),s=r.document.createTime?An(r.document.createTime):ee.min(),c=new $t({mapValue:{fields:r.document.fields}}),u=pn.newFoundDocument(i,o,s,c),l=r.targetIds||[],h=r.removedTargetIds||[];t=new _s(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=gv(n,r.document),o=r.readTime?An(r.readTime):ee.min(),s=pn.newNoDocument(i,o),c=r.removedTargetIds||[];t=new _s([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=gv(n,r.document),o=r.removedTargetIds||[];t=new _s([],o,i,null)}else{if(!("filter"in e))return q(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Gv(i,o),c=r.targetId;t=new mh(c,s)}}return t}function N2(n,e){let t;if(e instanceof no)t={update:UA(n,e.key,e.value)};else if(e instanceof Hc)t={delete:Xv(n,e.key)};else if(e instanceof Pn)t={update:UA(n,e.key,e.data),updateMask:j2(e.fieldMask)};else{if(!(e instanceof Hv))return q(16599,{Rt:e.type});t={verify:Xv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let c=s.transform;if(c instanceof Ns)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof eo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof to)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ps)return{fieldPath:s.field.canonicalString(),increment:c.Ee};throw q(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:D2(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:q(27497)})(n,e.precondition)),t}function P2(n,e){return n&&n.length>0?(me(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?An(i.updateTime):An(o);return s.isEqual(ee.min())&&(s=An(o)),new Bv(s,i.transformResults||[])})(t,e))):[]}function x2(n,e){return{documents:[ZR(n,e.path)]}}function M2(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=ZR(n,i);let o=(function(l){if(l.length!==0)return tN(Nn.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:ms(m.field),direction:L2(m.dir)}})(h))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let c=Jv(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function k2(n){let e=A2(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){me(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=(function(p){let m=eN(p);return m instanceof Nn&&MR(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(m=>(function(D){return new Ds(ys(D.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(m))})(t.orderBy));let c=null;t.limit&&(c=(function(p){let m;return m=typeof p=="object"?p.value:p,Uh(m)?null:m})(t.limit));let u=null;t.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new Cs(y,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new Cs(y,m)})(t.endAt)),s2(e,i,s,o,c,"F",u,l)}function O2(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function eN(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ys(t.unaryFilter.field);return Ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ys(t.unaryFilter.field);return Ye.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ys(t.unaryFilter.field);return Ye.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ys(t.unaryFilter.field);return Ye.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return q(61313);default:return q(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ye.create(ys(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return q(58110);default:return q(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Nn.create(t.compositeFilter.filters.map(r=>eN(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q(1026)}})(t.compositeFilter.op))})(n):q(30097,{filter:n})}function L2(n){return b2[n]}function F2(n){return S2[n]}function V2(n){return C2[n]}function ms(n){return{fieldPath:n.canonicalString()}}function ys(n){return Bt.fromServerFormat(n.fieldPath)}function tN(n){return n instanceof Ye?(function(t){if(t.op==="=="){if(DA(t.value))return{unaryFilter:{field:ms(t.field),op:"IS_NAN"}};if(CA(t.value))return{unaryFilter:{field:ms(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(DA(t.value))return{unaryFilter:{field:ms(t.field),op:"IS_NOT_NAN"}};if(CA(t.value))return{unaryFilter:{field:ms(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ms(t.field),op:F2(t.op),value:t.value}}})(n):n instanceof Nn?(function(t){let r=t.getFilters().map(i=>tN(i));return r.length===1?r[0]:{compositeFilter:{op:V2(t.op),filters:r}}})(n):q(54877,{filter:n})}function j2(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function nN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var zc=class n{constructor(e,t,r,i,o=ee.min(),s=ee.min(),c=vt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var t_=class{constructor(e){this.gt=e}};function U2(n){let e=k2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?$v(e,e.limit,"L"):e}var Ih=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(De(e.integerValue));else if("doubleValue"in e){let r=De(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Uc(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=ar(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(cr(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?NR(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):RR(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):q(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=Ts,c=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(De(c)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),H.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Ih.Ut=new Ih;var n_=class{constructor(){this.Dn=new r_}addToCollectionParentIndex(e,t){return this.Dn.add(t),x.resolve()}getCollectionParents(e,t){return x.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return x.resolve()}deleteFieldIndex(e,t){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,t){return x.resolve()}getDocumentsMatchingTarget(e,t){return x.resolve(null)}getIndexType(e,t){return x.resolve(0)}getFieldIndexes(e,t){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,t){return x.resolve(Xi.min())}getMinOffsetFromCollectionGroup(e,t){return x.resolve(Xi.min())}updateCollectionGroup(e,t,r){return x.resolve()}updateIndexEntries(e,t){return x.resolve()}},r_=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new it(Re.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new it(Re.comparator)).toArray()}};var Oee=new Uint8Array(0);var $A={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rN=41943040,Xt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Xt.DEFAULT_COLLECTION_PERCENTILE=10,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xt.DEFAULT=new Xt(rN,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xt.DISABLED=new Xt(-1,0,0);var Wc=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var BA="LruGarbageCollector",$2=1048576;function HA([n,e],[t,r]){let i=oe(n,t);return i===0?oe(e,r):i}var i_=class{constructor(e){this.Tr=e,this.buffer=new it(HA),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();HA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},o_=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){L(BA,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>E(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Vs(t)?L(BA,"Ignoring IndexedDB error during garbage collection: ",t):yield Fs(t)}yield this.Rr(3e5)}))}},s_=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return x.resolve(rI.ue);let r=new i_(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(L("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve($A)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(L("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$A):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,c,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(L("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ps()<=ce.DEBUG&&L("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function B2(n,e){return new s_(n,e)}var a_=class{constructor(){this.changes=new ur(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?x.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var c_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var u_=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Fc(r.mutation,i,en.empty(),qe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ue()){let i=Ki();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Mc();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Ki();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ue()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{t.set(s,c)})})}computeViews(e,t,r,i){let o=lr(),s=Lc(),c=(function(){return Lc()})();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Pn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Fc(h.mutation,l,h.mutation.getFieldMask(),qe.now())):s.set(l.key,en.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return c.set(l,new c_(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,t){let r=Lc(),i=new Oe((s,c)=>s-c),o=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let c of s)c.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||en.empty();h=c.applyToLocalView(l,h),r.set(u,h);let p=(i.get(c.batchId)||ue()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,h=u.value,p=$R();h.forEach(m=>{if(!o.has(m)){let y=GR(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return H.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):a2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):x.resolve(Ki()),c=jc,u=o;return s.next(l=>x.forEach(l,(h,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ue())).next(h=>({batchId:c,changes:UR(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new H(t)).next(r=>{let i=Mc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Mc();return this.indexManager.getCollectionParents(e,o).next(c=>x.forEach(c,u=>{let l=(function(p,m){return new As(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,pn.newInvalidDocument(h)))});let c=Mc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Fc(h.mutation,l,en.empty(),qe.now()),Hh(t,l)&&(c=c.insert(u,l))}),c})}};var l_=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return x.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:An(i.createTime)}})(t)),x.resolve()}getNamedQuery(e,t){return x.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:U2(i.bundledQuery),readTime:An(i.readTime)}})(t)),x.resolve()}};var d_=class{constructor(){this.overlays=new Oe(H.comparator),this.kr=new Map}getOverlay(e,t){return x.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ki();return x.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),x.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),x.resolve()}getOverlaysForCollection(e,t,r){let i=Ki(),o=t.length+1,s=new H(t.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Oe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Ki(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let c=Ki(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>c.set(l,h)),!(c.size()>=i)););return x.resolve(c)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Wv(t,r));let o=this.kr.get(t);o===void 0&&(o=ue(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var h_=class{constructor(){this.sessionToken=vt.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,x.resolve()}};var Gc=class{constructor(){this.qr=new it(Be.Qr),this.$r=new it(Be.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Be(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Be(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new H(new Re([])),r=new Be(t,e),i=new Be(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new H(new Re([])),r=new Be(t,e),i=new Be(t,e+1),o=ue();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Be(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Be=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return H.comparator(e.key,t.key)||oe(e.Hr,t.Hr)}static Ur(e,t){return oe(e.Hr,t.Hr)||H.comparator(e.key,t.key)}};var f_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new it(Be.Qr)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new qv(o,t,r,i);this.mutationQueue.push(s);for(let c of i)this.Yr=this.Yr.add(new Be(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,t){return x.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?iI:this.er-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Be(t,0),i=new Be(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let c=this.Zr(s.Hr);o.push(c)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new it(oe);return t.forEach(i=>{let o=new Be(i,0),s=new Be(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],c=>{r=r.add(c.Hr)})}),x.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;H.isDocumentKey(o)||(o=o.child(""));let s=new Be(new H(o),0),c=new it(oe);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.Hr)),!0)},s),x.resolve(this.ei(c))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){me(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return x.forEach(t.mutations,i=>{let o=new Be(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Be(t,0),i=this.Yr.firstAfterOrEqual(r);return x.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var p_=class{constructor(e){this.ni=e,this.docs=(function(){return new Oe(H.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return x.resolve(r?r.document.mutableCopy():pn.newInvalidDocument(t))}getEntries(e,t){let r=lr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():pn.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=lr(),s=t.path,c=new H(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||$U(UU(h),r)<=0||(i.has(h.key)||Hh(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,t,r,i){q(9500)}ri(e,t){return x.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new g_(this)}getSize(e){return x.resolve(this.size)}},g_=class extends a_{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),x.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var m_=class{constructor(e){this.persistence=e,this.ii=new ur(t=>uI(t),lI),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.si=0,this.oi=new Gc,this.targetCount=0,this._i=Wc.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),x.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Wc(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,x.resolve()}updateTargetData(e,t){return this.hr(t),x.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return x.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),x.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),x.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return x.resolve(r)}containsKey(e,t){return x.resolve(this.oi.containsKey(t))}};var Eh=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new rI(0),this.ci=!1,this.ci=!0,this.li=new h_,this.referenceDelegate=e(this),this.hi=new m_(this),this.indexManager=new n_,this.remoteDocumentCache=(function(i){return new p_(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new t_(t),this.Ti=new l_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new d_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new f_(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){L("MemoryPersistence","Starting transaction:",e);let i=new y_(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return x.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},y_=class extends Dv{constructor(e){super(),this.currentSequenceNumber=e}},v_=class n{constructor(e){this.persistence=e,this.Ai=new Gc,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw q(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),x.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),x.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.mi,r=>{let i=H.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,ee.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return x.or([()=>x.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},wh=class n{constructor(e,t){this.persistence=e,this.gi=new ur(r=>zU(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=B2(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return x.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return x.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?x.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(c=>{c||(r++,o.removeEntry(s,ee.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),x.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),x.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ih(e.data.value)),t}Sr(e,t,r){return x.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return x.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var __=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=ue(),i=ue();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var I_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var E_=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return HC()?8:HU(tt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new I_;return this.ws(e,t,s).next(c=>{if(o.result=c,this.Rs)return this.Ss(e,t,s,c.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(ps()<=ce.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",gs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),x.resolve()):(ps()<=ce.DEBUG&&L("QueryEngine","Query:",gs(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(ps()<=ce.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",gs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dn(t))):x.resolve())}ps(e,t){if(PA(t))return x.resolve(null);let r=Dn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=$v(t,null,"F"),r=Dn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ue(...o);return this.gs.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(t,c);return this.Ds(t,l,s,u.readTime)?this.ps(e,$v(t,null,"F")):this.vs(e,l,t,u)}))})))}ys(e,t,r,i){return PA(t)||i.isEqual(ee.min())?x.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?x.resolve(null):(ps()<=ce.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),gs(t)),this.vs(e,s,t,jU(i,jc)).next(c=>c))})}bs(e,t){let r=new it(VR(e));return t.forEach((i,o)=>{Hh(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return ps()<=ce.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",gs(t)),this.gs.getDocumentsMatchingQuery(e,t,Xi.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var pI="LocalStore",H2=3e8,w_=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Oe(oe),this.Ms=new ur(o=>uI(o),lI),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new u_(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function q2(n,e,t,r){return new w_(n,e,t,r)}function iN(n,e){return E(this,null,function*(){let t=J(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=ue();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){c.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:c}))})})})}function z2(n,e){let t=J(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(c,u,l,h){let p=l.batch,m=p.keys(),y=x.resolve();return m.forEach(D=>{y=y.next(()=>h.getEntry(u,D)).next(N=>{let R=l.docVersions.get(D);me(R!==null,48541),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=ue();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function oN(n){let e=J(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function W2(n,e){let t=J(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let c=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;c.push(t.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(vt.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(N,R,O){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=H2?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(m,y,h)&&c.push(t.hi.updateTargetData(o,y))});let u=lr(),l=ue();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),c.push(G2(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(ee.min())){let h=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(h)}return x.waitFor(c).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Fs=i,o))}function G2(n,e,t){let r=ue(),i=ue();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=lr();return t.forEach((c,u)=>{let l=o.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):L(pI,"Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function K2(n,e){let t=J(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=iI),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Q2(n,e){let t=J(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new zc(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function T_(n,e,t){return E(this,null,function*(){let r=J(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Vs(s))throw s;L(pI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function qA(n,e,t){let r=J(n),i=ee.min(),o=ue();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=J(u),m=p.Ms.get(h);return m!==void 0?x.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)})(r,s,Dn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:ee.min(),t?o:ue())).next(c=>(Y2(r,u2(e),c),{documents:c,qs:o})))}function Y2(n,e,t){let r=n.xs.get(e)||ee.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var Th=class{constructor(){this.activeTargetIds=g2()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var b_=class{constructor(){this.Fo=new Th,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Th,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var S_=class{xo(e){}shutdown(){}};var zA="ConnectivityMonitor",bh=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){L(zA,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){L(zA,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var rh=null;function C_(){return rh===null?rh=(function(){return 268435456+Math.round(2147483648*Math.random())})():rh++,"0x"+rh.toString(16)}var mv="RestConnection",J2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},D_=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===hh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=C_(),c=this.Go(e,t.toUriEncodedString());L(mv,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(c),h=Fr(l);return this.jo(e,c,u,r,h).then(p=>(L(mv,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Zr(mv,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ls})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=J2[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var A_=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var mt="WebChannelConnection",R_=class extends D_{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=C_();return new Promise((c,u)=>{let l=new lv;l.setWithCredentials(!0),l.listenOnce(dv.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case xc.NO_ERROR:let p=l.getResponseJson();L(mt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case xc.TIMEOUT:L(mt,`RPC '${e}' ${s} timed out`),u(new V(P.DEADLINE_EXCEEDED,"Request time out"));break;case xc.HTTP_ERROR:let m=l.getStatus();if(L(mt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let D=y?.error;if(D&&D.status&&D.message){let N=(function(O){let $=O.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf($)>=0?$:P.UNKNOWN})(D.status);u(new V(N,D.message))}else u(new V(P.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new V(P.UNAVAILABLE,"Connection failed."));break;default:q(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{L(mt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);L(mt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}P_(e,t,r){let i=C_(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=pv(),c=fv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");L(mt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let m=!1,y=!1,D=new A_({Ho:R=>{y?L(mt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(L(mt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),L(mt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),N=(R,O,$)=>{R.listen(O,G=>{try{$(G)}catch(Ee){setTimeout(()=>{throw Ee},0)}})};return N(p,fs.EventType.OPEN,()=>{y||(L(mt,`RPC '${e}' stream ${i} transport opened.`),D.s_())}),N(p,fs.EventType.CLOSE,()=>{y||(y=!0,L(mt,`RPC '${e}' stream ${i} transport closed`),D.__(),this.I_(p))}),N(p,fs.EventType.ERROR,R=>{y||(y=!0,Zr(mt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),D.__(new V(P.UNAVAILABLE,"The operation could not be completed")))}),N(p,fs.EventType.MESSAGE,R=>{var O;if(!y){let $=R.data[0];me(!!$,16349);let G=$,Ee=G?.error||((O=G[0])===null||O===void 0?void 0:O.error);if(Ee){L(mt,`RPC '${e}' stream ${i} received error:`,Ee);let _t=Ee.status,ye=(function(I){let w=$e[I];if(w!==void 0)return QR(w)})(_t),T=Ee.message;ye===void 0&&(ye=P.INTERNAL,T="Unknown error status: "+_t+" with message "+Ee.message),y=!0,D.__(new V(ye,T)),p.close()}else L(mt,`RPC '${e}' stream ${i} received:`,$),D.a_($)}}),N(c,hv.STAT_EVENT,R=>{R.stat===eh.PROXY?L(mt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===eh.NOPROXY&&L(mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.o_()},0),D}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function yv(){return typeof document<"u"?document:null}function qh(n){return new Yv(n,!0)}var Sh=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&L("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var WA="PersistentStream",Ch=class{constructor(e,t,r,i,o,s,c,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Sh(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return E(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return E(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return E(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===P.RESOURCE_EXHAUSTED?(sr(t.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new V(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>E(this,null,function*(){this.state=0,this.start()}))}G_(e){return L(WA,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(L(WA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},N_=class extends Ch{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=R2(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ee.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ee.min():s.readTime?An(s.readTime):ee.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=e_(this.serializer),t.addTarget=(function(o,s){let c,u=s.target;if(c=Uv(u)?{documents:x2(o,u)}:{query:M2(o,u).Vt},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=YR(o,s.resumeToken);let l=Jv(o,s.expectedCount);l!==null&&(c.expectedCount=l)}else if(s.snapshotVersion.compareTo(ee.min())>0){c.readTime=_h(o,s.snapshotVersion.toTimestamp());let l=Jv(o,s.expectedCount);l!==null&&(c.expectedCount=l)}return c})(this.serializer,e);let r=O2(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=e_(this.serializer),t.removeTarget=e,this.k_(t)}},P_=class extends Ch{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=P2(e.writeResults,e.commitTime),r=An(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=e_(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>N2(this.serializer,r))};this.k_(t)}};var x_=class{},M_=class extends x_{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new V(P.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,Zv(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(P.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Jo(e,Zv(t,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(P.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},k_=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(sr(t),this._a=!1):L("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var ro="RemoteStore",O_=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>E(this,null,function*(){io(this)&&(L(ro,"Restarting streams for network reachability change."),yield(function(u){return E(this,null,function*(){let l=J(u);l.Ia.add(4),yield Yc(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield zh(l)})})(this))}))}),this.Aa=new k_(r,i)}};function zh(n){return E(this,null,function*(){if(io(n))for(let e of n.da)yield e(!0)})}function Yc(n){return E(this,null,function*(){for(let e of n.da)yield e(!1)})}function sN(n,e){let t=J(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),vI(t)?yI(t):js(t).x_()&&mI(t,e))}function gI(n,e){let t=J(n),r=js(t);t.Ta.delete(e),r.x_()&&aN(t,e),t.Ta.size===0&&(r.x_()?r.B_():io(t)&&t.Aa.set("Unknown"))}function mI(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}js(n).H_(e)}function aN(n,e){n.Ra.$e(e),js(n).Y_(e)}function yI(n){n.Ra=new Qv({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),js(n).start(),n.Aa.aa()}function vI(n){return io(n)&&!js(n).M_()&&n.Ta.size>0}function io(n){return J(n).Ia.size===0}function cN(n){n.Ra=void 0}function Z2(n){return E(this,null,function*(){n.Aa.set("Online")})}function X2(n){return E(this,null,function*(){n.Ta.forEach((e,t)=>{mI(n,e)})})}function e$(n,e){return E(this,null,function*(){cN(n),vI(n)?(n.Aa.la(e),yI(n)):n.Aa.set("Unknown")})}function t$(n,e,t){return E(this,null,function*(){if(n.Aa.set("Online"),e instanceof yh&&e.state===2&&e.cause)try{yield(function(i,o){return E(this,null,function*(){let s=o.cause;for(let c of o.targetIds)i.Ta.has(c)&&(yield i.remoteSyncer.rejectListen(c,s),i.Ta.delete(c),i.Ra.removeTarget(c))})})(n,e)}catch(r){L(ro,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Dh(n,r)}else if(e instanceof _s?n.Ra.Ye(e):e instanceof mh?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ee.min()))try{let r=yield oN(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let c=o.Ra.Pt(s);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(vt.EMPTY_BYTE_STRING,h.snapshotVersion)),aN(o,u);let p=new zc(h.target,u,l,h.sequenceNumber);mI(o,p)}),o.remoteSyncer.applyRemoteEvent(c)})(n,t))}catch(r){L(ro,"Failed to raise snapshot:",r),yield Dh(n,r)}})}function Dh(n,e,t){return E(this,null,function*(){if(!Vs(e))throw e;n.Ia.add(1),yield Yc(n),n.Aa.set("Offline"),t||(t=()=>oN(n.localStore)),n.asyncQueue.enqueueRetryable(()=>E(null,null,function*(){L(ro,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield zh(n)}))})}function uN(n,e){return e().catch(t=>Dh(n,t,e))}function Wh(n){return E(this,null,function*(){let e=J(n),t=ei(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:iI;for(;n$(e);)try{let i=yield K2(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,r$(e,i)}catch(i){yield Dh(e,i)}lN(e)&&dN(e)})}function n$(n){return io(n)&&n.Pa.length<10}function r$(n,e){n.Pa.push(e);let t=ei(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function lN(n){return io(n)&&!ei(n).M_()&&n.Pa.length>0}function dN(n){ei(n).start()}function i$(n){return E(this,null,function*(){ei(n).na()})}function o$(n){return E(this,null,function*(){let e=ei(n);for(let t of n.Pa)e.X_(t.mutations)})}function s$(n,e,t){return E(this,null,function*(){let r=n.Pa.shift(),i=zv.from(r,e,t);yield uN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Wh(n)})}function a$(n,e){return E(this,null,function*(){e&&ei(n).Z_&&(yield(function(r,i){return E(this,null,function*(){if((function(s){return w2(s)&&s!==P.ABORTED})(i.code)){let o=r.Pa.shift();ei(r).N_(),yield uN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Wh(r)}})})(n,e)),lN(n)&&dN(n)})}function GA(n,e){return E(this,null,function*(){let t=J(n);t.asyncQueue.verifyOperationInProgress(),L(ro,"RemoteStore received new credentials");let r=io(t);t.Ia.add(3),yield Yc(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield zh(t)})}function c$(n,e){return E(this,null,function*(){let t=J(n);e?(t.Ia.delete(2),yield zh(t)):e||(t.Ia.add(2),yield Yc(t),t.Aa.set("Unknown"))})}function js(n){return n.Va||(n.Va=(function(t,r,i){let o=J(t);return o.ia(),new N_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:Z2.bind(null,n),e_:X2.bind(null,n),n_:e$.bind(null,n),J_:t$.bind(null,n)}),n.da.push(e=>E(null,null,function*(){e?(n.Va.N_(),vI(n)?yI(n):n.Aa.set("Unknown")):(yield n.Va.stop(),cN(n))}))),n.Va}function ei(n){return n.ma||(n.ma=(function(t,r,i){let o=J(t);return o.ia(),new P_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:i$.bind(null,n),n_:a$.bind(null,n),ea:o$.bind(null,n),ta:s$.bind(null,n)}),n.da.push(e=>E(null,null,function*(){e?(n.ma.N_(),yield Wh(n)):(yield n.ma.stop(),n.Pa.length>0&&(L(ro,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var L_=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,c=new n(e,t,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function _I(n,e){if(sr("AsyncQueue",`${e}: ${n}`),Vs(n))return new V(P.UNAVAILABLE,`${e}: ${n}`);throw n}var Ah=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||H.comparator(t.key,r.key):(t,r)=>H.comparator(t.key,r.key),this.keyedMap=Mc(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Rh=class{constructor(){this.fa=new Oe(H.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):q(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Ms=class n{constructor(e,t,r,i,o,s,c,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new n(e,t,Ah.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var F_=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},V_=class{constructor(){this.queries=KA(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=J(t),o=i.queries;i.queries=KA(),o.forEach((s,c)=>{for(let u of c.wa)u.onError(r)})})(this,new V(P.ABORTED,"Firestore shutting down"))}};function KA(){return new ur(n=>FR(n),Bh)}function u$(n,e){return E(this,null,function*(){let t=J(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new F_,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let c=_I(s,`Initialization of query '${gs(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&II(t)})}function l$(n,e){return E(this,null,function*(){let t=J(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function d$(n,e){let t=J(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let c of s.wa)c.Ca(i)&&(r=!0);s.ya=i}}r&&II(t)}function h$(n,e,t){let r=J(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function II(n){n.Da.forEach(e=>{e.next()})}var j_,QA;(QA=j_||(j_={})).Fa="default",QA.Cache="cache";var U_=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ms(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ms.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==j_.Cache}};var Nh=class{constructor(e){this.key=e}},Ph=class{constructor(e){this.key=e}},$_=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ue(),this.mutatedKeys=ue(),this.Xa=VR(e),this.eu=new Ah(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Rh,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Hh(this.query,p)?p:null,D=!!m&&this.mutatedKeys.has(m.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?D!==N&&(r.track({type:3,doc:y}),R=!0):this.iu(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(c=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(c=!0)),R&&(y?(s=s.add(y),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:c,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,D){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q(20277,{At:R})}};return N(y)-N(D)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let c=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new Ms(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:c}:{_u:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Rh,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ue(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Ph(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Nh(r))}),t}uu(e){this.Ha=e.qs,this.Za=ue();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ms.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},EI="SyncEngine",B_=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},H_=class{constructor(e){this.key=e,this.lu=!1}},q_=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new ur(c=>FR(c),Bh),this.Tu=new Map,this.Iu=new Set,this.du=new Oe(H.comparator),this.Eu=new Map,this.Au=new Gc,this.Ru={},this.Vu=new Map,this.mu=Wc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function f$(n,e,t=!0){return E(this,null,function*(){let r=yN(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield hN(r,e,t,!0),i})}function p$(n,e){return E(this,null,function*(){let t=yN(n);yield hN(t,e,!0,!1)})}function hN(n,e,t,r){return E(this,null,function*(){let i=yield Q2(n.localStore,Dn(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),c;return r&&(c=yield g$(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&sN(n.remoteStore,i),c})}function g$(n,e,t,r,i){return E(this,null,function*(){n.gu=(p,m,y)=>(function(N,R,O,$){return E(this,null,function*(){let G=R.view.nu(O);G.Ds&&(G=yield qA(N.localStore,R.query,!1).then(({documents:T})=>R.view.nu(T,G)));let Ee=$&&$.targetChanges.get(R.targetId),_t=$&&$.targetMismatches.get(R.targetId)!=null,ye=R.view.applyChanges(G,N.isPrimaryClient,Ee,_t);return JA(N,R.targetId,ye._u),ye.snapshot})})(n,p,m,y);let o=yield qA(n.localStore,e,!0),s=new $_(e,o.qs),c=s.nu(o.documents),u=qc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(c,n.isPrimaryClient,u);JA(n,t,l._u);let h=new B_(e,t,s);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot})}function m$(n,e,t){return E(this,null,function*(){let r=J(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Bh(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield T_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&gI(r.remoteStore,i.targetId),z_(r,i.targetId)}).catch(Fs))):(z_(r,i.targetId),yield T_(r.localStore,i.targetId,!0))})}function y$(n,e){return E(this,null,function*(){let t=J(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),gI(t.remoteStore,r.targetId))})}function v$(n,e,t){return E(this,null,function*(){let r=S$(n);try{let i=yield(function(s,c){let u=J(s),l=qe.now(),h=c.reduce((y,D)=>y.add(D.key),ue()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=lr(),N=ue();return u.Os.getEntries(y,h).next(R=>{D=R,D.forEach((O,$)=>{$.isValidDocument()||(N=N.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,D)).next(R=>{p=R;let O=[];for(let $ of c){let G=E2($,p.get($.key).overlayedDocument);G!=null&&O.push(new Pn($.key,G,PR(G.value.mapValue),or.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,O,c)}).next(R=>{m=R;let O=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,R.batchId,O)})}).then(()=>({batchId:m.batchId,changes:UR(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,c,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Oe(oe)),l=l.insert(c,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,t),yield Jc(r,i.changes),yield Wh(r.remoteStore)}catch(i){let o=_I(i,"Failed to persist write");t.reject(o)}})}function fN(n,e){return E(this,null,function*(){let t=J(n);try{let r=yield W2(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(me(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?me(s.lu,14607):i.removedDocuments.size>0&&(me(s.lu,42227),s.lu=!1))}),yield Jc(t,r,e)}catch(r){yield Fs(r)}})}function YA(n,e,t){let r=J(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),(function(s,c){let u=J(s);u.onlineState=c;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.wa)m.va(c)&&(l=!0)}),l&&II(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function _$(n,e,t){return E(this,null,function*(){let r=J(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Oe(H.comparator);s=s.insert(o,pn.newNoDocument(o,ee.min()));let c=ue().add(o),u=new gh(ee.min(),new Map,new Oe(oe),s,c);yield fN(r,u),r.du=r.du.remove(o),r.Eu.delete(e),wI(r)}else yield T_(r.localStore,e,!1).then(()=>z_(r,e,t)).catch(Fs)})}function I$(n,e){return E(this,null,function*(){let t=J(n),r=e.batch.batchId;try{let i=yield z2(t.localStore,e);gN(t,r,null),pN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Jc(t,i)}catch(i){yield Fs(i)}})}function E$(n,e,t){return E(this,null,function*(){let r=J(n);try{let i=yield(function(s,c){let u=J(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(me(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);gN(r,e,t),pN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Jc(r,i)}catch(i){yield Fs(i)}})}function pN(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function gN(n,e,t){let r=J(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function z_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||mN(n,r)})}function mN(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(gI(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),wI(n))}function JA(n,e,t){for(let r of t)r instanceof Nh?(n.Au.addReference(r.key,e),w$(n,r)):r instanceof Ph?(L(EI,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||mN(n,r.key)):q(19791,{yu:r})}function w$(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(L(EI,"New document in limbo: "+t),n.Iu.add(r),wI(n))}function wI(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new H(Re.fromString(e)),r=n.mu.next();n.Eu.set(r,new H_(t)),n.du=n.du.insert(t,r),sN(n.remoteStore,new zc(Dn(dI(t.path)),r,"TargetPurposeLimboResolution",rI.ue))}}function Jc(n,e,t){return E(this,null,function*(){let r=J(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((c,u)=>{s.push(r.gu(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=__.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(u,l){return E(this,null,function*(){let h=J(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,m=>x.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>x.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Vs(p))throw p;L(pI,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Fs.get(m),D=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(D);h.Fs=h.Fs.insert(m,N)}}})})(r.localStore,o))})}function T$(n,e){return E(this,null,function*(){let t=J(n);if(!t.currentUser.isEqual(e)){L(EI,"User change. New user:",e.toKey());let r=yield iN(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(c=>{c.forEach(u=>{u.reject(new V(P.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Jc(t,r.Bs)}})}function b$(n,e){let t=J(n),r=t.Eu.get(e);if(r&&r.lu)return ue().add(r.key);{let i=ue(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let c=t.Pu.get(s);i=i.unionWith(c.view.tu)}return i}}function yN(n){let e=J(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=fN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=b$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_$.bind(null,e),e.hu.J_=d$.bind(null,e.eventManager),e.hu.pu=h$.bind(null,e.eventManager),e}function S$(n){let e=J(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=I$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=E$.bind(null,e),e}var vN=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return E(this,null,function*(){this.serializer=qh(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return q2(this.persistence,new E_,t.initialUser,this.serializer)}Du(t){return new Eh(v_.Vi,this.serializer)}bu(t){return new b_}terminate(){return E(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),W_=class extends vN{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){me(this.persistence.referenceDelegate instanceof wh,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new o_(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new Eh(r=>wh.Vi(r,t),this.serializer)}};var C$=(()=>{class n{initialize(t,r){return E(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>YA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=T$.bind(null,this.syncEngine),yield c$(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new V_})()}createDatastore(t){let r=qh(t.databaseInfo.databaseId),i=(function(s){return new R_(s)})(t.databaseInfo);return(function(s,c,u,l){return new M_(s,c,u,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,c,u){return new O_(i,o,s,c,u)})(this.localStore,this.datastore,t.asyncQueue,r=>YA(this.syncEngine,r,0),(function(){return bh.C()?new bh:new S_})())}createSyncEngine(t,r){return(function(o,s,c,u,l,h,p){let m=new q_(o,s,c,u,l,h);return p&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return E(this,null,function*(){var t,r;yield(function(o){return E(this,null,function*(){let s=J(o);L(ro,"RemoteStore shutting down."),s.Ia.add(5),yield Yc(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var G_=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var ti="FirestoreClient",K_=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=rt.UNAUTHENTICATED,this.clientId=Vc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>E(this,null,function*(){L(ti,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(L(ti,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=_I(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function vv(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),L(ti,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>E(null,null,function*(){r.isEqual(i)||(yield iN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Zr("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{L("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Zr("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function ZA(n,e){return E(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield D$(n);L(ti,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>GA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>GA(e.remoteStore,i)),n._onlineComponents=e})}function D$(n){return E(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){L(ti,"Using user provided OfflineComponentProvider");try{yield vv(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Zr("Error using user provided cache. Falling back to memory cache: "+t),yield vv(n,new vN)}}else L(ti,"Using default OfflineComponentProvider"),yield vv(n,new W_(void 0));return n._offlineComponents})}function _N(n){return E(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(L(ti,"Using user provided OnlineComponentProvider"),yield ZA(n,n._uninitializedComponentsProvider._online)):(L(ti,"Using default OnlineComponentProvider"),yield ZA(n,new C$))),n._onlineComponents})}function A$(n){return _N(n).then(e=>e.syncEngine)}function XA(n){return E(this,null,function*(){let e=yield _N(n),t=e.eventManager;return t.onListen=f$.bind(null,e.syncEngine),t.onUnlisten=m$.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=p$.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=y$.bind(null,e.syncEngine),t})}function IN(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var eR=new Map;var EN="firestore.googleapis.com",tR=!0,xh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new V(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=EN,this.ssl=tR}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:tR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$2)throw new V(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new V(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new V(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new V(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ks=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new V(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new V(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xh(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new _v;switch(r.type){case"firstParty":return new Tv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return E(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=eR.get(t);r&&(L("ComponentProvider","Removing Datastore"),eR.delete(t),r.terminate())})(this),Promise.resolve()}};function wN(n,e,t,r={}){var i;n=Gr(n,ks);let o=Fr(e),s=n._getSettings(),c=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(Ad(`https://${u}`),Rd("Firestore",!0)),s.host!==EN&&s.host!==u&&Zr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!wn(l,c)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=rt.MOCK_USER;else{h=FC(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new V(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new rt(m)}n._authCredentials=new Iv(new ah(h,p))}}var Mh=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},yt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Qc(t,n._jsonSchema))return new n(e,r||null,new H(Re.fromString(t.referencePath)))}};yt._jsonSchemaVersion="firestore/documentReference/1.0",yt._jsonSchema={type:He("string",yt._jsonSchemaVersion),referencePath:He("string")};var Kr=class n extends Mh{constructor(e,t,r){super(e,t,dI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new yt(this.firestore,null,new H(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function TN(n,e,...t){if(n=nt(n),aR("collection","path",e),n instanceof ks){let r=Re.fromString(e,...t);return _A(r),new Kr(n,null,r)}{if(!(n instanceof yt||n instanceof Kr))throw new V(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Re.fromString(e,...t));return _A(r),new Kr(n.firestore,null,r)}}function TI(n,e,...t){if(n=nt(n),arguments.length===1&&(e=Vc.newId()),aR("doc","path",e),n instanceof ks){let r=Re.fromString(e,...t);return vA(r),new yt(n,null,new H(r))}{if(!(n instanceof yt||n instanceof Kr))throw new V(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Re.fromString(e,...t));return vA(r),new yt(n.firestore,n instanceof Kr?n.converter:null,new H(r))}}var nR="AsyncQueue",kh=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Sh(this,"async_queue_retry"),this.oc=()=>{let r=yv();r&&L(nR,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=yv();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=yv();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new ir;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return E(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Vs(e))throw e;L(nR,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,sr("INTERNAL UNHANDLED ERROR: ",rR(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=L_.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&q(47125,{hc:rR(this.tc)})}verifyOperationInProgress(){}Pc(){return E(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function rR(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function iR(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var ni=class extends ks{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new kh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return E(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new kh(e),this._firestoreClient=void 0,yield e}})}};function bN(n,e){let t=typeof n=="object"?n:$i(),r=typeof n=="string"?n:e||hh,i=cs(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=LC("firestore");o&&wN(i,...o)}return i}function SN(n){if(n._terminated)throw new V(P.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||R$(n),n._firestoreClient}function R$(n){var e,t,r;let i=n._freezeSettings(),o=(function(c,u,l,h){return new Av(c,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,IN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new K_(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(c){let u=c?._online.build();return{_offline:c?._offline.build(u),_online:u}})(n._componentsProvider))}var Qr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(vt.fromBase64String(e))}catch(t){throw new V(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Qc(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Qr._jsonSchemaVersion="firestore/bytes/1.0",Qr._jsonSchema={type:He("string",Qr._jsonSchemaVersion),bytes:He("string")};var Os=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new V(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Kc=class{constructor(e){this._methodName=e}};var Yr=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new V(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new V(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Qc(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Yr._jsonSchemaVersion="firestore/geoPoint/1.0",Yr._jsonSchema={type:He("string",Yr._jsonSchemaVersion),latitude:He("number"),longitude:He("number")};var Jr=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Qc(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new V(P.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Jr._jsonSchemaVersion="firestore/vectorValue/1.0",Jr._jsonSchema={type:He("string",Jr._jsonSchemaVersion),vectorValues:He("object")};var N$=/^__.*__$/,Q_=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Pn(e,this.data,this.fieldMask,t,this.fieldTransforms):new no(e,this.data,t,this.fieldTransforms)}},Oh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Pn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function CN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q(40011,{Ec:n})}}var Y_=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Fh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(CN(this.Ec)&&N$.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},J_=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||qh(e)}Dc(e,t,r,i=!1){return new Y_({Ec:e,methodName:t,bc:r,path:Bt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function DN(n){let e=n._freezeSettings(),t=qh(n._databaseId);return new J_(n._databaseId,!!e.ignoreUndefinedProperties,t)}function P$(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);bI("Data must be an object, but it was:",s,r);let c=AN(r,s),u,l;if(o.merge)u=new en(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Z_(e,p,t);if(!s.contains(m))throw new V(P.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);NN(h,m)||h.push(m)}u=new en(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new Q_(new $t(c),u,l)}var Lh=class n extends Kc{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function x$(n,e,t,r){let i=n.Dc(1,e,t);bI("Data must be an object, but it was:",i,r);let o=[],s=$t.empty();ri(r,(u,l)=>{let h=SI(e,u,t);l=nt(l);let p=i.gc(h);if(l instanceof Lh)o.push(h);else{let m=Gh(l,p);m!=null&&(o.push(h),s.set(h,m))}});let c=new en(o);return new Oh(s,c,i.fieldTransforms)}function M$(n,e,t,r,i,o){let s=n.Dc(1,e,t),c=[Z_(e,r,t)],u=[i];if(o.length%2!=0)throw new V(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)c.push(Z_(e,o[m])),u.push(o[m+1]);let l=[],h=$t.empty();for(let m=c.length-1;m>=0;--m)if(!NN(l,c[m])){let y=c[m],D=u[m];D=nt(D);let N=s.gc(y);if(D instanceof Lh)l.push(y);else{let R=Gh(D,N);R!=null&&(l.push(y),h.set(y,R))}}let p=new en(l);return new Oh(h,p,s.fieldTransforms)}function Gh(n,e){if(RN(n=nt(n)))return bI("Unsupported field value:",e,n),AN(n,e);if(n instanceof Kc)return(function(r,i){if(!CN(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let c of r){let u=Gh(c,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return m2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=qe.fromDate(r);return{timestampValue:_h(i.serializer,o)}}if(r instanceof qe){let o=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_h(i.serializer,o)}}if(r instanceof Yr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qr)return{bytesValue:YR(i.serializer,r._byteString)};if(r instanceof yt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:fI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Jr)return(function(s,c){return{mapValue:{fields:{[sI]:{stringValue:aI},[Ts]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw c.wc("VectorValues must only contain numeric values.");return hI(c.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${nI(r)}`)})(n,e)}function AN(n,e){let t={};return TR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ri(n,(r,i)=>{let o=Gh(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function RN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof qe||n instanceof Yr||n instanceof Qr||n instanceof yt||n instanceof Kc||n instanceof Jr)}function bI(n,e,t){if(!RN(t)||!cR(t)){let r=nI(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Z_(n,e,t){if((e=nt(e))instanceof Os)return e._internalPath;if(typeof e=="string")return SI(n,e);throw Fh("Field path arguments must be of type string or ",n,!1,void 0,t)}var k$=new RegExp("[~\\*/\\[\\]]");function SI(n,e,t){if(e.search(k$)>=0)throw Fh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Os(...e.split("."))._internalPath}catch{throw Fh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Fh(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new V(P.INVALID_ARGUMENT,c+n+u)}function NN(n,e){return n.some(t=>t.isEqual(e))}var Vh=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new X_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(PN("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},X_=class extends Vh{data(){return super.data()}};function PN(n,e){return typeof e=="string"?SI(n,e):e instanceof Os?e._internalPath:e._delegate._internalPath}function O$(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new V(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var eI=class{convertValue(e,t="none"){switch(Xr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(cr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw q(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ri(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Ts].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>De(s.doubleValue));return new Jr(o)}convertGeoPoint(e){return new Yr(De(e.latitude),De(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=$h(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp($c(e));default:return null}}convertTimestamp(e){let t=ar(e);return new qe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Re.fromString(e);me(nN(r),9688,{name:e});let i=new fh(r.get(1),r.get(3)),o=new H(r.popFirst(5));return i.isEqual(t)||sr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function L$(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Yi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ji=class n extends Vh{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Is(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(PN("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new V(P.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Ji._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ji._jsonSchema={type:He("string",Ji._jsonSchemaVersion),bundleSource:He("string","DocumentSnapshot"),bundleName:He("string"),bundle:He("string")};var Is=class extends Ji{data(e={}){return super.data(e)}},Es=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Yi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Is(this._firestore,this._userDataWriter,r.key,r,new Yi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new V(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new Is(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Yi(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new Is(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Yi(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return c.type!==0&&(l=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),h=s.indexOf(c.doc.key)),{type:F$(c.type),doc:u,oldIndex:l,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new V(P.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Vc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function F$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q(61501,{type:n})}}Es._jsonSchemaVersion="firestore/querySnapshot/1.0",Es._jsonSchema={type:He("string",Es._jsonSchemaVersion),bundleSource:He("string","QuerySnapshot"),bundleName:He("string"),bundle:He("string")};var jh=class extends eI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new yt(this.firestore,null,t)}};function xN(n,e,t,...r){n=Gr(n,yt);let i=Gr(n.firestore,ni),o=DN(i),s;return s=typeof(e=nt(e))=="string"||e instanceof Os?M$(o,"updateDoc",n._key,e,t,r):x$(o,"updateDoc",n._key,e),DI(i,[s.toMutation(n._key,or.exists(!0))])}function MN(n){return DI(Gr(n.firestore,ni),[new Hc(n._key,or.none())])}function kN(n,e){let t=Gr(n.firestore,ni),r=TI(n),i=L$(n.converter,e);return DI(t,[P$(DN(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,or.exists(!1))]).then(()=>r)}function CI(n,...e){var t,r,i;n=nt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||iR(e[s])||(o=e[s++]);let c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(iR(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof yt)l=Gr(n.firestore,ni),h=dI(n._key.path),u={next:p=>{e[s]&&e[s](V$(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Gr(n,Mh);l=Gr(p.firestore,ni),h=p._query;let m=new jh(l);u={next:y=>{e[s]&&e[s](new Es(l,m,p,y))},error:e[s+1],complete:e[s+2]},O$(n._query)}return(function(m,y,D,N){let R=new G_(N),O=new U_(y,R,D);return m.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return u$(yield XA(m),O)})),()=>{R.Ou(),m.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return l$(yield XA(m),O)}))}})(SN(l),h,c,u)}function DI(n,e){return(function(r,i){let o=new ir;return r.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return v$(yield A$(r),i,o)})),o.promise})(SN(n),e)}function V$(n,e,t){let r=t.docs.get(e._key),i=new jh(n);return new Ji(n,i,e._key,r,new Yi(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Ls=i})(jr),hn(new Tt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new ni(new Ev(r.getProvider("auth-internal")),new bv(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new V(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fh(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),ke(pA,gA,e),ke(pA,gA,"esm2017")})();var Kh=function(){return Kh=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Kh.apply(this,arguments)};var $$={includeMetadataChanges:!1};function ON(n,e){return e===void 0&&(e=$$),new ie(function(t){var r=CI(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function LN(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Kh(Kh({},r),(t={},t[e.idField]=n.id,t))}function FN(n){return ON(n,{includeMetadataChanges:!0}).pipe(se(function(e){return e.docs}))}function VN(n,e){return e===void 0&&(e={}),FN(n).pipe(se(function(t){return t.map(function(r){return LN(r,e)})}))}var oo=class{constructor(e){return e}},jN="firestore",AI=class{constructor(){return ls(jN)}};var RI=new U("angularfire2.firestore-instances");function B$(n,e){let t=Ec(jN,n,e);return t&&new oo(t)}function H$(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new oo(r)}}var q$={provide:AI,deps:[[new Ot,RI]]},z$={provide:oo,useFactory:B$,deps:[[new Ot,RI],Xn]};function UN(n,...e){return ke("angularfire",Ur.full,"fst"),rn([z$,q$,{provide:RI,useFactory:H$(n),multi:!0,deps:[ve,Ke,$r,Hi,[new Ot,Pc],[new Ot,ds],...e]}])}var $N=Ut(VN,!0);var BN=Ut(kN,!0,2);var NI=Ut(TN,!0,2);var HN=Ut(MN,!0,2);var PI=Ut(TI,!0,2);var qN=Ut(bN,!0);var zN=Ut(xN,!0,2);var WN={firebase:{projectId:"stock-app-b9475",appId:"1:602421702706:web:97855ec83612f939198c2b",storageBucket:"stock-app-b9475.firebasestorage.app",apiKey:"AIzaSyCIspo0QkSjuu5nspIeDuG512pl3s9uRzE",authDomain:"stock-app-b9475.firebaseapp.com",messagingSenderId:"602421702706",projectNumber:"602421702706",version:"2"}};var GN={providers:[tm({eventCoalescing:!0}),Zm(PC),lD(()=>dD(WN.firebase)),lA(()=>dA()),UN(()=>qN())]};var xn=class n{constructor(e){this.firestore=e}crearProduct$=new ze(null);addProduct(e){let t=NI(this.firestore,"product");return BN(t,e)}getProduct(){let e=NI(this.firestore,"product");return $N(e,{idField:"id"})}deletedProducts(e){let t=PI(this.firestore,`product/${e.id}`);return HN(t)}addProductEdit(e){this.crearProduct$.next(e)}getProductEdit(){return this.crearProduct$.asObservable().pipe(pt(e=>e!==null))}editProduct(e,t){let r=PI(this.firestore,`product/${e}`),s=t,{id:i}=s,o=FE(s,["id"]);return zN(r,o)}static \u0275fac=function(t){return new(t||n)(te(oo))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};var Qh=class n{constructor(e){this.productService=e}name=Qt("");price=Qt(0);image=Qt("");description=Qt("");quantity=Qt(0);id=Qt.required();onDelete=Gn();deletedProduct=Gn();showEditTrue=Gn();product=Gn();editProduct=Qt();deledCard(){this.deletedProduct.emit({name:this.name(),quantity:this.quantity(),price:this.price(),image:this.image()?this.image():"",description:this.description()?this.description():"",id:this.id()})}showPageEditTrue(){this.showEditTrue.emit(!0)}emitProduct(){this.product.emit({name:this.name(),quantity:this.quantity(),price:this.price(),image:this.image(),description:this.description(),id:this.id()})}static \u0275fac=function(t){return new(t||n)(Nr(xn))};static \u0275cmp=Lt({type:n,selectors:[["app-card-inventory"]],inputs:{name:[1,"name"],price:[1,"price"],image:[1,"image"],description:[1,"description"],quantity:[1,"quantity"],id:[1,"id"],editProduct:[1,"editProduct"]},outputs:{onDelete:"onDelete",deletedProduct:"deletedProduct",showEditTrue:"showEditTrue",product:"product"},decls:26,vars:6,consts:[[1,"relative","flex","flex-col","text-gray-700","bg-white","shadow-md","rounded-xl","w-full","max-w-xs","sm:max-w-sm","md:max-w-md","lg:max-w-sm"],[1,"relative","mx-4","mt-4","overflow-hidden","rounded-xl","h-48","sm:h-50","md:h-56","lg:h-60"],["alt","card-image",1,"object-cover","w-full","h-full",3,"src"],[1,"p-4","sm:p-6"],[1,"mb-2"],[1,"font-medium","text-blue-gray-900","text-sm","sm:text-base"],[1,"flex","justify-between","items-center","mb-2"],[1,"flex","flex-col"],[1,"text-gray-500","text-xs","sm:text-sm"],[1,"flex","flex-col","text-right"],[1,"text-xs","sm:text-sm","text-gray-700","opacity-75","wrap-break-word"],[1,"p-4","sm:p-6","pt-0"],[1,"flex","flex-col","sm:flex-row","gap-2","sm:gap-4"],[1,"w-full","sm:w-1/2","text-xs","sm:text-sm","font-bold","uppercase","py-2","sm:py-3","px-4","sm:px-6","rounded-lg","bg-blue-gray-900/10","text-blue-gray-900","hover:scale-105","transition","cursor-pointer",3,"click"]],template:function(t,r){t&1&&(ne(0,"div",0)(1,"div",1),zo(2,"img",2),re(),ne(3,"div",3)(4,"div",4)(5,"p",5),be(6),re()(),ne(7,"div",6)(8,"div",7)(9,"span",8),be(10,"Price"),re(),ne(11,"p",5),be(12),re()(),ne(13,"div",9)(14,"span",8),be(15,"Quantity"),re(),ne(16,"p",5),be(17),re()()(),ne(18,"p",10),be(19),re()(),ne(20,"div",11)(21,"div",12)(22,"button",13),Ue("click",function(){return r.showPageEditTrue(),r.emitProduct()}),be(23," Edit "),re(),ne(24,"button",13),Ue("click",function(){return r.deledCard()}),be(25," Delete "),re()()()()),t&2&&(Ae(2),gt("src",za(r.image()),Ag),Ae(4),qa(r.name()),Ae(6),Go("$",r.price()),Ae(5),qa(r.quantity()),Ae(2),Go(" ",r.description()," "))},encapsulation:2,changeDetection:0})};var Yh=class n{constructor(e){this.productService=e}cardList=Ce([]);name=Ce("");price=Ce(0);quantity=Ce(0);newProduct=Gn();image=Ce("");description=Ce("");addCard(){if(!this.name()||this.price()<0||this.quantity()<0)return;let e={name:this.name(),quantity:this.quantity(),price:this.price(),image:this.image(),description:this.description(),id:Math.random()*1e4};this.newProduct.emit(e),this.resetForm()}resetForm(){this.name.set(""),this.quantity.set(0),this.price.set(0),this.image.set(""),this.description.set("")}static \u0275fac=function(t){return new(t||n)(Nr(xn))};static \u0275cmp=Lt({type:n,selectors:[["app-side-bar"]],outputs:{newProduct:"newProduct"},decls:31,vars:5,consts:[["txtName",""],["txtQuantity",""],["txtPrice",""],["txtImage",""],["txtDescription",""],[1,"bg-amber-50","w-full","max-w-xs","sm:max-w-sm","md:max-w-md","lg:max-w-lg","h-dvh","flex-shrink-0","flex","flex-col","items-center","p-4","mx-auto"],[1,"text-2xl","sm:text-3xl","my-5","font-bold","text-gray-900","text-center"],[1,"flex","flex-col","gap-4","w-full"],[1,"flex","flex-col"],["for","txtName",1,"mb-1","text-gray-700","font-medium"],["id","txtName","type","text",1,"w-full","px-3","sm:px-4","py-2","sm:py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","outline-none","transition-all","text-sm","sm:text-base",3,"input","value"],["for","txtQuantity",1,"mb-1","text-gray-700","font-medium"],["id","txtQuantity","type","number",1,"w-full","px-3","sm:px-4","py-2","sm:py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","outline-none","transition-all","text-sm","sm:text-base",3,"input","value"],["for","txtPrice",1,"mb-1","text-gray-700","font-medium"],["id","txtPrice","type","number",1,"w-full","px-3","sm:px-4","py-2","sm:py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","outline-none","transition-all","text-sm","sm:text-base",3,"input","value"],["for","txtImage",1,"mb-1","text-gray-700","font-medium"],["id","txtImage","type","text",1,"w-full","px-3","sm:px-4","py-2","sm:py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","outline-none","transition-all","text-sm","sm:text-base",3,"input","value"],["for","txtDescription",1,"mb-1","text-gray-700","font-medium"],["id","txtDescription",1,"w-full","px-3","sm:px-4","py-2","sm:py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","outline-none","transition-all","text-sm","sm:text-base",3,"input","value"],[1,"w-full","bg-indigo-600","hover:bg-indigo-700","text-white","font-medium","py-2.5","sm:py-3","rounded-lg","mt-4","transition-colors",3,"click"]],template:function(t,r){if(t&1){let i=Wn();ne(0,"div",5)(1,"h2",6),be(2," Add Product "),re(),ne(3,"form",7)(4,"div",8)(5,"label",9),be(6,"Product's Name"),re(),ne(7,"input",10,0),Ue("input",function(){xe(i);let s=Ft(8);return Me(r.name.set(s.value))}),re()(),ne(9,"div",8)(10,"label",11),be(11,"Quantity"),re(),ne(12,"input",12,1),Ue("input",function(){xe(i);let s=Ft(13);return Me(r.quantity.set(+s.value))}),re()(),ne(14,"div",8)(15,"label",13),be(16,"Price"),re(),ne(17,"input",14,2),Ue("input",function(){xe(i);let s=Ft(18);return Me(r.price.set(+s.value))}),re()(),ne(19,"div",8)(20,"label",15),be(21,"Image URL"),re(),ne(22,"input",16,3),Ue("input",function(){xe(i);let s=Ft(23);return Me(r.image.set(s.value))}),re()(),ne(24,"div",8)(25,"label",17),be(26,"Description"),re(),ne(27,"input",18,4),Ue("input",function(){xe(i);let s=Ft(28);return Me(r.description.set(s.value))}),re()()(),ne(29,"button",19),Ue("click",function(){return xe(i),Me(r.addCard())}),be(30," Add "),re()()}t&2&&(Ae(7),gt("value",r.name()),Ae(5),gt("value",r.quantity()),Ae(5),gt("value",r.price()),Ae(5),gt("value",r.image()),Ae(5),gt("value",r.description()))},encapsulation:2,changeDetection:0})};function G$(n,e){if(n&1){let t=Wn();ne(0,"button",19),Ue("click",function(){xe(t);let i=xr();return Me(i.productEdit())}),be(1," Save "),re()}}var Jh=class n{productService=M(xn);ngOnInit(){this.productService.getProductEdit().subscribe(e=>{console.log(e,"dsadadasda"),this.name.set(e.name),this.price.set(e.price),this.quantity.set(e.quantity),this.description.set(e.description?e.description:""),this.image.set(e.image?e.image:""),this.id.set(e.id)})}showPage=Gn();name=Ce("");price=Ce(0);quantity=Ce(0);image=Ce("");description=Ce("");product=Qt();id=Ce(0);showEditPage(){this.showPage.emit(!1)}productEdit(){if(this.id()===null){console.warn("El ID a\xFAn no est\xE1 cargado");return}let e={id:this.id(),name:this.name(),price:this.price(),quantity:this.quantity(),image:this.image(),description:this.description()};this.productService.editProduct(this.id().toString(),e).then(()=>console.log("Producto actualizado")).catch(t=>console.error(t)),this.showPage.emit(!1)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Lt({type:n,selectors:[["app-edit-page"]],inputs:{product:[1,"product"]},outputs:{showPage:"showPage"},decls:34,vars:8,consts:[["txtName",""],["txtPrice",""],["txtQuantity",""],["txtImage",""],["txtDescription",""],[1,"min-h-screen","bg-black/50","w-screen","flex","items-center","justify-center","p-4"],[1,"w-full","max-w-md","sm:max-w-lg","md:max-w-xl","lg:max-w-2xl","bg-white","rounded-xl","shadow-lg","p-6","sm:p-8","relative"],[1,"bg-gray-400","hover:bg-gray-500","w-8","h-8","flex","items-center","justify-center","rounded-full","text-white","absolute","top-3","right-3","cursor-pointer","transition-colors","duration-200",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","d","M6 18L18 6M6 6l12 12"],[1,"text-2xl","sm:text-3xl","font-bold","text-gray-900","mb-6","text-center"],[1,"space-y-4"],[1,"block","text-sm","sm:text-base","font-medium","text-gray-700","mb-1"],["type","product","placeholder","product",1,"w-full","px-3","sm:px-4","py-2","sm:py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","outline-none","transition-all","text-sm","sm:text-base",3,"input","value"],["type","number","placeholder","price",1,"w-full","px-3","sm:px-4","py-2","sm:py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","outline-none","transition-all","text-sm","sm:text-base",3,"input","value"],["type","number",1,"w-full","px-3","sm:px-4","py-2","sm:py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","outline-none","transition-all","text-sm","sm:text-base",3,"input","placeholder","value"],["type","text","placeholder","Image URL",1,"w-full","px-3","sm:px-4","py-2","sm:py-3","border","border-gray-300","rounded-lg","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","outline-none","transition-all","text-sm","sm:text-base",3,"input","value"],["placeholder","Escribe aqu\xED...",1,"w-full","h-32","sm:h-40","resize-none","overflow-y-auto","overflow-x-hidden","whitespace-pre-wrap","wrap-break-word","p-2","sm:p-3","border","rounded","text-sm","sm:text-base",3,"input","value"],["type","submit",1,"w-full","bg-indigo-600","hover:bg-indigo-700","text-white","font-medium","py-2.5","sm:py-3","rounded-lg","transition-colors","mt-4"],["type","submit",1,"w-full","bg-indigo-600","hover:bg-indigo-700","text-white","font-medium","py-2.5","sm:py-3","rounded-lg","transition-colors","mt-4",3,"click"]],template:function(t,r){if(t&1){let i=Wn();ne(0,"div",5)(1,"div",6)(2,"div",7),Ue("click",function(){return xe(i),Me(r.showEditPage())}),dl(),ne(3,"svg",8),zo(4,"path",9),re()(),hl(),ne(5,"h2",10),be(6,"Edit Product"),re(),ne(7,"form",11)(8,"div")(9,"label",12),be(10,"Product"),re(),ne(11,"input",13,0),Ue("input",function(){xe(i);let s=Ft(12);return Me(r.name.set(s.value))}),re()(),ne(13,"div")(14,"label",12),be(15,"Price"),re(),ne(16,"input",14,1),Ue("input",function(){xe(i);let s=Ft(17);return Me(r.price.set(+s.value))}),re()(),ne(18,"div")(19,"label",12),be(20,"Quantity"),re(),ne(21,"input",15,2),Ue("input",function(){xe(i);let s=Ft(22);return Me(r.quantity.set(+s.value))}),re()(),ne(23,"div")(24,"label",12),be(25,"Image URL"),re(),ne(26,"input",16,3),Ue("input",function(){xe(i);let s=Ft(27);return Me(r.image.set(s.value))}),re()(),ne(28,"div")(29,"label",12),be(30,"Description"),re(),ne(31,"textarea",17,4),Ue("input",function(){xe(i);let s=Ft(32);return Me(r.description.set(s.value))}),re()()(),$a(33,G$,2,0,"button",18),re()()}t&2&&(Ae(11),gt("value",r.name()),Ae(5),gt("value",r.price()),Ae(5),gt("placeholder",za(r.quantity()))("value",r.quantity()),Ae(5),gt("value",r.image()),Ae(5),gt("value",r.description()),Ae(2),Ba(r.id()!=null?33:-1))},encapsulation:2,changeDetection:0})};function K$(n,e){if(n&1){let t=Wn();Pr(0,"app-card-inventory",6),Wo("product",function(){let i=xe(t).$implicit,o=xr();return Me(o.showProduct(i))})("deletedProduct",function(i){xe(t);let o=xr();return Me(o.deletedProductFromDoc(i))})("showEditTrue",function(i){xe(t);let o=xr();return Me(o.showPageEditTrue(i))}),zn()}if(n&2){let t=e.$implicit;Jl("price",t.price)("description",t.description)("quantity",t.quantity)("image",t.image)("id",t.id)("name",t.name)}}function Q$(n,e){if(n&1){let t=Wn();Pr(0,"div",5)(1,"div",7)(2,"app-edit-page",8),Wo("showPage",function(i){xe(t);let o=xr();return Me(o.showPageEdit(i))}),zn()()()}}var Zh=class n{constructor(e){this.productService=e}showPage=Ce(!1);cardList=Ce([]);ngOnInit(){this.productService.getProduct().subscribe(e=>{this.cardList.set(e)})}showPageEdit(e){this.showPage.set(e)}showPageEditTrue(e){this.showPage.set(e)}deletedProductFromDoc(e){this.productService.deletedProducts(e)}addNewProduct(e){return E(this,null,function*(){let t=yield this.productService.addProduct(e)})}showProduct(e){this.productService.addProductEdit(e)}static \u0275fac=function(t){return new(t||n)(Nr(xn))};static \u0275cmp=Lt({type:n,selectors:[["app-inventory-page"]],decls:7,vars:1,consts:[[1,"w-full","h-dvh","flex","overflow-hidden"],[1,"shrink-0","relative",3,"newProduct"],[1,"flex-1","overflow-auto"],[1,"grid","gap-4","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4"],[3,"price","description","quantity","image","id","name"],[1,"fixed","inset-0"],[3,"product","deletedProduct","showEditTrue","price","description","quantity","image","id","name"],[1,"absolute","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2"],[3,"showPage"]],template:function(t,r){t&1&&(Pr(0,"div",0)(1,"app-side-bar",1),Wo("newProduct",function(o){return r.addNewProduct(o)}),zn(),Pr(2,"div",2)(3,"div",3),Jg(4,K$,1,6,"app-card-inventory",4,Yg),zn()(),$a(6,Q$,3,0,"div",5),zn()),t&2&&(Ae(4),Zg(r.cardList()),Ae(2),Ba(r.showPage()?6:-1))},dependencies:[Qh,Yh,Jh],encapsulation:2,changeDetection:0})};var Xh=class n{title="fire-app";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Lt({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&qo(0,"app-inventory-page")},dependencies:[Zh],encapsulation:2})};ym(Xh,GN).catch(n=>console.error(n));
